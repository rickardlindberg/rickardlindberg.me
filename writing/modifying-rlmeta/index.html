<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>
      Modifying the RLMeta metacompiler | Rickard Lindberg
    </title>

    <!-- Bootstrap -->
    <link href="../../static/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <meta name="keywords" content="programming, writing" />
    <meta name="description" content="Rickard Lindberg">
    <link rel="stylesheet" href="../../static/layout.css" type="text/css">
    <link rel="stylesheet" href="../../static/syntax.css" type="text/css">
    <link rel="alternate" href="../../atom.xml" type="application/atom+xml" title="Atom feed">
    <link rel="alternate" href="../../rss.xml" type="application/rss+xml" title="RSS feed">
    <link rel="me" href="https://hachyderm.io/@rickardlindberg">
  </head>
  <body>

    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../">rickardlindberg.me</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav">
            <li><a href="../../">Home</a></li>
            <li><a href="../../writing/">Writing</a></li>
            <li><a href="../../writing/newsletter/">Newsletter</a></li>
            <li><a href="../../projects/">Projects</a></li>
            <li><a href="../../contact/">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
      <h1>Modifying the RLMeta metacompiler</h1>

<p><em>Published on 2019-05-28.</em></p>

<p>In the first article about <a href="../../writing/rlmeta/">RLMeta</a> I wrote that its small implementation makes it feasible to understand and modify. But modifying the RLMeta metacompiler differs from modifying a regular program. In this article I explain how it differs and show examples of how different parts of RLMeta can be modified.</p>

<ul><li><a href="#39efe623ff374daba9830984300fcde2">Meta what?</a>

</li>

<li><a href="#93d9030e0e4849c5a8d8ca0fffdf7592">Modifying a metacompiler</a>

</li>

<li><a href="#bf2e6a99e41f478f884dd15ea243c111">Compiling RLMeta</a>

</li>

<li><a href="#75ad82923a2142789d01ca5be1d11942">Verifying metacompiler</a>

</li>

<li><a href="#5f6a1c91143146dbb3b865ac42562135">Modifying format of generated code</a>

</li>

<li><a href="#d54bbeda3d9846bca027f2c2995775a5">Meta compile script</a>

</li>

<li><a href="#6bfdc073cd4041238b169caa671c9652">Breaking modification</a>

</li>

<li><a href="#0130b76cb3d24f458bb47debb6fc2780">Modifying support library</a>

</li>

<li><a href="#1a090bb868154140a167968d8b4b15dc">Extending parser escape codes</a>

</li>

<li><a href="#22e574102e394218b874f03bb879c92f">Modifying parser</a>

</li>

<li><a href="#60cb5d0ff4ca4d94920bfe635ffd2142">Code listings for RLMeta</a>

<ul><li><a href="#df676d8cca604142bd1049c5e86c68a2">compile.sh</a>

</li>

<li><a href="#38ee00b5ef7c40f79d24fa61f052368f">meta_compile.sh</a>

</li>

<li><a href="#596acbaab3614dc787158be918bd9d32">is_metacompiler.sh</a>

</li>

</ul></li>

</ul><h2><a name="39efe623ff374daba9830984300fcde2"></a>Meta what?</h2>

<p>What is a metacompiler and how does it differ from a regular compiler?</p>

<p>A compiler translates source code into an executable:</p>

<div class="rliterate-image"><img src="image1.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p>A C compiler translates source code written in C into an executable:</p>

<div class="rliterate-image"><img src="image2.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p>A metacompiler translates source code written in a metalanguage into an executable:</p>

<div class="rliterate-image"><img src="image3.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p>A metalanguage is a domain specific language for describing other languages. It can be used to describe what languages look like (their syntax) and how to translate them into executables (their semantics). In essence, it can be used to describe compilers.</p>

<p>Because a metalanguage can be used to describe any compiler, it can also be used to describe the metacompiler itself. The metacompiler translates such a description into itself:</p>

<div class="rliterate-image"><img src="image4.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p>A metacompiler does not have to be implemented in the metalanguage itself, but I suspect that it is common that it is. RLMeta is indeed implemented in its own language. This is also known as self-hosting. For the rest of this article, I will assume that a metacompiler is also self-hosting.</p>

<p>A C compiler written in C is not a metacompiler because C is not a metalanguage. It is a general purpose programming language not designed specifically to describe other languages. Such a compiler is merely a self-hosting compiler.</p>

<h2><a name="93d9030e0e4849c5a8d8ca0fffdf7592"></a>Modifying a metacompiler</h2>

<p>How is modifying a metacompiler different from modifying a regular program?</p>

<p>In general, to modify a program written in a compiled language, its source code and a compiler is needed. Modifying the program is a matter of modifying the source code and compiling it:</p>

<div class="rliterate-image"><img src="image5.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<div class="rliterate-image"><img src="image6.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p>In the case of a metacompiler, the compiler and the executable is the same. However, if the source code is modified, the executable might not be the metacompiler itself:</p>

<div class="rliterate-image"><img src="image7.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<div class="rliterate-image"><img src="image8.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p>At this point, the metacompiler is needed to keep maintaining the modified executable. But the source code for the metacompiler itself is "lost" because the metacompiler can not be reproduced from the modified source code:</p>

<div class="rliterate-image"><img src="image9.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p>Because there is no source code, the original metacompiler can not be modified either.</p>

<p>When modifying a metacompiler, care has to be taken to ensure that, in the end, the executable is still a metacompiler. Otherwise the metacompiler can not be modified further. This is a key difference from modifying a regular program. (Similar care has to be taken when modifying a self-hosting compiler.)</p>

<h2><a name="bf2e6a99e41f478f884dd15ea243c111"></a>Compiling RLMeta</h2>

<p>This is a recap of how RLMeta is compiled.</p>

<p>RLMeta is compiled with the <code>compile.sh</code> script. It takes one argument which is the path to the RLMeta compiler. The script uses that compiler to compile the source code and then assemble the output to a Python file that looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>compile.sh</li><li><span class="cp">rlmeta template</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="kn">i</span><span class="kn">m</span><span class="kn">p</span><span class="kn">o</span><span class="kn">r</span><span class="kn">t</span><span class> </span><span class="nn">s</span><span class="nn">y</span><span class="nn">s</span><span class>
</span><span class>
</span><span class="n">S</span><span class="n">U</span><span class="n">P</span><span class="n">P</span><span class="n">O</span><span class="n">R</span><span class="n">T</span><span class> </span><span class="o">=</span><span class> </span><span class="err">$</span><span class="n">s</span><span class="n">u</span><span class="n">p</span><span class="n">p</span><span class="n">o</span><span class="n">r</span><span class="n">t</span><span class="n">_</span><span class="n">p</span><span class="n">y</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class>
</span><span class>
</span><span class="err">$</span><span class="n">s</span><span class="n">u</span><span class="n">p</span><span class="n">p</span><span class="n">o</span><span class="n">r</span><span class="n">t</span><span class="n">_</span><span class="n">p</span><span class="n">y</span><span class>
</span><span class>
</span><span class="err">$</span><span class="n">p</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="n">e</span><span class="n">r</span><span class="n">_</span><span class="n">p</span><span class="n">y</span><span class>
</span><span class>
</span><span class="err">$</span><span class="n">c</span><span class="n">o</span><span class="n">d</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">n</span><span class="n">e</span><span class="n">r</span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">r</span><span class="n">_</span><span class="n">p</span><span class="n">y</span><span class>
</span><span class>
</span><span class="n">j</span><span class="n">o</span><span class="n">i</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">"</span><span class="o">.</span><span class="n">j</span><span class="n">o</span><span class="n">i</span><span class="n">n</span><span class>
</span><span class>
</span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">c</span><span class="nf">o</span><span class="nf">m</span><span class="nf">p</span><span class="nf">i</span><span class="nf">l</span><span class="nf">e</span><span class="nf">_</span><span class="nf">g</span><span class="nf">r</span><span class="nf">a</span><span class="nf">m</span><span class="nf">m</span><span class="nf">a</span><span class="nf">r</span><span class="p">(</span><span class="n">g</span><span class="n">r</span><span class="n">a</span><span class="n">m</span><span class="n">m</span><span class="n">a</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="o">=</span><span class> </span><span class="n">P</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">o</span><span class="n">d</span><span class="n">e</span><span class="n">_</span><span class="n">g</span><span class="n">e</span><span class="n">n</span><span class="n">e</span><span class="n">r</span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">r</span><span class> </span><span class="o">=</span><span class> </span><span class="n">C</span><span class="n">o</span><span class="n">d</span><span class="n">e</span><span class="n">G</span><span class="n">e</span><span class="n">n</span><span class="n">e</span><span class="n">r</span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">r</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">c</span><span class="n">o</span><span class="n">d</span><span class="n">e</span><span class="n">_</span><span class="n">g</span><span class="n">e</span><span class="n">n</span><span class="n">e</span><span class="n">r</span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">r</span><span class="o">.</span><span class="n">r</span><span class="n">u</span><span class="n">n</span><span class="p">(</span><span class="s2">"</span><span class="s2">a</span><span class="s2">s</span><span class="s2">t</span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">r</span><span class="n">u</span><span class="n">n</span><span class="p">(</span><span class="s2">"</span><span class="s2">g</span><span class="s2">r</span><span class="s2">a</span><span class="s2">m</span><span class="s2">m</span><span class="s2">a</span><span class="s2">r</span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="n">g</span><span class="n">r</span><span class="n">a</span><span class="n">m</span><span class="n">m</span><span class="n">a</span><span class="n">r</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class>
</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="vm">_</span><span class="vm">_</span><span class="vm">n</span><span class="vm">a</span><span class="vm">m</span><span class="vm">e</span><span class="vm">_</span><span class="vm">_</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">_</span><span class="s2">_</span><span class="s2">m</span><span class="s2">a</span><span class="s2">i</span><span class="s2">n</span><span class="s2">_</span><span class="s2">_</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="s2">"</span><span class="s2">-</span><span class="s2">-</span><span class="s2">s</span><span class="s2">u</span><span class="s2">p</span><span class="s2">p</span><span class="s2">o</span><span class="s2">r</span><span class="s2">t</span><span class="s2">"</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">s</span><span class="n">y</span><span class="n">s</span><span class="o">.</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">v</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">y</span><span class="n">s</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">S</span><span class="n">U</span><span class="n">P</span><span class="n">P</span><span class="n">O</span><span class="n">R</span><span class="n">T</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">t</span><span class="k">r</span><span class="k">y</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">y</span><span class="n">s</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">c</span><span class="n">o</span><span class="n">m</span><span class="n">p</span><span class="n">i</span><span class="n">l</span><span class="n">e</span><span class="n">_</span><span class="n">g</span><span class="n">r</span><span class="n">a</span><span class="n">m</span><span class="n">m</span><span class="n">a</span><span class="n">r</span><span class="p">(</span><span class="n">s</span><span class="n">y</span><span class="n">s</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="n">i</span><span class="n">n</span><span class="o">.</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">d</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">x</span><span class="k">c</span><span class="k">e</span><span class="k">p</span><span class="k">t</span><span class> </span><span class="n">_</span><span class="n">M</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">E</span><span class="n">r</span><span class="n">r</span><span class="n">o</span><span class="n">r</span><span class> </span><span class="k">a</span><span class="k">s</span><span class> </span><span class="n">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">y</span><span class="n">s</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="n">r</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">d</span><span class="n">e</span><span class="n">s</span><span class="n">c</span><span class="n">r</span><span class="n">i</span><span class="n">b</span><span class="n">e</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">y</span><span class="n">s</span><span class="o">.</span><span class="n">e</span><span class="n">x</span><span class="n">i</span><span class="n">t</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<p>The variables <code>$support_py</code>, <code>$parser_py</code>, and <code>$codegenerator_py</code> are produced by the RLMeta compiler. The variable <code>$support_py_string</code> is produced by converting the support library to a Python string. Here is the rest of the <code>compile.sh</code> script:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>compile.sh</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="ch">#</span><span class="ch">!</span><span class="ch">/</span><span class="ch">b</span><span class="ch">i</span><span class="ch">n</span><span class="ch">/</span><span class="ch">b</span><span class="ch">a</span><span class="ch">s</span><span class="ch">h</span><span class="ch">
</span><span class>
</span><span class="nb">s</span><span class="nb">e</span><span class="nb">t</span><span class> </span><span class>-</span><span class>e</span><span class>
</span><span class>
</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="o">=</span><span class="s2">"</span><span class="k">$</span><span class="k">(</span><span class="nb">p</span><span class="nb">w</span><span class="nb">d</span><span class="k">)</span><span class="s2">/</span><span class="nv">$</span><span class="nv">1</span><span class="s2">"</span><span class>
</span><span class>
</span><span class="nb">c</span><span class="nb">d</span><span class> </span><span class="s2">"</span><span class="k">$</span><span class="k">(</span><span class>d</span><span class>i</span><span class>r</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">0</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span><span class>
</span><span class>
</span><span class>t</span><span class>o</span><span class>_</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class>_</span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class="o">(</span><span class="o">)</span><span class> </span><span class="o">{</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class>-</span><span class>c</span><span class> </span><span class="s1">'</span><span class="s1">i</span><span class="s1">m</span><span class="s1">p</span><span class="s1">o</span><span class="s1">r</span><span class="s1">t</span><span class="s1"> </span><span class="s1">s</span><span class="s1">y</span><span class="s1">s</span><span class="s1">;</span><span class="s1"> </span><span class="s1">s</span><span class="s1">y</span><span class="s1">s</span><span class="s1">.</span><span class="s1">s</span><span class="s1">t</span><span class="s1">d</span><span class="s1">o</span><span class="s1">u</span><span class="s1">t</span><span class="s1">.</span><span class="s1">w</span><span class="s1">r</span><span class="s1">i</span><span class="s1">t</span><span class="s1">e</span><span class="s1">(</span><span class="s1">r</span><span class="s1">e</span><span class="s1">p</span><span class="s1">r</span><span class="s1">(</span><span class="s1">s</span><span class="s1">y</span><span class="s1">s</span><span class="s1">.</span><span class="s1">s</span><span class="s1">t</span><span class="s1">d</span><span class="s1">i</span><span class="s1">n</span><span class="s1">.</span><span class="s1">r</span><span class="s1">e</span><span class="s1">a</span><span class="s1">d</span><span class="s1">(</span><span class="s1">)</span><span class="s1">)</span><span class="s1">)</span><span class="s1">'</span><span class>
</span><span class="o">}</span><span class>
</span><span class>
</span><span class="nv">s</span><span class="nv">u</span><span class="nv">p</span><span class="nv">p</span><span class="nv">o</span><span class="nv">r</span><span class="nv">t</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="nv">_</span><span class="nv">s</span><span class="nv">t</span><span class="nv">r</span><span class="nv">i</span><span class="nv">n</span><span class="nv">g</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>t</span><span class>o</span><span class>_</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class>_</span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class> </span><span class>&lt;</span><span class> </span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class>.</span><span class>p</span><span class>y</span><span class="k">)</span><span class>
</span><span class="nv">s</span><span class="nv">u</span><span class="nv">p</span><span class="nv">p</span><span class="nv">o</span><span class="nv">r</span><span class="nv">t</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="s2">"</span><span class> </span><span class>-</span><span class>-</span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class="k">)</span><span class>
</span><span class="nv">p</span><span class="nv">a</span><span class="nv">r</span><span class="nv">s</span><span class="nv">e</span><span class="nv">r</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="s2">"</span><span class> </span><span class>&lt;</span><span class> </span><span class>p</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>r</span><span class>.</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class="k">)</span><span class>
</span><span class="nv">c</span><span class="nv">o</span><span class="nv">d</span><span class="nv">e</span><span class="nv">g</span><span class="nv">e</span><span class="nv">n</span><span class="nv">e</span><span class="nv">r</span><span class="nv">a</span><span class="nv">t</span><span class="nv">o</span><span class="nv">r</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="s2">"</span><span class> </span><span class>&lt;</span><span class> </span><span class>c</span><span class>o</span><span class>d</span><span class>e</span><span class>g</span><span class>e</span><span class>n</span><span class>e</span><span class>r</span><span class>a</span><span class>t</span><span class>o</span><span class>r</span><span class>.</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class="k">)</span><span class>
</span><span class>
</span><span class>c</span><span class>a</span><span class>t</span><span class> </span><span class="s">&lt;</span><span class="s">&lt;</span><span class="s">E</span><span class="s">O</span><span class="s">F</span><span class="s">
</span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">r</span><span class="cp">l</span><span class="cp">m</span><span class="cp">e</span><span class="cp">t</span><span class="cp">a</span><span class="cp"> </span><span class="cp">t</span><span class="cp">e</span><span class="cp">m</span><span class="cp">p</span><span class="cp">l</span><span class="cp">a</span><span class="cp">t</span><span class="cp">e</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class="s">E</span><span class="s">O</span><span class="s">F</span><span class>
</span></pre></div>

</div>

<h2><a name="75ad82923a2142789d01ca5be1d11942"></a>Verifying metacompiler</h2>

<p>How can it be verified that RLMeta is a metacompiler?</p>

<p>The <code>is_metacompiler.sh</code> script checks if a given file is a metacompiler. It does so by comparing the file to the file generated by the <code>compile.sh</code> script. If they are equal, the file is a metacompiler because it reproduced itself exactly. Otherwise the two files differ.</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>is_metacompiler.sh</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="ch">#</span><span class="ch">!</span><span class="ch">/</span><span class="ch">b</span><span class="ch">i</span><span class="ch">n</span><span class="ch">/</span><span class="ch">b</span><span class="ch">a</span><span class="ch">s</span><span class="ch">h</span><span class="ch">
</span><span class>
</span><span class="k">i</span><span class="k">f</span><span class> </span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">1</span><span class="s2">"</span><span class> </span><span class>&lt;</span><span class="o">(</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">1</span><span class="s2">"</span><span class="o">)</span><span class="p">;</span><span class> </span><span class="k">t</span><span class="k">h</span><span class="k">e</span><span class="k">n</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">e</span><span class="nb">c</span><span class="nb">h</span><span class="nb">o</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">1</span><span class="s2"> </span><span class="s2">i</span><span class="s2">s</span><span class="s2"> </span><span class="s2">a</span><span class="s2"> </span><span class="s2">m</span><span class="s2">e</span><span class="s2">t</span><span class="s2">a</span><span class="s2">c</span><span class="s2">o</span><span class="s2">m</span><span class="s2">p</span><span class="s2">i</span><span class="s2">l</span><span class="s2">e</span><span class="s2">r</span><span class="s2">!</span><span class="s2">"</span><span class>
</span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">e</span><span class="nb">c</span><span class="nb">h</span><span class="nb">o</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">1</span><span class="s2"> </span><span class="s2">i</span><span class="s2">s</span><span class="s2"> </span><span class="s2">n</span><span class="s2">o</span><span class="s2">t</span><span class="s2"> </span><span class="s2">a</span><span class="s2"> </span><span class="s2">m</span><span class="s2">e</span><span class="s2">t</span><span class="s2">a</span><span class="s2">c</span><span class="s2">o</span><span class="s2">m</span><span class="s2">p</span><span class="s2">i</span><span class="s2">l</span><span class="s2">e</span><span class="s2">r</span><span class="s2">.</span><span class="s2"> </span><span class="s2">S</span><span class="s2">e</span><span class="s2">e</span><span class="s2"> </span><span class="s2">d</span><span class="s2">i</span><span class="s2">f</span><span class="s2">f</span><span class="s2"> </span><span class="s2">a</span><span class="s2">b</span><span class="s2">o</span><span class="s2">v</span><span class="s2">e</span><span class="s2">.</span><span class="s2">"</span><span class>
</span><span class="k">f</span><span class="k">i</span><span class>
</span></pre></div>

</div>

<p>RLMeta is a metacompiler because its source code is written in a metalanguage and it is able to reproduce itself:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>i</span><span class>s</span><span class>_</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>r</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>i</span><span class>s</span><span class> </span><span class>a</span><span class> </span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>r</span><span class>!</span><span class>
</span></pre></div>

</div>

<p>The following sections show examples of how to make modifications to RLMeta that ensure that the modified version is still a metacompiler.</p>

<h2><a name="5f6a1c91143146dbb3b865ac42562135"></a>Modifying format of generated code</h2>

<p>The code generator in RLMeta generates lambda expressions with newlines and indentation:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="o">.</span><span class="o">.</span><span class="o">.</span><span class>
</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<p>This example shows how to modify it to generate equivalent lambda expressions without the additional punctuation like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="o">.</span><span class="o">.</span><span class="o">.</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<p>First, the following line in the code generator is changed from</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nb">|</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>F</span><span class>n</span><span class>B</span><span class>o</span><span class>d</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">l</span><span class="s">a</span><span class="s">m</span><span class="s">b</span><span class="s">d</span><span class="s">a</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class> </span><span class>x</span><span class> </span><span class>&lt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">)</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>to</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nb">|</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>F</span><span class>n</span><span class>B</span><span class>o</span><span class>d</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">l</span><span class="s">a</span><span class="s">m</span><span class="s">b</span><span class="s">d</span><span class="s">a</span><span class="s">:</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>The modified source code describes a metacompiler whose code generator generates lambda expressions without the additional punctuation. How is a new metacompiler created from this modified source code?</p>

<p>Compiling the modified source code gives a new executable:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span></pre></div>

</div>

<div class="rliterate-image"><img src="image10.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p>With this modification, <code>rlmeta.py</code> is no longer a metacompiler because it differs from <code>rlmeta1.py</code>:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>i</span><span class>s</span><span class>_</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>r</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>1</span><span class>6</span><span class>8</span><span class>5</span><span class>,</span><span class>1</span><span class>6</span><span class>8</span><span class>6</span><span class>c</span><span class>1</span><span class>6</span><span class>8</span><span class>5</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>\</span><span class>n</span><span class>'</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>I</span><span class>n</span><span class>d</span><span class>e</span><span class>n</span><span class>t</span><span class>B</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>e</span><span class>r</span><span class>(</span><span class>)</span><span class>,</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>'</span><span class>,</span><span class>
</span><span class>1</span><span class>6</span><span class>8</span><span class>8</span><span class>,</span><span class>1</span><span class>6</span><span class>8</span><span class>9</span><span class>c</span><span class>1</span><span class>6</span><span class>8</span><span class>7</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>D</span><span class>e</span><span class>d</span><span class>e</span><span class>n</span><span class>t</span><span class>B</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>e</span><span class>r</span><span class>(</span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>\</span><span class>n</span><span class>)</span><span class>'</span><span class>,</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>)</span><span class>'</span><span class>,</span><span class>
</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>i</span><span class>s</span><span class> </span><span class>n</span><span class>o</span><span class>t</span><span class> </span><span class>a</span><span class> </span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>r</span><span class>.</span><span class> </span><span class>S</span><span class>e</span><span class>e</span><span class> </span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>a</span><span class>b</span><span class>o</span><span class>v</span><span class>e</span><span class>.</span><span class>
</span></pre></div>

</div>

<p>The difference is that the code for generating lambda expressions is different. <code>rlmeta1.py</code> should still be a compiler that recognizes the same source language so it can be used to compile the modified source code again, giving yet another executable:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span></pre></div>

</div>

<div class="rliterate-image"><img src="image11.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p><code>rlmeta1.py</code> is not a metacompiler either because it differs from <code>rlmeta2.py</code>:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>i</span><span class>s</span><span class>_</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>r</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>2</span><span class>8</span><span class>7</span><span class>,</span><span class>3</span><span class>2</span><span class>5</span><span class>c</span><span class>2</span><span class>8</span><span class>7</span><span class>,</span><span class>2</span><span class>9</span><span class>9</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>r</span><span class>e</span><span class>t</span><span class>u</span><span class>r</span><span class>n</span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>o</span><span class>r</span><span class>(</span><span class>[</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>a</span><span class>n</span><span class>d</span><span class>(</span><span class>[</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>b</span><span class>i</span><span class>n</span><span class>d</span><span class>(</span><span class>'</span><span class>x</span><span class>'</span><span class>,</span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>(</span><span class>'</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>'</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>(</span><span class>)</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>(</span><span class>'</span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class>'</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>q</span><span class>(</span><span class>'</span><span class>{</span><span class>'</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>b</span><span class>i</span><span class>n</span><span class>d</span><span class>(</span><span class>'</span><span class>y</span><span class>s</span><span class>'</span><span class>,</span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>s</span><span class>t</span><span class>a</span><span class>r</span><span class>(</span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>(</span><span class>'</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>'</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>(</span><span class>)</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>(</span><span class>'</span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class>'</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>q</span><span class>(</span><span class>'</span><span class>}</span><span class>'</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>S</span><span class>e</span><span class>m</span><span class>a</span><span class>n</span><span class>t</span><span class>i</span><span class>c</span><span class>A</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>(</span><span class>[</span><span class>'</span><span class>G</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>'</span><span class>]</span><span class>+</span><span class>[</span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>x</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>]</span><span class>+</span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>y</span><span class>s</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>+</span><span class>[</span><span class>]</span><span class>)</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>]</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>(</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>(</span><span class>_</span><span class>V</span><span class>a</span><span class>r</span><span class>s</span><span class>(</span><span class>)</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>]</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>(</span><span class>)</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>r</span><span class>e</span><span class>t</span><span class>u</span><span class>r</span><span class>n</span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>o</span><span class>r</span><span class>(</span><span class>[</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>:</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>a</span><span class>n</span><span class>d</span><span class>(</span><span class>[</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>b</span><span class>i</span><span class>n</span><span class>d</span><span class>(</span><span class>'</span><span class>x</span><span class>'</span><span class>,</span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>(</span><span class>'</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>'</span><span class>)</span><span class>)</span><span class>(</span><span class>)</span><span class>)</span><span class>)</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>(</span><span class>'</span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class>'</span><span class>)</span><span class>)</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>q</span><span class>(</span><span class>'</span><span class>{</span><span class>'</span><span class>)</span><span class>)</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>b</span><span class>i</span><span class>n</span><span class>d</span><span class>(</span><span class>'</span><span class>y</span><span class>s</span><span class>'</span><span class>,</span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>s</span><span class>t</span><span class>a</span><span class>r</span><span class>(</span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>(</span><span class>'</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>'</span><span class>)</span><span class>)</span><span class>)</span><span class>)</span><span class>(</span><span class>)</span><span class>)</span><span class>)</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>(</span><span class>'</span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class>'</span><span class>)</span><span class>)</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>q</span><span class>(</span><span class>'</span><span class>}</span><span class>'</span><span class>)</span><span class>)</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>_</span><span class>S</span><span class>e</span><span class>m</span><span class>a</span><span class>n</span><span class>t</span><span class>i</span><span class>c</span><span class>A</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>(</span><span class>[</span><span class>'</span><span class>G</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>'</span><span class>]</span><span class>+</span><span class>[</span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>x</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>]</span><span class>+</span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>y</span><span class>s</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>+</span><span class>[</span><span class>]</span><span class>)</span><span class>)</span><span class>)</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>]</span><span class>)</span><span class>)</span><span class>(</span><span class>)</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>(</span><span class>_</span><span class>V</span><span class>a</span><span class>r</span><span class>s</span><span class>(</span><span class>)</span><span class>)</span><span class>)</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>]</span><span class>)</span><span class>)</span><span class>(</span><span class>)</span><span class>
</span><span class>.</span><span class>.</span><span class>.</span><span class>
</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>i</span><span class>s</span><span class> </span><span class>n</span><span class>o</span><span class>t</span><span class> </span><span class>a</span><span class> </span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>r</span><span class>.</span><span class> </span><span class>S</span><span class>e</span><span class>e</span><span class> </span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>a</span><span class>b</span><span class>o</span><span class>v</span><span class>e</span><span class>.</span><span class>
</span></pre></div>

</div>

<p>This time the difference is only in formatting. The two programs should be semantically equivalent. The original modification set out to remove additional punctuation in lambda expressions and this can now be seen in the generated code. <code>rlmeta2.py</code> can be used to compile the modified source code again, giving yet another executable:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span></pre></div>

</div>

<div class="rliterate-image"><img src="image12.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p><code>rlmeta2.py</code> is now a metacompiler because it is the same as <code>rlmeta3.py</code>:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>i</span><span class>s</span><span class>_</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>r</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>i</span><span class>s</span><span class> </span><span class>a</span><span class> </span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>r</span><span class>!</span><span class>
</span></pre></div>

</div>

<p><code>rlmeta2.py</code> together with the modified source becomes the next version of the RLMeta metacompiler. All other intermediate compilers can be discarded.</p>

<div class="rliterate-image"><img src="image13.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<h2><a name="d54bbeda3d9846bca027f2c2995775a5"></a>Meta compile script</h2>

<p>The steps to create the next version of RLMeta can be scripted like this:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>meta_compile.sh</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="ch">#</span><span class="ch">!</span><span class="ch">/</span><span class="ch">b</span><span class="ch">i</span><span class="ch">n</span><span class="ch">/</span><span class="ch">b</span><span class="ch">a</span><span class="ch">s</span><span class="ch">h</span><span class="ch">
</span><span class>
</span><span class="nb">s</span><span class="nb">e</span><span class="nb">t</span><span class> </span><span class>-</span><span class>e</span><span class>
</span><span class>
</span><span class="nb">c</span><span class="nb">d</span><span class> </span><span class="s2">"</span><span class="k">$</span><span class="k">(</span><span class>d</span><span class>i</span><span class>r</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">0</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span><span class>
</span><span class>
</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&lt;</span><span class="o">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>-</span><span class>-</span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class="o">)</span><span class>
</span><span class>
</span><span class>m</span><span class>v</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>m</span><span class>v</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>m</span><span class>v</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class="nb">e</span><span class="nb">c</span><span class="nb">h</span><span class="nb">o</span><span class> </span><span class>O</span><span class>K</span><span class>
</span></pre></div>

</div>

<p>It starts with a <code>set -e</code> directive that makes the script stop immediately when a command fails. Then it changes directory to the same directory as the script itself is in. That directory is assumed to also contain the <code>compile.sh</code> script. It then uses the <code>compile.sh</code> script to create the intermediate compilers. If all compile commands succeed, the two last compilers are compared. If they differ, it was not possible to create a metacompiler. The <code>diff</code> command then fails and the script fails. The intermediate compilers are left on disk for inspection. If the two last compilers are the same, a sanity check that the support libraries are the same is done. Then intermediate compilers are removed. At the end, an 'OK' is printed, signifying that a new version of RLMeta was successfully created.</p>

<p>This script will be used in the following examples.</p>

<h2><a name="6bfdc073cd4041238b169caa671c9652"></a>Breaking modification</h2>

<p>This example shows what happens if the source code is modified so that it no longer correctly describes a metacompiler.</p>

<p>A dummy modification that should break things is changing the following line that generates code for rules from</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nb">|</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">R</span><span class="s">u</span><span class="s">l</span><span class="s">e</span><span class="s">"</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>y</span><span class>]</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">d</span><span class="s">e</span><span class="s">f</span><span class="s"> </span><span class="s">_</span><span class="s">r</span><span class="s">u</span><span class="s">l</span><span class="s">e</span><span class="s">_</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">s</span><span class="s">e</span><span class="s">l</span><span class="s">f</span><span class="s">)</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class> </span><span class="s">"</span><span class="s">r</span><span class="s">e</span><span class="s">t</span><span class="s">u</span><span class="s">r</span><span class="s">n</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>y</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&lt;</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>to</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nb">|</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">R</span><span class="s">u</span><span class="s">l</span><span class="s">e</span><span class="s">"</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>y</span><span class>]</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">d</span><span class="s">e</span><span class="s">f</span><span class="s"> </span><span class="s">_</span><span class="s">r</span><span class="s">u</span><span class="s">l</span><span class="s">e</span><span class="s">_</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">s</span><span class="s">e</span><span class="s">l</span><span class="s">f</span><span class="s">)</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class> </span><span class="s">"</span><span class="s">p</span><span class="s">a</span><span class="s">s</span><span class="s">s</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&lt;</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>Instead of generating a function body, the <code>y</code> ast node is ignored and a <code>pass</code> statement is generated instead.</p>

<p>Running the meta compile script on the modified source code indeed gives an error:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>_</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class>
</span><span class>T</span><span class>r</span><span class>a</span><span class>c</span><span class>e</span><span class>b</span><span class>a</span><span class>c</span><span class>k</span><span class> </span><span class>(</span><span class>m</span><span class>o</span><span class>s</span><span class>t</span><span class> </span><span class>r</span><span class>e</span><span class>c</span><span class>e</span><span class>n</span><span class>t</span><span class> </span><span class>c</span><span class>a</span><span class>l</span><span class>l</span><span class> </span><span class>l</span><span class>a</span><span class>s</span><span class>t</span><span class>)</span><span class>:</span><span class>
</span><span class> </span><span class> </span><span class>F</span><span class>i</span><span class>l</span><span class>e</span><span class> </span><span class>"</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>"</span><span class>,</span><span class> </span><span class>l</span><span class>i</span><span class>n</span><span class>e</span><span class> </span><span class>3</span><span class>7</span><span class>5</span><span class>,</span><span class> </span><span class>i</span><span class>n</span><span class> </span><span class>&lt;</span><span class>m</span><span class>o</span><span class>d</span><span class>u</span><span class>l</span><span class>e</span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>y</span><span class>s</span><span class>.</span><span class>s</span><span class>t</span><span class>d</span><span class>o</span><span class>u</span><span class>t</span><span class>.</span><span class>w</span><span class>r</span><span class>i</span><span class>t</span><span class>e</span><span class>(</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>_</span><span class>g</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>(</span><span class>s</span><span class>y</span><span class>s</span><span class>.</span><span class>s</span><span class>t</span><span class>d</span><span class>i</span><span class>n</span><span class>.</span><span class>r</span><span class>e</span><span class>a</span><span class>d</span><span class>(</span><span class>)</span><span class>)</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>F</span><span class>i</span><span class>l</span><span class>e</span><span class> </span><span class>"</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>"</span><span class>,</span><span class> </span><span class>l</span><span class>i</span><span class>n</span><span class>e</span><span class> </span><span class>3</span><span class>6</span><span class>8</span><span class>,</span><span class> </span><span class>i</span><span class>n</span><span class> </span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>_</span><span class>g</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>r</span><span class>e</span><span class>t</span><span class>u</span><span class>r</span><span class>n</span><span class> </span><span class>c</span><span class>o</span><span class>d</span><span class>e</span><span class>_</span><span class>g</span><span class>e</span><span class>n</span><span class>e</span><span class>r</span><span class>a</span><span class>t</span><span class>o</span><span class>r</span><span class>.</span><span class>r</span><span class>u</span><span class>n</span><span class>(</span><span class>"</span><span class>a</span><span class>s</span><span class>t</span><span class>"</span><span class>,</span><span class> </span><span class>p</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>r</span><span class>.</span><span class>r</span><span class>u</span><span class>n</span><span class>(</span><span class>"</span><span class>g</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>"</span><span class>,</span><span class> </span><span class>g</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>)</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>F</span><span class>i</span><span class>l</span><span class>e</span><span class> </span><span class>"</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>"</span><span class>,</span><span class> </span><span class>l</span><span class>i</span><span class>n</span><span class>e</span><span class> </span><span class>1</span><span class>0</span><span class>2</span><span class>,</span><span class> </span><span class>i</span><span class>n</span><span class> </span><span class>r</span><span class>u</span><span class>n</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>r</span><span class>e</span><span class>s</span><span class>u</span><span class>l</span><span class>t</span><span class> </span><span class>=</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>(</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>_</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>
</span><span class>A</span><span class>t</span><span class>t</span><span class>r</span><span class>i</span><span class>b</span><span class>u</span><span class>t</span><span class>e</span><span class>E</span><span class>r</span><span class>r</span><span class>o</span><span class>r</span><span class>:</span><span class> </span><span class>'</span><span class>N</span><span class>o</span><span class>n</span><span class>e</span><span class>T</span><span class>y</span><span class>p</span><span class>e</span><span class>'</span><span class> </span><span class>o</span><span class>b</span><span class>j</span><span class>e</span><span class>c</span><span class>t</span><span class> </span><span class>h</span><span class>a</span><span class>s</span><span class> </span><span class>n</span><span class>o</span><span class> </span><span class>a</span><span class>t</span><span class>t</span><span class>r</span><span class>i</span><span class>b</span><span class>u</span><span class>t</span><span class>e</span><span class> </span><span class>'</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>'</span><span class>
</span></pre></div>

</div>

<p>This means that a new metacompiler could not be created. Why?</p>

<p>The error happens in <code>rlmeta2.py</code> when the following compilation step is run:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span></pre></div>

</div>

<p>It means that both <code>rlmeta1.py</code> and <code>rlmeta2.py</code> were successfully created, but it failed to create <code>rlmeta3.py</code>. The difference between <code>rlmeta.py</code> and <code>rlmeta1.py</code> is that the code for generating code for rules is different:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>1</span><span class>4</span><span class>5</span><span class>3</span><span class>,</span><span class>1</span><span class>4</span><span class>5</span><span class>5</span><span class>c</span><span class>1</span><span class>4</span><span class>5</span><span class>3</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>r</span><span class>e</span><span class>t</span><span class>u</span><span class>r</span><span class>n</span><span class> </span><span class>'</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>y</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>(</span><span class>)</span><span class>\</span><span class>n</span><span class>'</span><span class>,</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>p</span><span class>a</span><span class>s</span><span class>s</span><span class>\</span><span class>n</span><span class>'</span><span class>,</span><span class>
</span></pre></div>

</div>

<p><code>rlmeta1.py</code> is still a compiler that recognizes the same source language so it was successfully used to create <code>rlmeta2.py</code>. The difference between <code>rlmeta1.py</code> and <code>rlmeta2.py</code> is that the code for rules just have a <code>pass</code> statement instead of code for doing matching and returning results:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>
</span><span class>2</span><span class>8</span><span class>7</span><span class>,</span><span class>3</span><span class>2</span><span class>5</span><span class>c</span><span class>2</span><span class>8</span><span class>7</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>r</span><span class>e</span><span class>t</span><span class>u</span><span class>r</span><span class>n</span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>o</span><span class>r</span><span class>(</span><span class>[</span><span class>
</span><span class>.</span><span class>.</span><span class>.</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>]</span><span class>)</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>(</span><span class>)</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>p</span><span class>a</span><span class>s</span><span class>s</span><span class>
</span><span class>.</span><span class>.</span><span class>.</span><span class>
</span></pre></div>

</div>

<p>So <code>rlmeta2.py</code> will not work because all rules return <code>None</code>. When <code>_match_rule</code> is called it will get <code>None</code> back but expect a semantic action. When <code>eval</code> is run it will fail because the result is not a semantic action, but instead <code>None</code>.</p>

<p>Because the modified source code does not correctly describe how code for rules should be generated, it does not describe a metacompiler, and it can never be used to create a new metacompiler.</p>

<h2><a name="0130b76cb3d24f458bb47debb6fc2780"></a>Modifying support library</h2>

<p>This example shows how to make a modification that requires modifying both the support library and the code generator. It shows how the arguments to the <code>bind</code> function can be swapped.</p>

<p>In the support library, the following line that defines the <code>bind</code> function is changed from</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">b</span><span class="nf">i</span><span class="nf">n</span><span class="nf">d</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class="p">:</span><span class>
</span></pre></div>

</div>

<p>to</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">b</span><span class="nf">i</span><span class="nf">n</span><span class="nf">d</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">)</span><span class="p">:</span><span class>
</span></pre></div>

</div>

<p>In the code generator, the following line that generates calls to <code>bind</code> is changed from</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nb">|</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">B</span><span class="s">i</span><span class="s">n</span><span class="s">d</span><span class="s">"</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>y</span><span class>]</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">_</span><span class="s">v</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">.</span><span class="s">b</span><span class="s">i</span><span class="s">n</span><span class="s">d</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>r</span><span class>e</span><span class>p</span><span class>r</span><span class>(</span><span class>x</span><span class>)</span><span class> </span><span class="s">"</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>y</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">)</span><span class="s">)</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>to</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nb">|</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">B</span><span class="s">i</span><span class="s">n</span><span class="s">d</span><span class="s">"</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>y</span><span class>]</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">_</span><span class="s">v</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">.</span><span class="s">b</span><span class="s">i</span><span class="s">n</span><span class="s">d</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>y</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">)</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>r</span><span class>e</span><span class>p</span><span class>r</span><span class>(</span><span class>x</span><span class>)</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>Running the meta compile script on the modified source code gives a new metacompiler:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>_</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class>
</span><span class>O</span><span class>K</span><span class>
</span></pre></div>

</div>

<p>The difference between the two metacompilers is that the two versions of the support library are modified, all <code>bind</code> calls have swapped arguments, and code that generates calls to <code>bind</code> have swapped arguments:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class>.</span><span class>o</span><span class>r</span><span class>i</span><span class>g</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>3</span><span class>c</span><span class>3</span><span class>
</span><span class>&lt;</span><span class> </span><span class>S</span><span class>U</span><span class>P</span><span class>P</span><span class>O</span><span class>R</span><span class>T</span><span class> </span><span class>=</span><span class> </span><span class>.</span><span class>.</span><span class>.</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class>S</span><span class>U</span><span class>P</span><span class>P</span><span class>O</span><span class>R</span><span class>T</span><span class> </span><span class>=</span><span class> </span><span class>.</span><span class>.</span><span class>.</span><span class>
</span><span class>1</span><span class>1</span><span class>0</span><span class>c</span><span class>1</span><span class>1</span><span class>0</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>d</span><span class>e</span><span class>f</span><span class> </span><span class>b</span><span class>i</span><span class>n</span><span class>d</span><span class>(</span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>,</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>,</span><span class> </span><span class>v</span><span class>a</span><span class>l</span><span class>u</span><span class>e</span><span class>)</span><span class>:</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>d</span><span class>e</span><span class>f</span><span class> </span><span class>b</span><span class>i</span><span class>n</span><span class>d</span><span class>(</span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>,</span><span class> </span><span class>v</span><span class>a</span><span class>l</span><span class>u</span><span class>e</span><span class>,</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>)</span><span class>:</span><span class>
</span><span class>2</span><span class>9</span><span class>4</span><span class>c</span><span class>2</span><span class>9</span><span class>4</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>b</span><span class>i</span><span class>n</span><span class>d</span><span class>(</span><span class>'</span><span class>x</span><span class>'</span><span class>,</span><span class> </span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>b</span><span class>i</span><span class>n</span><span class>d</span><span class>(</span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class>
</span><span class>2</span><span class>9</span><span class>6</span><span class>c</span><span class>2</span><span class>9</span><span class>6</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>(</span><span class>)</span><span class>)</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>)</span><span class>(</span><span class>)</span><span class>,</span><span class> </span><span class>'</span><span class>x</span><span class>'</span><span class>)</span><span class>
</span><span class>1</span><span class>8</span><span class>1</span><span class>4</span><span class>a</span><span class>1</span><span class>8</span><span class>1</span><span class>5</span><span class>,</span><span class>1</span><span class>8</span><span class>1</span><span class>6</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>y</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>(</span><span class>)</span><span class>,</span><span class> </span><span class>'</span><span class>,</span><span class>
</span><span class>1</span><span class>8</span><span class>1</span><span class>8</span><span class>,</span><span class>1</span><span class>8</span><span class>2</span><span class>0</span><span class>c</span><span class>1</span><span class>8</span><span class>2</span><span class>0</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>,</span><span class> </span><span class>'</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>y</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>(</span><span class>)</span><span class>)</span><span class>'</span><span class>,</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>)</span><span class>'</span><span class>,</span><span class>
</span><span class>.</span><span class>.</span><span class>.</span><span class>
</span></pre></div>

</div>

<p>This modification creates a new version of RLMeta that works exactly the same as the previous version, but internally the <code>bind</code> function has a different signature.</p>

<p>These compilation steps were not possible in the first version of RLMeta because the <code>compile.sh</code> script generated the support library incorrectly. All RLMeta compilers have two versions of the support library: the one that it generates (stored in the <code>SUPPORT</code> variable), and the one it uses itself. If the compiler is a metacompiler, the two versions are the same, but in intermediate compilers they might differ.</p>

<p>The first version of RLMeta generated the support library like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nv">s</span><span class="nv">u</span><span class="nv">p</span><span class="nv">p</span><span class="nv">o</span><span class="nv">r</span><span class="nv">t</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>c</span><span class>a</span><span class>t</span><span class> </span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class>.</span><span class>p</span><span class>y</span><span class="k">)</span><span class>
</span></pre></div>

</div>

<p>It meant that the intermediate compilers always had the latest support library, and the two versions of the support library were always the same.</p>

<p>Running the meta compile script on the modified source code with the old version of <code>compile.sh</code> gives an error:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>_</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class>
</span><span class>T</span><span class>r</span><span class>a</span><span class>c</span><span class>e</span><span class>b</span><span class>a</span><span class>c</span><span class>k</span><span class> </span><span class>(</span><span class>m</span><span class>o</span><span class>s</span><span class>t</span><span class> </span><span class>r</span><span class>e</span><span class>c</span><span class>e</span><span class>n</span><span class>t</span><span class> </span><span class>c</span><span class>a</span><span class>l</span><span class>l</span><span class> </span><span class>l</span><span class>a</span><span class>s</span><span class>t</span><span class>)</span><span class>:</span><span class>
</span><span class> </span><span class> </span><span class>F</span><span class>i</span><span class>l</span><span class>e</span><span class> </span><span class>"</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>"</span><span class>,</span><span class> </span><span class>l</span><span class>i</span><span class>n</span><span class>e</span><span class> </span><span class>2</span><span class>2</span><span class>1</span><span class>7</span><span class>,</span><span class> </span><span class>i</span><span class>n</span><span class> </span><span class>&lt;</span><span class>m</span><span class>o</span><span class>d</span><span class>u</span><span class>l</span><span class>e</span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>y</span><span class>s</span><span class>.</span><span class>s</span><span class>t</span><span class>d</span><span class>o</span><span class>u</span><span class>t</span><span class>.</span><span class>w</span><span class>r</span><span class>i</span><span class>t</span><span class>e</span><span class>(</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>_</span><span class>g</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>(</span><span class>s</span><span class>y</span><span class>s</span><span class>.</span><span class>s</span><span class>t</span><span class>d</span><span class>i</span><span class>n</span><span class>.</span><span class>r</span><span class>e</span><span class>a</span><span class>d</span><span class>(</span><span class>)</span><span class>)</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>F</span><span class>i</span><span class>l</span><span class>e</span><span class> </span><span class>"</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>"</span><span class>,</span><span class> </span><span class>l</span><span class>i</span><span class>n</span><span class>e</span><span class> </span><span class>2</span><span class>2</span><span class>1</span><span class>0</span><span class>,</span><span class> </span><span class>i</span><span class>n</span><span class> </span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>_</span><span class>g</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>r</span><span class>e</span><span class>t</span><span class>u</span><span class>r</span><span class>n</span><span class> </span><span class>c</span><span class>o</span><span class>d</span><span class>e</span><span class>_</span><span class>g</span><span class>e</span><span class>n</span><span class>e</span><span class>r</span><span class>a</span><span class>t</span><span class>o</span><span class>r</span><span class>.</span><span class>r</span><span class>u</span><span class>n</span><span class>(</span><span class>"</span><span class>a</span><span class>s</span><span class>t</span><span class>"</span><span class>,</span><span class> </span><span class>p</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>r</span><span class>.</span><span class>r</span><span class>u</span><span class>n</span><span class>(</span><span class>"</span><span class>g</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>"</span><span class>,</span><span class> </span><span class>g</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>)</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>F</span><span class>i</span><span class>l</span><span class>e</span><span class> </span><span class>"</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>"</span><span class>,</span><span class> </span><span class>l</span><span class>i</span><span class>n</span><span class>e</span><span class> </span><span class>1</span><span class>0</span><span class>2</span><span class>,</span><span class> </span><span class>i</span><span class>n</span><span class> </span><span class>r</span><span class>u</span><span class>n</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>r</span><span class>e</span><span class>s</span><span class>u</span><span class>l</span><span class>t</span><span class> </span><span class>=</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>_</span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>_</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>(</span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class>_</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>F</span><span class>i</span><span class>l</span><span class>e</span><span class> </span><span class>"</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>"</span><span class>,</span><span class> </span><span class>l</span><span class>i</span><span class>n</span><span class>e</span><span class> </span><span class>1</span><span class>2</span><span class>3</span><span class>,</span><span class> </span><span class>i</span><span class>n</span><span class> </span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>r</span><span class>e</span><span class>t</span><span class>u</span><span class>r</span><span class>n</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>.</span><span class>f</span><span class>n</span><span class>(</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>F</span><span class>i</span><span class>l</span><span class>e</span><span class> </span><span class>"</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>"</span><span class>,</span><span class> </span><span class>l</span><span class>i</span><span class>n</span><span class>e</span><span class> </span><span class>3</span><span class>1</span><span class>8</span><span class>,</span><span class> </span><span class>i</span><span class>n</span><span class> </span><span class>&lt;</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>S</span><span class>e</span><span class>m</span><span class>a</span><span class>n</span><span class>t</span><span class>i</span><span class>c</span><span class>A</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>(</span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>:</span><span class> </span><span class>(</span><span class>[</span><span class>'</span><span class>G</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class>'</span><span class>]</span><span class>+</span><span class>[</span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>x</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>]</span><span class>+</span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>y</span><span class>s</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>+</span><span class>[</span><span class>]</span><span class>)</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>F</span><span class>i</span><span class>l</span><span class>e</span><span class> </span><span class>"</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>"</span><span class>,</span><span class> </span><span class>l</span><span class>i</span><span class>n</span><span class>e</span><span class> </span><span class>1</span><span class>1</span><span class>5</span><span class>,</span><span class> </span><span class>i</span><span class>n</span><span class> </span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>r</span><span class>e</span><span class>t</span><span class>u</span><span class>r</span><span class>n</span><span class> </span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>[</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>]</span><span class>
</span><span class>K</span><span class>e</span><span class>y</span><span class>E</span><span class>r</span><span class>r</span><span class>o</span><span class>r</span><span class>:</span><span class> </span><span class>'</span><span class>x</span><span class>'</span><span class>
</span></pre></div>

</div>

<p>Now <code>rlmeta1.py</code> has swapped arguments in the support library, but the generated code (generated by <code>rlmeta.py</code>) still expects not swapped arguments. Notice the absence of swapped arguments in <code>bind</code> calls in the diff:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>3</span><span class>c</span><span class>3</span><span class>
</span><span class>&lt;</span><span class> </span><span class>S</span><span class>U</span><span class>P</span><span class>P</span><span class>O</span><span class>R</span><span class>T</span><span class> </span><span class>=</span><span class> </span><span class>.</span><span class>.</span><span class>.</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class>S</span><span class>U</span><span class>P</span><span class>P</span><span class>O</span><span class>R</span><span class>T</span><span class> </span><span class>=</span><span class> </span><span class>.</span><span class>.</span><span class>.</span><span class>
</span><span class>1</span><span class>1</span><span class>0</span><span class>c</span><span class>1</span><span class>1</span><span class>0</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>d</span><span class>e</span><span class>f</span><span class> </span><span class>b</span><span class>i</span><span class>n</span><span class>d</span><span class>(</span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>,</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>,</span><span class> </span><span class>v</span><span class>a</span><span class>l</span><span class>u</span><span class>e</span><span class>)</span><span class>:</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>d</span><span class>e</span><span class>f</span><span class> </span><span class>b</span><span class>i</span><span class>n</span><span class>d</span><span class>(</span><span class>s</span><span class>e</span><span class>l</span><span class>f</span><span class>,</span><span class> </span><span class>v</span><span class>a</span><span class>l</span><span class>u</span><span class>e</span><span class>,</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>)</span><span class>:</span><span class>
</span><span class>1</span><span class>8</span><span class>1</span><span class>4</span><span class>a</span><span class>1</span><span class>8</span><span class>1</span><span class>5</span><span class>,</span><span class>1</span><span class>8</span><span class>1</span><span class>6</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>y</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>(</span><span class>)</span><span class>,</span><span class> </span><span class>'</span><span class>,</span><span class>
</span><span class>1</span><span class>8</span><span class>1</span><span class>8</span><span class>,</span><span class>1</span><span class>8</span><span class>2</span><span class>0</span><span class>c</span><span class>1</span><span class>8</span><span class>2</span><span class>0</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>,</span><span class> </span><span class>'</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>_</span><span class>v</span><span class>a</span><span class>r</span><span class>s</span><span class>.</span><span class>l</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class>(</span><span class>'</span><span class>y</span><span class>'</span><span class>)</span><span class>.</span><span class>e</span><span class>v</span><span class>a</span><span class>l</span><span class>(</span><span class>)</span><span class>,</span><span class>
</span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>(</span><span class>)</span><span class>)</span><span class>'</span><span class>,</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>)</span><span class>'</span><span class>,</span><span class>
</span></pre></div>

</div>

<p>This in turn leads to <code>rlmeta1.py</code> not functioning because its <code>bind</code> calls have not stored the name as key, but the value. Hence the key error.</p>

<p>The version of RLMeta in this article fixes the generation of the <code>$support_py</code> variable like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nv">s</span><span class="nv">u</span><span class="nv">p</span><span class="nv">p</span><span class="nv">o</span><span class="nv">r</span><span class="nv">t</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="s2">"</span><span class> </span><span class>-</span><span class>-</span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class="k">)</span><span class>
</span></pre></div>

</div>

<p>This ensures that the code that the code generator generates is always in sync with the support library.</p>

<h2><a name="1a090bb868154140a167968d8b4b15dc"></a>Extending parser escape codes</h2>

<p>The escape codes possible in strings in RLMeta are '<code>\\</code>', '<code>\'</code>', '<code>\"</code>', and '<code>\n</code>':</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>e</span><span class>s</span><span class>c</span><span class>a</span><span class>p</span><span class>e</span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">\</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">\</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="s">'</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">"</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">n</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span></pre></div>

</div>

<p>This example shows how a new escape code, '<code>\t</code>', can be added.</p>

<p>A first attempt might be to extend the <code>escape</code> rule in the parser like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>e</span><span class>s</span><span class>c</span><span class>a</span><span class>p</span><span class>e</span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">\</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">\</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="s">'</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">"</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">n</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">t</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">t</span><span class="s">"</span><span class>
</span></pre></div>

</div>

<p>Running the meta compile script on the modified source code gives a new metacompiler:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>_</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class>
</span><span class>O</span><span class>K</span><span class>
</span></pre></div>

</div>

<p>The code generated for the tab case looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">_</span><span class="n">v</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">a</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">[</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">_</span><span class="n">c</span><span class="n">h</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="n">e</span><span class="n">q</span><span class="p">(</span><span class="s1">'</span><span class="s1">t</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">_</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="s1">'</span><span class="se">\</span><span class="se">\</span><span class="s1">t</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">(</span><span class="n">_</span><span class="n">V</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class="p">)</span><span class="p">,</span><span class>
</span></pre></div>

</div>

<p>It doesn't look quite right. The semantic action does not return a tab character but rather two characters: '<code>\</code>' and '<code>t</code>'. The reason for this is that the modified source code tries to use the new escape code before the parser understands it. Since the parser does not recognize the new escape code, it will treat it as two separate characters.</p>

<p>How can the semantic action be modified to return an single tab character? The escape code can not be used until it is implemented, so the only solution is to call a function that returns a tab character:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>e</span><span class>s</span><span class>c</span><span class>a</span><span class>p</span><span class>e</span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">\</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">\</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="s">'</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">"</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">n</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">t</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>t</span><span class>a</span><span class>b</span><span class>(</span><span class>)</span><span class>
</span></pre></div>

</div>

<p>The <code>tab</code> function is added to the Python template to give generated code access to it:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="n">t</span><span class="n">a</span><span class="n">b</span><span class> </span><span class="o">=</span><span class> </span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="s2">"</span><span class="se">\</span><span class="se">t</span><span class="s2">"</span><span class>
</span></pre></div>

</div>

<p>Running the meta compile script on the modified source code gives a new metacompiler:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>_</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class>
</span><span class>O</span><span class>K</span><span class>
</span></pre></div>

</div>

<p>The code generated for the tab case now looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">_</span><span class="n">v</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">a</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">[</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">_</span><span class="n">c</span><span class="n">h</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="n">e</span><span class="n">q</span><span class="p">(</span><span class="s1">'</span><span class="s1">t</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">_</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="n">t</span><span class="n">a</span><span class="n">b</span><span class="p">(</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">(</span><span class="n">_</span><span class="n">V</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class="p">)</span><span class="p">,</span><span class>
</span></pre></div>

</div>

<p>The semantic action now correctly generates a tab character by calling the <code>tab</code> function.</p>

<p>Now the new escape code can be used inside strings and the <code>tab</code> function can be discarded:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>e</span><span class>s</span><span class>c</span><span class>a</span><span class>p</span><span class>e</span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">\</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">\</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="s">'</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">"</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">n</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">t</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">t</span><span class="s">"</span><span class>
</span></pre></div>

</div>

<p>Running the meta compile script on the modified source code gives a new metacompiler:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>_</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class>
</span><span class>O</span><span class>K</span><span class>
</span></pre></div>

</div>

<p>The code generated for the tab case now looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">_</span><span class="n">v</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">a</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">[</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">_</span><span class="n">c</span><span class="n">h</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="n">e</span><span class="n">q</span><span class="p">(</span><span class="s1">'</span><span class="s1">t</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">_</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="s1">'</span><span class="se">\</span><span class="se">t</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">(</span><span class="n">_</span><span class="n">V</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class="p">)</span><span class="p">,</span><span class>
</span></pre></div>

</div>

<p>The semantic action now returns a single tab character without using the <code>tab</code> function.</p>

<p>Adding the tab escape code required two passes: one to recognize it and one to use it.</p>

<h2><a name="22e574102e394218b874f03bb879c92f"></a>Modifying parser</h2>

<p>The syntax for introducing a semantic action in RLMeta is <code>-&gt;</code>. This example shows how it can be changed to <code>=&gt;</code>. A first attempt might be to change the following line in the parser from</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">-</span><span class="sc">&gt;</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">e</span><span class="s">m</span><span class="s">a</span><span class="s">n</span><span class="s">t</span><span class="s">i</span><span class="s">c</span><span class="s">A</span><span class="s">c</span><span class="s">t</span><span class="s">i</span><span class="s">o</span><span class="s">n</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span></pre></div>

</div>

<p>to</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">=</span><span class="sc">&gt;</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">e</span><span class="s">m</span><span class="s">a</span><span class="s">n</span><span class="s">t</span><span class="s">i</span><span class="s">c</span><span class="s">A</span><span class="s">c</span><span class="s">t</span><span class="s">i</span><span class="s">o</span><span class="s">n</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span></pre></div>

</div>

<p>Running the meta compile script on the modified source code gives an error:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>_</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class>
</span><span class>.</span><span class>.</span><span class>.</span><span class>
</span><span class>E</span><span class>R</span><span class>R</span><span class>O</span><span class>R</span><span class>:</span><span class> </span><span class>L</span><span class>0</span><span class>0</span><span class>3</span><span class>:</span><span class>C</span><span class>0</span><span class>4</span><span class>8</span><span class>:</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>e</span><span class>c</span><span class>t</span><span class>e</span><span class>d</span><span class> </span><span class>'</span><span class>}</span><span class>'</span><span class> </span><span class>b</span><span class>u</span><span class>t</span><span class> </span><span class>f</span><span class>o</span><span class>u</span><span class>n</span><span class>d</span><span class> </span><span class>'</span><span class>-</span><span class>'</span><span class>
</span></pre></div>

</div>

<p>What happened? The first compiler generated by the meta compile script (<code>rlmeta1.py</code>) has a parser that expects the syntax to be <code>=&gt;</code> for semantic actions. When the meta compile script tries to run that compiler on the modified source code it fails because the modified source code is still using the old <code>-&gt;</code> syntax. The source code can not be changed to the new syntax before the parser recognizes it, so the meta compile script does not work for this modification.</p>

<p>This can be solved in two ways. Either the parser can be changed to allow both syntaxes like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>(</span><span class="sc">'</span><span class="sc">-</span><span class="sc">'</span><span class="nb">|</span><span class="sc">'</span><span class="sc">=</span><span class="sc">'</span><span class>)</span><span class="sc">'</span><span class="sc">&gt;</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">e</span><span class="s">m</span><span class="s">a</span><span class="s">n</span><span class="s">t</span><span class="s">i</span><span class="s">c</span><span class="s">A</span><span class="s">c</span><span class="s">t</span><span class="s">i</span><span class="s">o</span><span class="s">n</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span></pre></div>

</div>

<p>Once a new metacompiler has been created, the source code can be changed to use <code>=&gt;</code>, and then the choice in the parser can be removed to allow only <code>=&gt;</code>.</p>

<p>Or the source code must be changed again before creating <code>rlmeta2.py</code> like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>$</span><span class> </span><span class>#</span><span class> </span><span class>m</span><span class>a</span><span class>k</span><span class>e</span><span class> </span><span class>p</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>r</span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>n</span><span class>g</span><span class>e</span><span class>
</span><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>$</span><span class> </span><span class>#</span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>n</span><span class>g</span><span class>e</span><span class> </span><span class>s</span><span class>y</span><span class>n</span><span class>t</span><span class>a</span><span class>x</span><span class> </span><span class>f</span><span class>r</span><span class>o</span><span class>m</span><span class> </span><span class>`</span><span class>-</span><span class>&gt;</span><span class>`</span><span class> </span><span class>t</span><span class>o</span><span class> </span><span class>`</span><span class>=</span><span class>&gt;</span><span class>`</span><span class>
</span><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>$</span><span class> </span><span class>.</span><span class>/</span><span class>i</span><span class>s</span><span class>_</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>r</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>i</span><span class>s</span><span class> </span><span class>a</span><span class> </span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>r</span><span class>!</span><span class>
</span></pre></div>

</div>

<div class="rliterate-image"><img src="image14.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<h2><a name="60cb5d0ff4ca4d94920bfe635ffd2142"></a>Code listings for RLMeta</h2>

<p>The only modifications from the original <a href="../rlmeta/index.html#388bb1e8ccbd4d55b89b391c08452c33">RLMeta</a> are the tweaked <code>compile.sh</code> script and the additional <code>meta_compile.sh</code> and <code>is_metacompiler.sh</code> scripts. They are shown fully here. For the rest of the source code, see the original article.</p>

<h3><a name="df676d8cca604142bd1049c5e86c68a2"></a>compile.sh</h3>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="ch">#</span><span class="ch">!</span><span class="ch">/</span><span class="ch">b</span><span class="ch">i</span><span class="ch">n</span><span class="ch">/</span><span class="ch">b</span><span class="ch">a</span><span class="ch">s</span><span class="ch">h</span><span class="ch">
</span><span class>
</span><span class="nb">s</span><span class="nb">e</span><span class="nb">t</span><span class> </span><span class>-</span><span class>e</span><span class>
</span><span class>
</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="o">=</span><span class="s2">"</span><span class="k">$</span><span class="k">(</span><span class="nb">p</span><span class="nb">w</span><span class="nb">d</span><span class="k">)</span><span class="s2">/</span><span class="nv">$</span><span class="nv">1</span><span class="s2">"</span><span class>
</span><span class>
</span><span class="nb">c</span><span class="nb">d</span><span class> </span><span class="s2">"</span><span class="k">$</span><span class="k">(</span><span class>d</span><span class>i</span><span class>r</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">0</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span><span class>
</span><span class>
</span><span class>t</span><span class>o</span><span class>_</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class>_</span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class="o">(</span><span class="o">)</span><span class> </span><span class="o">{</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class>-</span><span class>c</span><span class> </span><span class="s1">'</span><span class="s1">i</span><span class="s1">m</span><span class="s1">p</span><span class="s1">o</span><span class="s1">r</span><span class="s1">t</span><span class="s1"> </span><span class="s1">s</span><span class="s1">y</span><span class="s1">s</span><span class="s1">;</span><span class="s1"> </span><span class="s1">s</span><span class="s1">y</span><span class="s1">s</span><span class="s1">.</span><span class="s1">s</span><span class="s1">t</span><span class="s1">d</span><span class="s1">o</span><span class="s1">u</span><span class="s1">t</span><span class="s1">.</span><span class="s1">w</span><span class="s1">r</span><span class="s1">i</span><span class="s1">t</span><span class="s1">e</span><span class="s1">(</span><span class="s1">r</span><span class="s1">e</span><span class="s1">p</span><span class="s1">r</span><span class="s1">(</span><span class="s1">s</span><span class="s1">y</span><span class="s1">s</span><span class="s1">.</span><span class="s1">s</span><span class="s1">t</span><span class="s1">d</span><span class="s1">i</span><span class="s1">n</span><span class="s1">.</span><span class="s1">r</span><span class="s1">e</span><span class="s1">a</span><span class="s1">d</span><span class="s1">(</span><span class="s1">)</span><span class="s1">)</span><span class="s1">)</span><span class="s1">'</span><span class>
</span><span class="o">}</span><span class>
</span><span class>
</span><span class="nv">s</span><span class="nv">u</span><span class="nv">p</span><span class="nv">p</span><span class="nv">o</span><span class="nv">r</span><span class="nv">t</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="nv">_</span><span class="nv">s</span><span class="nv">t</span><span class="nv">r</span><span class="nv">i</span><span class="nv">n</span><span class="nv">g</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>t</span><span class>o</span><span class>_</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class>_</span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class> </span><span class>&lt;</span><span class> </span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class>.</span><span class>p</span><span class>y</span><span class="k">)</span><span class>
</span><span class="nv">s</span><span class="nv">u</span><span class="nv">p</span><span class="nv">p</span><span class="nv">o</span><span class="nv">r</span><span class="nv">t</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="s2">"</span><span class> </span><span class>-</span><span class>-</span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class="k">)</span><span class>
</span><span class="nv">p</span><span class="nv">a</span><span class="nv">r</span><span class="nv">s</span><span class="nv">e</span><span class="nv">r</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="s2">"</span><span class> </span><span class>&lt;</span><span class> </span><span class>p</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>r</span><span class>.</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class="k">)</span><span class>
</span><span class="nv">c</span><span class="nv">o</span><span class="nv">d</span><span class="nv">e</span><span class="nv">g</span><span class="nv">e</span><span class="nv">n</span><span class="nv">e</span><span class="nv">r</span><span class="nv">a</span><span class="nv">t</span><span class="nv">o</span><span class="nv">r</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="s2">"</span><span class> </span><span class>&lt;</span><span class> </span><span class>c</span><span class>o</span><span class>d</span><span class>e</span><span class>g</span><span class>e</span><span class>n</span><span class>e</span><span class>r</span><span class>a</span><span class>t</span><span class>o</span><span class>r</span><span class>.</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class="k">)</span><span class>
</span><span class>
</span><span class>c</span><span class>a</span><span class>t</span><span class> </span><span class="s">&lt;</span><span class="s">&lt;</span><span class="s">E</span><span class="s">O</span><span class="s">F</span><span class="s">
</span><span class="s">i</span><span class="s">m</span><span class="s">p</span><span class="s">o</span><span class="s">r</span><span class="s">t</span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">
</span><span class="s">
</span><span class="s">S</span><span class="s">U</span><span class="s">P</span><span class="s">P</span><span class="s">O</span><span class="s">R</span><span class="s">T</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">$</span><span class="s">s</span><span class="s">u</span><span class="s">p</span><span class="s">p</span><span class="s">o</span><span class="s">r</span><span class="s">t</span><span class="s">_</span><span class="s">p</span><span class="s">y</span><span class="s">_</span><span class="s">s</span><span class="s">t</span><span class="s">r</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s">
</span><span class="s">
</span><span class="s">$</span><span class="s">s</span><span class="s">u</span><span class="s">p</span><span class="s">p</span><span class="s">o</span><span class="s">r</span><span class="s">t</span><span class="s">_</span><span class="s">p</span><span class="s">y</span><span class="s">
</span><span class="s">
</span><span class="s">$</span><span class="s">p</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">e</span><span class="s">r</span><span class="s">_</span><span class="s">p</span><span class="s">y</span><span class="s">
</span><span class="s">
</span><span class="s">$</span><span class="s">c</span><span class="s">o</span><span class="s">d</span><span class="s">e</span><span class="s">g</span><span class="s">e</span><span class="s">n</span><span class="s">e</span><span class="s">r</span><span class="s">a</span><span class="s">t</span><span class="s">o</span><span class="s">r</span><span class="s">_</span><span class="s">p</span><span class="s">y</span><span class="s">
</span><span class="s">
</span><span class="s">j</span><span class="s">o</span><span class="s">i</span><span class="s">n</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">"</span><span class="s">"</span><span class="s">.</span><span class="s">j</span><span class="s">o</span><span class="s">i</span><span class="s">n</span><span class="s">
</span><span class="s">
</span><span class="s">d</span><span class="s">e</span><span class="s">f</span><span class="s"> </span><span class="s">c</span><span class="s">o</span><span class="s">m</span><span class="s">p</span><span class="s">i</span><span class="s">l</span><span class="s">e</span><span class="s">_</span><span class="s">g</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">(</span><span class="s">g</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">)</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">p</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">e</span><span class="s">r</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">P</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">)</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">c</span><span class="s">o</span><span class="s">d</span><span class="s">e</span><span class="s">_</span><span class="s">g</span><span class="s">e</span><span class="s">n</span><span class="s">e</span><span class="s">r</span><span class="s">a</span><span class="s">t</span><span class="s">o</span><span class="s">r</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">C</span><span class="s">o</span><span class="s">d</span><span class="s">e</span><span class="s">G</span><span class="s">e</span><span class="s">n</span><span class="s">e</span><span class="s">r</span><span class="s">a</span><span class="s">t</span><span class="s">o</span><span class="s">r</span><span class="s">(</span><span class="s">)</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">r</span><span class="s">e</span><span class="s">t</span><span class="s">u</span><span class="s">r</span><span class="s">n</span><span class="s"> </span><span class="s">c</span><span class="s">o</span><span class="s">d</span><span class="s">e</span><span class="s">_</span><span class="s">g</span><span class="s">e</span><span class="s">n</span><span class="s">e</span><span class="s">r</span><span class="s">a</span><span class="s">t</span><span class="s">o</span><span class="s">r</span><span class="s">.</span><span class="s">r</span><span class="s">u</span><span class="s">n</span><span class="s">(</span><span class="s">"</span><span class="s">a</span><span class="s">s</span><span class="s">t</span><span class="s">"</span><span class="s">,</span><span class="s"> </span><span class="s">p</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">e</span><span class="s">r</span><span class="s">.</span><span class="s">r</span><span class="s">u</span><span class="s">n</span><span class="s">(</span><span class="s">"</span><span class="s">g</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">"</span><span class="s">,</span><span class="s"> </span><span class="s">g</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">)</span><span class="s">)</span><span class="s">
</span><span class="s">
</span><span class="s">i</span><span class="s">f</span><span class="s"> </span><span class="s">_</span><span class="s">_</span><span class="s">n</span><span class="s">a</span><span class="s">m</span><span class="s">e</span><span class="s">_</span><span class="s">_</span><span class="s"> </span><span class="s">=</span><span class="s">=</span><span class="s"> </span><span class="s">"</span><span class="s">_</span><span class="s">_</span><span class="s">m</span><span class="s">a</span><span class="s">i</span><span class="s">n</span><span class="s">_</span><span class="s">_</span><span class="s">"</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">i</span><span class="s">f</span><span class="s"> </span><span class="s">"</span><span class="s">-</span><span class="s">-</span><span class="s">s</span><span class="s">u</span><span class="s">p</span><span class="s">p</span><span class="s">o</span><span class="s">r</span><span class="s">t</span><span class="s">"</span><span class="s"> </span><span class="s">i</span><span class="s">n</span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">a</span><span class="s">r</span><span class="s">g</span><span class="s">v</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">s</span><span class="s">t</span><span class="s">d</span><span class="s">o</span><span class="s">u</span><span class="s">t</span><span class="s">.</span><span class="s">w</span><span class="s">r</span><span class="s">i</span><span class="s">t</span><span class="s">e</span><span class="s">(</span><span class="s">S</span><span class="s">U</span><span class="s">P</span><span class="s">P</span><span class="s">O</span><span class="s">R</span><span class="s">T</span><span class="s">)</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">e</span><span class="s">l</span><span class="s">s</span><span class="s">e</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">t</span><span class="s">r</span><span class="s">y</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">s</span><span class="s">t</span><span class="s">d</span><span class="s">o</span><span class="s">u</span><span class="s">t</span><span class="s">.</span><span class="s">w</span><span class="s">r</span><span class="s">i</span><span class="s">t</span><span class="s">e</span><span class="s">(</span><span class="s">c</span><span class="s">o</span><span class="s">m</span><span class="s">p</span><span class="s">i</span><span class="s">l</span><span class="s">e</span><span class="s">_</span><span class="s">g</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">(</span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">s</span><span class="s">t</span><span class="s">d</span><span class="s">i</span><span class="s">n</span><span class="s">.</span><span class="s">r</span><span class="s">e</span><span class="s">a</span><span class="s">d</span><span class="s">(</span><span class="s">)</span><span class="s">)</span><span class="s">)</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">e</span><span class="s">x</span><span class="s">c</span><span class="s">e</span><span class="s">p</span><span class="s">t</span><span class="s"> </span><span class="s">_</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">E</span><span class="s">r</span><span class="s">r</span><span class="s">o</span><span class="s">r</span><span class="s"> </span><span class="s">a</span><span class="s">s</span><span class="s"> </span><span class="s">e</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">s</span><span class="s">t</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">r</span><span class="s">.</span><span class="s">w</span><span class="s">r</span><span class="s">i</span><span class="s">t</span><span class="s">e</span><span class="s">(</span><span class="s">e</span><span class="s">.</span><span class="s">d</span><span class="s">e</span><span class="s">s</span><span class="s">c</span><span class="s">r</span><span class="s">i</span><span class="s">b</span><span class="s">e</span><span class="s">(</span><span class="s">)</span><span class="s">)</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">e</span><span class="s">x</span><span class="s">i</span><span class="s">t</span><span class="s">(</span><span class="s">1</span><span class="s">)</span><span class="s">
</span><span class="s">E</span><span class="s">O</span><span class="s">F</span><span class>
</span></pre></div>

</div>

<h3><a name="38ee00b5ef7c40f79d24fa61f052368f"></a>meta_compile.sh</h3>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="ch">#</span><span class="ch">!</span><span class="ch">/</span><span class="ch">b</span><span class="ch">i</span><span class="ch">n</span><span class="ch">/</span><span class="ch">b</span><span class="ch">a</span><span class="ch">s</span><span class="ch">h</span><span class="ch">
</span><span class>
</span><span class="nb">s</span><span class="nb">e</span><span class="nb">t</span><span class> </span><span class>-</span><span class>e</span><span class>
</span><span class>
</span><span class="nb">c</span><span class="nb">d</span><span class> </span><span class="s2">"</span><span class="k">$</span><span class="k">(</span><span class>d</span><span class>i</span><span class>r</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">0</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span><span class>
</span><span class>
</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&lt;</span><span class="o">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>-</span><span class>-</span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class="o">)</span><span class>
</span><span class>
</span><span class>m</span><span class>v</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>m</span><span class>v</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>m</span><span class>v</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class="nb">e</span><span class="nb">c</span><span class="nb">h</span><span class="nb">o</span><span class> </span><span class>O</span><span class>K</span><span class>
</span></pre></div>

</div>

<h3><a name="596acbaab3614dc787158be918bd9d32"></a>is_metacompiler.sh</h3>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="ch">#</span><span class="ch">!</span><span class="ch">/</span><span class="ch">b</span><span class="ch">i</span><span class="ch">n</span><span class="ch">/</span><span class="ch">b</span><span class="ch">a</span><span class="ch">s</span><span class="ch">h</span><span class="ch">
</span><span class>
</span><span class="k">i</span><span class="k">f</span><span class> </span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">1</span><span class="s2">"</span><span class> </span><span class>&lt;</span><span class="o">(</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">1</span><span class="s2">"</span><span class="o">)</span><span class="p">;</span><span class> </span><span class="k">t</span><span class="k">h</span><span class="k">e</span><span class="k">n</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">e</span><span class="nb">c</span><span class="nb">h</span><span class="nb">o</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">1</span><span class="s2"> </span><span class="s2">i</span><span class="s2">s</span><span class="s2"> </span><span class="s2">a</span><span class="s2"> </span><span class="s2">m</span><span class="s2">e</span><span class="s2">t</span><span class="s2">a</span><span class="s2">c</span><span class="s2">o</span><span class="s2">m</span><span class="s2">p</span><span class="s2">i</span><span class="s2">l</span><span class="s2">e</span><span class="s2">r</span><span class="s2">!</span><span class="s2">"</span><span class>
</span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">e</span><span class="nb">c</span><span class="nb">h</span><span class="nb">o</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">1</span><span class="s2"> </span><span class="s2">i</span><span class="s2">s</span><span class="s2"> </span><span class="s2">n</span><span class="s2">o</span><span class="s2">t</span><span class="s2"> </span><span class="s2">a</span><span class="s2"> </span><span class="s2">m</span><span class="s2">e</span><span class="s2">t</span><span class="s2">a</span><span class="s2">c</span><span class="s2">o</span><span class="s2">m</span><span class="s2">p</span><span class="s2">i</span><span class="s2">l</span><span class="s2">e</span><span class="s2">r</span><span class="s2">.</span><span class="s2"> </span><span class="s2">S</span><span class="s2">e</span><span class="s2">e</span><span class="s2"> </span><span class="s2">d</span><span class="s2">i</span><span class="s2">f</span><span class="s2">f</span><span class="s2"> </span><span class="s2">a</span><span class="s2">b</span><span class="s2">o</span><span class="s2">v</span><span class="s2">e</span><span class="s2">.</span><span class="s2">"</span><span class>
</span><span class="k">f</span><span class="k">i</span><span class>
</span></pre></div>

</div>


      <div class="jumbotron">
<div class="row">
<div class="col-md-12">

<p>What is Rickard working on and thinking about <strong>right
now</strong>?</p>

<p>Every month I write a <em>newsletter</em> about just that. You will get
updates about my <em>current projects</em> and <em>thoughts about
programming</em>, and also get a chance to hit reply and <em>interact</em> with
me. Subscribe to it below.</p>

</div>
</div>
<div class="row">
<div class="col-md-12">
<iframe scrolling="no" style="width:100%!important;height:220px;border:1px #ccc solid !important" src="https://buttondown.email/rickardlindberg?as_embed=true"></iframe>
</div>
</div>
</div>

    </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../static/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>
