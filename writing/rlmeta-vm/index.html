<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>
      RLMeta: a VM based approach | Rickard Lindberg
    </title>

    <!-- Bootstrap -->
    <link href="../../static/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <meta name="keywords" content="programming, writing" />
    <meta name="description" content="Rickard Lindberg">
    <link rel="stylesheet" href="../../static/layout.css" type="text/css">
    <link rel="stylesheet" href="../../static/syntax.css" type="text/css">
    <link rel="alternate" href="../../atom.xml" type="application/atom+xml" title="Atom feed">
    <link rel="alternate" href="../../rss.xml" type="application/rss+xml" title="RSS feed">
    <link rel="me" href="https://hachyderm.io/@rickardlindberg">
  </head>
  <body>

    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../">rickardlindberg.me</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav">
            <li><a href="../../">Home</a></li>
            <li><a href="../../writing/">Writing</a></li>
            <li><a href="../../writing/newsletter/">Newsletter</a></li>
            <li><a href="../../projects/">Projects</a></li>
            <li><a href="../../contact/">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
      <h1>RLMeta: a VM based approach</h1>

<p><em>Published on 2019-08-06.</em></p>

<p>In this article I present an alternative implementation of <a href="../../writing/rlmeta/">RLMeta</a> in which grammars are compiled into instructions for a virtual machine (VM).</p>

<p>The VM based version builds upon the <a href="../../writing/optimizing-rlmeta/">optimized version</a> and the implementation is inspired by <a href="https://swtch.com/~rsc/regexp/regexp2.html">Regular Expression Matching: the Virtual Machine Approach</a> and <a href="http://www.inf.puc-rio.br/%7Eroberto/docs/peg.pdf">A Text Pattern-Matching Tool based on Parsing Expression Grammars</a>.</p>

<ul><li><a href="#3df386e2afb1452b87a29185c2de0673">Big picture difference</a>

</li>

<li><a href="#d1a2d050fcc444cfa4991b968a02a315">Parser</a>

</li>

<li><a href="#24aa83d59704475dba2a010f1b5d3eb0">Code generator</a>

<ul><li><a href="#8fc432da8cb94c91baeba2ee6b69f40b">Grammar</a>

</li>

<li><a href="#72b77f7c8a594757a67ef61f9502f8e9">Rule</a>

</li>

<li><a href="#613d04f41a3e4521ad022a3d4e0237ea">Or</a>

</li>

<li><a href="#e0d721aa4fae40af8de5a54253243cb0">Scope</a>

</li>

<li><a href="#34ee0862096d4fd4aa3342c4b3b6c294">And</a>

</li>

<li><a href="#8275c4d4e16c483f84be55f550e3d39c">Bind</a>

</li>

<li><a href="#963d53648b304544be75045e59c6e183">Star</a>

</li>

<li><a href="#0efe424b680f477a9bb8c1b9f679ff84">Not</a>

</li>

<li><a href="#24675b6707284a99ba3d3cb17b60e3f2">MatchCallRule</a>

</li>

<li><a href="#629b7ffad2d54725ad0af4e73bf434d8">Label</a>

</li>

<li><a href="#4ddebcb41511403c8b3fa5c96f14c8f4">SemanticAction</a>

</li>

<li><a href="#fc62b5be27fd4e40978d415ba4070a05">MatchRule</a>

</li>

<li><a href="#ce3171f9336a4f1a961f4d6fd6665361">MatchRange</a>

</li>

<li><a href="#40fcdbbabfe44b009d3f405060a2055f">MatchString</a>

</li>

<li><a href="#c6e2326b6b774601b761538455918bbe">MatchCharseq</a>

</li>

<li><a href="#de0847d410c6495d9a8ee4e75a0423cc">MatchAny</a>

</li>

<li><a href="#1dc829aba4484ed399eb025d01ed843e">MatchList</a>

</li>

<li><a href="#6cc83570ba674d71bccd12660fddefcc">Example revisited</a>

</li>

</ul></li>

<li><a href="#e66f8cec6206420abe4736ae32849c53">VM</a>

<ul><li><a href="#8f0fffeab7084a1d9b01d928be4878a8">MATCH_ANY</a>

</li>

<li><a href="#a8160d30b886418882ada3a2a884e580">MATCH_STRING</a>

</li>

<li><a href="#d8dcb57d5da141908f28f8c52983d1a6">MATCH_RANGE</a>

</li>

<li><a href="#df5dc1b5e5054e548d5c3606daba0d55">MATCH_CHARSEQ</a>

</li>

<li><a href="#49ca0a2fa665466cb90c8c128d5cc835">PUSH_SCOPE</a>

</li>

<li><a href="#b2510846e20d4cd08f9b0cd2dfb5c01d">POP_SCOPE</a>

</li>

<li><a href="#1315305641224e4aa99dd00ec5b524b1">BIND</a>

</li>

<li><a href="#738356fde86e4c7290b0f99850917ba8">ACTION</a>

</li>

<li><a href="#d7d285d9586b437ca7d7f51b5deb6193">LABEL</a>

</li>

<li><a href="#b3562467300348028f04ae5034db0f34">LIST_START</a>

</li>

<li><a href="#b4aacd38dec8406c9db784e0823c3554">LIST_APPEND</a>

</li>

<li><a href="#9940cd44d7fe4777b1c12e335bac33ae">LIST_END</a>

</li>

<li><a href="#fee2dcf573f04ac3a9e7cfd92adbe0c8">PUSH_STREAM</a>

</li>

<li><a href="#87a1eee2cfb94e1a9463a6561c226012">POP_STREAM</a>

</li>

<li><a href="#34915cae29994179abbe19f2f7e4c267">FAIL</a>

</li>

<li><a href="#8e19cbb2e71c412f95c7e241a69f0901">CALL</a>

</li>

<li><a href="#d42df29209bf475280ac510d9ae31182">MATCH_CALL_RULE</a>

</li>

<li><a href="#d104aa6d6b8e43818f662498f6566e38">RETURN</a>

</li>

<li><a href="#542906286e124874b2975d0ae23f034f">BACKTRACK</a>

</li>

<li><a href="#5b99ed36fbde45989829fde6e17d4821">COMMIT</a>

</li>

<li><a href="#77edfc243204447ba84468c78f05d8e5">Handling failure</a>

</li>

<li><a href="#95ffb1abf59546e1972c78ee7159b758">Optimizations</a>

</li>

</ul></li>

<li><a href="#2e3ad1de345642658be2e5910ab5be4e">Note on size</a>

</li>

<li><a href="#c490369b053247c0b7761f324658aa15">Note on performance</a>

</li>

<li><a href="#7e7b4c5318ff4c849c6e98e9ddeaacf0">Code listings for RLMeta</a>

<ul><li><a href="#53f0708b231b468d844291df3fe17cf2">parser.rlmeta</a>

</li>

<li><a href="#74bf51f7e8d94bcba1747edb477137ef">codegenerator.rlmeta</a>

</li>

<li><a href="#60ff77cb85fa455589e3e45cdeac8160">support.py</a>

</li>

<li><a href="#338ad257e61e4025b8859d610a475c6a">compile.sh</a>

</li>

<li><a href="#272d17f2d55749b59d7e5ec7b9b8e0ec">meta_compile.sh</a>

</li>

</ul></li>

</ul><h2><a name="3df386e2afb1452b87a29185c2de0673"></a>Big picture difference</h2>

<p>The optimized version compiles grammars into Python classes which can be used like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="n">g</span><span class> </span><span class="o">=</span><span class> </span><span class="n">G</span><span class="n">r</span><span class="n">a</span><span class="n">m</span><span class="n">m</span><span class="n">a</span><span class="n">r</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class> </span><span class="o">=</span><span class> </span><span class="n">g</span><span class="o">.</span><span class="n">r</span><span class="n">u</span><span class="n">n</span><span class="p">(</span><span class="s2">"</span><span class="s2">f</span><span class="s2">o</span><span class="s2">o</span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="s2">"</span><span class="s2">i</span><span class="s2">n</span><span class="s2">p</span><span class="s2">u</span><span class="s2">t</span><span class="s2"> </span><span class="s2">s</span><span class="s2">t</span><span class="s2">r</span><span class="s2">i</span><span class="s2">n</span><span class="s2">g</span><span class="s2">"</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<p>The VM based version also compiles grammars into Python classes with the same interface. The difference is how the <code>run</code> method is implemented. In the optimized version, it calls methods that represent rules in the grammar. The above call would result in <code>_rule_foo</code> being called. That in turn would make calls to other methods representing other rules in the grammar. The VM based version instead has a sequence of instructions and a program counter that keeps track of which instruction to execute. The VM is invoked from the <code>run</code> method.</p>

<p>To make the difference more clear, let's look at the <code>Scream</code> grammar that turns its input into a screaming equivalent (<code>hello</code> to <code>HELLO!!</code> for example):</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>S</span><span class>c</span><span class>r</span><span class>e</span><span class>a</span><span class>m</span><span class> </span><span class>{</span><span class>
</span><span class> </span><span class> </span><span class>s</span><span class>c</span><span class>r</span><span class>e</span><span class>a</span><span class>m</span><span class> </span><span class="nb">=</span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class>x</span><span class>s</span><span class> </span><span class="s">"</span><span class="s">!</span><span class="s">!</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>u</span><span class>p</span><span class>p</span><span class>e</span><span class>r</span><span class>(</span><span class>x</span><span class>)</span><span class>
</span><span class>}</span><span class>
</span></pre></div>

</div>

<p>The optimized version compiles it into the following class with one method per rule in the grammar:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">S</span><span class="nc">c</span><span class="nc">r</span><span class="nc">e</span><span class="nc">a</span><span class="nc">m</span><span class="p">(</span><span class="n">_</span><span class="n">G</span><span class="n">r</span><span class="n">a</span><span class="n">m</span><span class="n">m</span><span class="n">a</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">_</span><span class="nf">r</span><span class="nf">u</span><span class="nf">l</span><span class="nf">e</span><span class="nf">_</span><span class="nf">s</span><span class="nf">c</span><span class="nf">r</span><span class="nf">e</span><span class="nf">a</span><span class="nf">m</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">_</span><span class="n">v</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">a</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">[</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="n">_</span><span class="n">v</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="o">.</span><span class="n">b</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="s1">'</span><span class="s1">x</span><span class="s1">s</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">r</span><span class="p">(</span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">_</span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="p">(</span><span class="s1">'</span><span class="s1">c</span><span class="s1">h</span><span class="s1">a</span><span class="s1">r</span><span class="s1">'</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="n">_</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">c</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="p">[</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">_</span><span class="n">v</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="o">.</span><span class="n">l</span><span class="n">o</span><span class="n">o</span><span class="n">k</span><span class="n">u</span><span class="n">p</span><span class="p">(</span><span class="s1">'</span><span class="s1">x</span><span class="s1">s</span><span class="s1">'</span><span class="p">)</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s1">'</span><span class="s1">!</span><span class="s1">!</span><span class="s1">'</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">(</span><span class="n">_</span><span class="n">V</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">_</span><span class="nf">r</span><span class="nf">u</span><span class="nf">l</span><span class="nf">e</span><span class="nf">_</span><span class="nf">c</span><span class="nf">h</span><span class="nf">a</span><span class="nf">r</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">_</span><span class="n">v</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">a</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">[</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="n">_</span><span class="n">v</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="o">.</span><span class="n">b</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="s1">'</span><span class="s1">x</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">_</span><span class="n">a</span><span class="n">n</span><span class="n">y</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="n">_</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class="p">:</span><span class> </span><span class="n">u</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">_</span><span class="n">v</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="o">.</span><span class="n">l</span><span class="n">o</span><span class="n">o</span><span class="n">k</span><span class="n">u</span><span class="n">p</span><span class="p">(</span><span class="s1">'</span><span class="s1">x</span><span class="s1">'</span><span class="p">)</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class="p">,</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">)</span><span class="p">(</span><span class="n">_</span><span class="n">V</span><span class="n">a</span><span class="n">r</span><span class="n">s</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<p>The VM based version compiles it into the following class with a sequence of instructions (don't worry about understanding them now, it will be clear later what the instructions mean):</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">S</span><span class="nc">c</span><span class="nc">r</span><span class="nc">e</span><span class="nc">a</span><span class="nc">m</span><span class="p">(</span><span class="n">_</span><span class="n">G</span><span class="n">r</span><span class="n">a</span><span class="n">m</span><span class="n">m</span><span class="n">a</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">i</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">i</span><span class> </span><span class="o">=</span><span class> </span><span class="p">[</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class> </span><span class="o">=</span><span class> </span><span class="p">{</span><span class="p">}</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">I</span><span class="p">(</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">x</span><span class="o">=</span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class="p">,</span><span class> </span><span class="n">y</span><span class="o">=</span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">i</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">(</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">x</span><span class="p">,</span><span class> </span><span class="n">y</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">L</span><span class="nf">A</span><span class="nf">B</span><span class="nf">E</span><span class="nf">L</span><span class="p">(</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="p">[</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">]</span><span class> </span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">L</span><span class="n">A</span><span class="n">B</span><span class="n">E</span><span class="n">L</span><span class="p">(</span><span class="s1">'</span><span class="s1">s</span><span class="s1">c</span><span class="s1">r</span><span class="s1">e</span><span class="s1">a</span><span class="s1">m</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">P</span><span class="s1">U</span><span class="s1">S</span><span class="s1">H</span><span class="s1">_</span><span class="s1">S</span><span class="s1">C</span><span class="s1">O</span><span class="s1">P</span><span class="s1">E</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">L</span><span class="s1">I</span><span class="s1">S</span><span class="s1">T</span><span class="s1">_</span><span class="s1">S</span><span class="s1">T</span><span class="s1">A</span><span class="s1">R</span><span class="s1">T</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">L</span><span class="n">A</span><span class="n">B</span><span class="n">E</span><span class="n">L</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">B</span><span class="s1">A</span><span class="s1">C</span><span class="s1">K</span><span class="s1">T</span><span class="s1">R</span><span class="s1">A</span><span class="s1">C</span><span class="s1">K</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="mi">1</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">C</span><span class="s1">A</span><span class="s1">L</span><span class="s1">L</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="s1">'</span><span class="s1">c</span><span class="s1">h</span><span class="s1">a</span><span class="s1">r</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">L</span><span class="s1">I</span><span class="s1">S</span><span class="s1">T</span><span class="s1">_</span><span class="s1">A</span><span class="s1">P</span><span class="s1">P</span><span class="s1">E</span><span class="s1">N</span><span class="s1">D</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">C</span><span class="s1">O</span><span class="s1">M</span><span class="s1">M</span><span class="s1">I</span><span class="s1">T</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="mi">0</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">L</span><span class="n">A</span><span class="n">B</span><span class="n">E</span><span class="n">L</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">L</span><span class="s1">I</span><span class="s1">S</span><span class="s1">T</span><span class="s1">_</span><span class="s1">E</span><span class="s1">N</span><span class="s1">D</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">B</span><span class="s1">I</span><span class="s1">N</span><span class="s1">D</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="s1">'</span><span class="s1">x</span><span class="s1">s</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">A</span><span class="s1">C</span><span class="s1">T</span><span class="s1">I</span><span class="s1">O</span><span class="s1">N</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">:</span><span class> </span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">c</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="p">[</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">[</span><span class="s1">'</span><span class="s1">x</span><span class="s1">s</span><span class="s1">'</span><span class="p">]</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class="p">,</span><span class> </span><span class="s1">'</span><span class="s1">!</span><span class="s1">!</span><span class="s1">'</span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">P</span><span class="s1">O</span><span class="s1">P</span><span class="s1">_</span><span class="s1">S</span><span class="s1">C</span><span class="s1">O</span><span class="s1">P</span><span class="s1">E</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">R</span><span class="s1">E</span><span class="s1">T</span><span class="s1">U</span><span class="s1">R</span><span class="s1">N</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">L</span><span class="n">A</span><span class="n">B</span><span class="n">E</span><span class="n">L</span><span class="p">(</span><span class="s1">'</span><span class="s1">c</span><span class="s1">h</span><span class="s1">a</span><span class="s1">r</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">P</span><span class="s1">U</span><span class="s1">S</span><span class="s1">H</span><span class="s1">_</span><span class="s1">S</span><span class="s1">C</span><span class="s1">O</span><span class="s1">P</span><span class="s1">E</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">M</span><span class="s1">A</span><span class="s1">T</span><span class="s1">C</span><span class="s1">H</span><span class="s1">_</span><span class="s1">A</span><span class="s1">N</span><span class="s1">Y</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">B</span><span class="s1">I</span><span class="s1">N</span><span class="s1">D</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="s1">'</span><span class="s1">x</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">A</span><span class="s1">C</span><span class="s1">T</span><span class="s1">I</span><span class="s1">O</span><span class="s1">N</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">:</span><span class> </span><span class="n">u</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">[</span><span class="s1">'</span><span class="s1">x</span><span class="s1">'</span><span class="p">]</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">P</span><span class="s1">O</span><span class="s1">P</span><span class="s1">_</span><span class="s1">S</span><span class="s1">C</span><span class="s1">O</span><span class="s1">P</span><span class="s1">E</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">R</span><span class="s1">E</span><span class="s1">T</span><span class="s1">U</span><span class="s1">R</span><span class="s1">N</span><span class="s1">'</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<p>The external interface of the classes is exactly the same, but internally they look rather different. The <code>run</code> method in the optimized version looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">r</span><span class="nf">u</span><span class="nf">n</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">i</span><span class="n">n</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">M</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="o">.</span><span class="n">f</span><span class="n">r</span><span class="n">o</span><span class="n">m</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">,</span><span class> </span><span class="n">i</span><span class="n">n</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class> </span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">_</span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="p">(</span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class="p">,</span><span class> </span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class>
</span></pre></div>

</div>

<p>It does some setup and then calls <code>_match_rule</code> to start matching.</p>

<p>The <code>run</code> method in the VM based version looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">classes</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">G</span><span class="nc">r</span><span class="nc">a</span><span class="nc">m</span><span class="nc">m</span><span class="nc">a</span><span class="nc">r</span><span class="p">(</span><span class="nb">o</span><span class="nb">b</span><span class="nb">j</span><span class="nb">e</span><span class="nb">c</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">r</span><span class="nf">u</span><span class="nf">n</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">i</span><span class="n">n</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">i</span><span class="n">n</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="p">,</span><span class> </span><span class="nb">b</span><span class="nb">a</span><span class="nb">s</span><span class="nb">e</span><span class="nb">s</span><span class="nb">t</span><span class="nb">r</span><span class="nb">i</span><span class="nb">n</span><span class="nb">g</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">i</span><span class="n">n</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="p">[</span><span class="n">i</span><span class="n">n</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class> </span><span class="o">=</span><span class> </span><span class="n">r</span><span class="n">l</span><span class="n">m</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">_</span><span class="n">v</span><span class="n">m</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">i</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class="p">,</span><span class> </span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class>
</span></pre></div>

</div>

<p>It also does some setup, but then it hands over the instructions (that are created in the <code>__init__</code> method) to the VM that then executes them.</p>

<p>In the rest of this article I explain how grammars are compiled into VM instructions and how the VM is implemented.</p>

<h2><a name="d1a2d050fcc444cfa4991b968a02a315"></a>Parser</h2>

<p>The parser in the VM based version has one additional rule for labels:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>parser.rlmeta</li><li><span class="cp">expr1</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">#</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">L</span><span class="s">a</span><span class="s">b</span><span class="s">e</span><span class="s">l</span><span class="s">"</span><span class>]</span><span class>
</span></pre></div>

</div>

<p>A label returns a semantic action that evaluates to a unique number. You will see later (in <a href="#613d04f41a3e4521ad022a3d4e0237ea"><em>Or</em></a>, <a href="#963d53648b304544be75045e59c6e183"><em>Star</em></a>, and <a href="#0efe424b680f477a9bb8c1b9f679ff84"><em>Not</em></a>) how it is used in the code generator.</p>

<p>The label feature first had to be added to the optimized version before it could be used to compile the VM based version. That implementation is not shown in this article, but the implementation of labels in the VM based version is similar.</p>

<p>The rest of the parser is exactly the same as in the optimized version:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>parser.rlmeta</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>P</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>r</span><span class> </span><span class>{</span><span class>
</span><span class> </span><span class> </span><span class>g</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">{</span><span class="sc">'</span><span class> </span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class="nc">*</span><span class="nb">:</span><span class>y</span><span class>s</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">}</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">G</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="nc">~</span><span class>y</span><span class>s</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">=</span><span class="sc">'</span><span class> </span><span class>c</span><span class>h</span><span class>o</span><span class>i</span><span class>c</span><span class>e</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">R</span><span class="s">u</span><span class="s">l</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class>y</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>c</span><span class>h</span><span class>o</span><span class>i</span><span class>c</span><span class>e</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>(</span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">|</span><span class="sc">'</span><span class>)</span><span class="nc">?</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>q</span><span class>u</span><span class>e</span><span class>n</span><span class>c</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class>(</span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">|</span><span class="sc">'</span><span class> </span><span class>s</span><span class>e</span><span class>q</span><span class>u</span><span class>e</span><span class>n</span><span class>c</span><span class>e</span><span class>)</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">O</span><span class="s">r</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>q</span><span class>u</span><span class>e</span><span class>n</span><span class>c</span><span class>e</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">c</span><span class="s">o</span><span class="s">p</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">A</span><span class="s">n</span><span class="s">d</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>1</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">:</span><span class="sc">'</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">B</span><span class="s">i</span><span class="s">n</span><span class="s">d</span><span class="s">"</span><span class> </span><span class>y</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>1</span><span class>
</span><span class> </span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>1</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">*</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">t</span><span class="s">a</span><span class="s">r</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">?</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">O</span><span class="s">r</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">A</span><span class="s">n</span><span class="s">d</span><span class="s">"</span><span class>]</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">!</span><span class="sc">'</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">N</span><span class="s">o</span><span class="s">t</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">%</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">C</span><span class="s">a</span><span class="s">l</span><span class="s">l</span><span class="s">R</span><span class="s">u</span><span class="s">l</span><span class="s">e</span><span class="s">"</span><span class>]</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">e</span><span class="cp">x</span><span class="cp">p</span><span class="cp">r</span><span class="cp">1</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class>
</span><span class> </span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">-</span><span class="sc">&gt;</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">e</span><span class="s">m</span><span class="s">a</span><span class="s">n</span><span class="s">t</span><span class="s">i</span><span class="s">c</span><span class="s">A</span><span class="s">c</span><span class="s">t</span><span class="s">i</span><span class="s">o</span><span class="s">n</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nc">!</span><span class>(</span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">=</span><span class="sc">'</span><span class>)</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">R</span><span class="s">u</span><span class="s">l</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class="sc">'</span><span class="sc">-</span><span class="sc">'</span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">R</span><span class="s">a</span><span class="s">n</span><span class="s">g</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class>y</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">S</span><span class="s">t</span><span class="s">r</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>q</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">C</span><span class="s">h</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">e</span><span class="s">q</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">.</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">A</span><span class="s">n</span><span class="s">y</span><span class="s">"</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">(</span><span class="sc">'</span><span class> </span><span class>c</span><span class>h</span><span class>o</span><span class>i</span><span class>c</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">)</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">[</span><span class="sc">'</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">]</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">L</span><span class="s">i</span><span class="s">s</span><span class="s">t</span><span class="s">"</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">A</span><span class="s">n</span><span class="s">d</span><span class="s">"</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">t</span><span class="s">r</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">[</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">]</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">L</span><span class="s">i</span><span class="s">s</span><span class="s">t</span><span class="s">"</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">{</span><span class="sc">'</span><span class> </span><span class>b</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">}</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">"</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">(</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>y</span><span class>s</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">)</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">F</span><span class="s">n</span><span class="s">C</span><span class="s">a</span><span class="s">l</span><span class="s">l</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="nc">~</span><span class>y</span><span class>s</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">V</span><span class="s">a</span><span class="s">r</span><span class="s">L</span><span class="s">o</span><span class="s">o</span><span class="s">k</span><span class="s">u</span><span class="s">p</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">~</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">L</span><span class="s">i</span><span class="s">s</span><span class="s">t</span><span class="s">I</span><span class="s">t</span><span class="s">e</span><span class="s">m</span><span class="s">S</span><span class="s">p</span><span class="s">l</span><span class="s">i</span><span class="s">c</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class>
</span><span class> </span><span class> </span><span class>b</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">&gt;</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">I</span><span class="s">n</span><span class="s">d</span><span class="s">e</span><span class="s">n</span><span class="s">t</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">"</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">&lt;</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">D</span><span class="s">e</span><span class="s">d</span><span class="s">e</span><span class="s">n</span><span class="s">t</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">"</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class>
</span><span class> </span><span class> </span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class>(</span><span class="nc">!</span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class>i</span><span class>n</span><span class>n</span><span class>e</span><span class>r</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class>)</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>j</span><span class>o</span><span class>i</span><span class>n</span><span class>(</span><span class>x</span><span class>s</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>q</span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class>(</span><span class="nc">!</span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class>i</span><span class>n</span><span class>n</span><span class>e</span><span class>r</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class>)</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>j</span><span class>o</span><span class>i</span><span class>n</span><span class>(</span><span class>x</span><span class>s</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class> </span><span class="nc">!</span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class>i</span><span class>n</span><span class>n</span><span class>e</span><span class>r</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class> </span><span class> </span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class>i</span><span class>n</span><span class>n</span><span class>e</span><span class>r</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">\</span><span class="sc">'</span><span class> </span><span class>e</span><span class>s</span><span class>c</span><span class>a</span><span class>p</span><span class>e</span><span class> </span><span class="nb">|</span><span class> </span><span class="nc">.</span><span class>
</span><span class> </span><span class> </span><span class>e</span><span class>s</span><span class>c</span><span class>a</span><span class>p</span><span class>e</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">\</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">\</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="s">'</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">"</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">n</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>S</span><span class>t</span><span class>a</span><span class>r</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>j</span><span class>o</span><span class>i</span><span class>n</span><span class>(</span><span class>[</span><span class>x</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>S</span><span class>t</span><span class>a</span><span class>r</span><span class>t</span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="sc">a</span><span class="sc">'</span><span class="nc">-</span><span class="sc">'</span><span class="sc">z</span><span class="sc">'</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">A</span><span class="sc">'</span><span class="nc">-</span><span class="sc">'</span><span class="sc">Z</span><span class="sc">'</span><span class>
</span><span class> </span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="sc">a</span><span class="sc">'</span><span class="nc">-</span><span class="sc">'</span><span class="sc">z</span><span class="sc">'</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">A</span><span class="sc">'</span><span class="nc">-</span><span class="sc">'</span><span class="sc">Z</span><span class="sc">'</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">0</span><span class="sc">'</span><span class="nc">-</span><span class="sc">'</span><span class="sc">9</span><span class="sc">'</span><span class>
</span><span class> </span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>(</span><span class="sc">'</span><span class="sc"> </span><span class="sc">'</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">n</span><span class="sc">'</span><span class>)</span><span class="nc">*</span><span class>
</span><span class>}</span><span class>
</span></pre></div>

</div>

<h2><a name="24aa83d59704475dba2a010f1b5d3eb0"></a>Code generator</h2>

<p>The code generator in the VM based version is similarly structured to the code generator in the optimized version with a grammar and a support library:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>C</span><span class>o</span><span class>d</span><span class>e</span><span class>G</span><span class>e</span><span class>n</span><span class>e</span><span class>r</span><span class>a</span><span class>t</span><span class>o</span><span class>r</span><span class> </span><span class>{</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">r</span><span class="cp">u</span><span class="cp">l</span><span class="cp">e</span><span class="cp">s</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class>}</span><span class>
</span></pre></div>

</div>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">i</span><span class="cp">m</span><span class="cp">p</span><span class="cp">o</span><span class="cp">r</span><span class="cp">t</span><span class="cp">s</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class>
</span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">v</span><span class="cp">m</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class>
</span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">c</span><span class="cp">l</span><span class="cp">a</span><span class="cp">s</span><span class="cp">s</span><span class="cp">e</span><span class="cp">s</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span></pre></div>

</div>

<p>The <code>ast</code> rule is exactly the same as in the optimized version:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>a</span><span class>s</span><span class>t</span><span class> </span><span class="nb">=</span><span class> </span><span class>[</span><span class>%</span><span class="nb">:</span><span class>x</span><span class>]</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>x</span><span class>
</span></pre></div>

</div>

<p>Then there is an additional rule for when a Python representation of a value is needed:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>p</span><span class>y</span><span class> </span><span class="nb">=</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>r</span><span class>e</span><span class>p</span><span class>r</span><span class>(</span><span class>x</span><span class>)</span><span class>
</span></pre></div>

</div>

<p>Let's move on and look at how VM instructions are generated.</p>

<h3><a name="8fc432da8cb94c91baeba2ee6b69f40b"></a>Grammar</h3>

<p>When a <code>Grammar</code> AST node is matched, a Python class inheriting <code>_Grammar</code> is generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>G</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class> </span><span class="nb">=</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nc">*</span><span class="nb">:</span><span class>y</span><span class>s</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">c</span><span class="s">l</span><span class="s">a</span><span class="s">s</span><span class="s">s</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">_</span><span class="s">G</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">)</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">d</span><span class="s">e</span><span class="s">f</span><span class="s"> </span><span class="s">_</span><span class="s">_</span><span class="s">i</span><span class="s">n</span><span class="s">i</span><span class="s">t</span><span class="s">_</span><span class="s">_</span><span class="s">(</span><span class="s">s</span><span class="s">e</span><span class="s">l</span><span class="s">f</span><span class="s">)</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">s</span><span class="s">e</span><span class="s">l</span><span class="s">f</span><span class="s">.</span><span class="s">_</span><span class="s">i</span><span class="s">n</span><span class="s">s</span><span class="s">t</span><span class="s">r</span><span class="s">u</span><span class="s">c</span><span class="s">t</span><span class="s">i</span><span class="s">o</span><span class="s">n</span><span class="s">s</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">i</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">[</span><span class="s">]</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">s</span><span class="s">e</span><span class="s">l</span><span class="s">f</span><span class="s">.</span><span class="s">_</span><span class="s">l</span><span class="s">a</span><span class="s">b</span><span class="s">e</span><span class="s">l</span><span class="s">s</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">l</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">{</span><span class="s">}</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">d</span><span class="s">e</span><span class="s">f</span><span class="s"> </span><span class="s">I</span><span class="s">(</span><span class="s">n</span><span class="s">a</span><span class="s">m</span><span class="s">e</span><span class="s">,</span><span class="s"> </span><span class="s">x</span><span class="s">=</span><span class="s">N</span><span class="s">o</span><span class="s">n</span><span class="s">e</span><span class="s">,</span><span class="s"> </span><span class="s">y</span><span class="s">=</span><span class="s">N</span><span class="s">o</span><span class="s">n</span><span class="s">e</span><span class="s">)</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">i</span><span class="s">.</span><span class="s">a</span><span class="s">p</span><span class="s">p</span><span class="s">e</span><span class="s">n</span><span class="s">d</span><span class="s">(</span><span class="s">(</span><span class="s">n</span><span class="s">a</span><span class="s">m</span><span class="s">e</span><span class="s">,</span><span class="s"> </span><span class="s">x</span><span class="s">,</span><span class="s"> </span><span class="s">y</span><span class="s">)</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">d</span><span class="s">e</span><span class="s">f</span><span class="s"> </span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">n</span><span class="s">a</span><span class="s">m</span><span class="s">e</span><span class="s">)</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">l</span><span class="s">[</span><span class="s">n</span><span class="s">a</span><span class="s">m</span><span class="s">e</span><span class="s">]</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">l</span><span class="s">e</span><span class="s">n</span><span class="s">(</span><span class="s">i</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>y</span><span class>s</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>The name of the class is the same as the name of the grammar.</p>

<p>The <code>__init__</code> method has functionality for creating instructions. An instruction is represented as a tuple with three elements: the name, the first argument, and the second argument. Arguments can be <code>None</code>. Instructions are stored in a list. Labels map names to positions in the instruction list and are stored in a dictionary.</p>

<p>Shorthand names <code>i</code> and <code>l</code> are used instead of <code>self._instructions</code> and <code>self._labels</code> because they are faster. Not using <code>self</code> reduces one dictionary lookup.</p>

<p>The child AST nodes of <code>Grammar</code> are assumed to use the <code>I</code> and <code>LABEL</code> functions to create instructions.</p>

<h3><a name="72b77f7c8a594757a67ef61f9502f8e9"></a>Rule</h3>

<p>When a <code>Rule</code> AST node is matched, instructions representing a function are generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>R</span><span class>u</span><span class>l</span><span class>e</span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>y</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>y</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">R</span><span class="s">E</span><span class="s">T</span><span class="s">U</span><span class="s">R</span><span class="s">N</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation (where labels are in the first column and instructions are in the second column) it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>&lt;</span><span class>x</span><span class>&gt;</span><span class>:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>y</span><span class> </span><span class>i</span><span class>n</span><span class>s</span><span class>t</span><span class>r</span><span class>u</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>s</span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>R</span><span class>E</span><span class>T</span><span class>U</span><span class>R</span><span class>N</span><span class>
</span></pre></div>

</div>

<p>The label name is the name of the rule. <a href="#d104aa6d6b8e43818f662498f6566e38"><em>RETURN</em></a> instructs the VM to continue execution at wherever it was before calling this rule.</p>

<h3><a name="613d04f41a3e4521ad022a3d4e0237ea"></a>Or</h3>

<p>When an <code>Or</code> AST node is matched, instructions representing a choice are generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>O</span><span class>r</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class>O</span><span class>r</span><span class="nb">:</span><span class>y</span><span class> </span><span class>#</span><span class="nb">:</span><span class>a</span><span class> </span><span class>#</span><span class="nb">:</span><span class>b</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">B</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">T</span><span class="s">R</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">C</span><span class="s">O</span><span class="s">M</span><span class="s">M</span><span class="s">I</span><span class="s">T</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>y</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>B</span><span class>A</span><span class>C</span><span class>K</span><span class>T</span><span class>R</span><span class>A</span><span class>C</span><span class>K</span><span class> </span><span class>a</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>x</span><span class> </span><span class>i</span><span class>n</span><span class>s</span><span class>t</span><span class>r</span><span class>u</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>s</span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>C</span><span class>O</span><span class>M</span><span class>M</span><span class>I</span><span class>T</span><span class> </span><span class>b</span><span class>
</span><span class>a</span><span class>:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>y</span><span class> </span><span class>i</span><span class>n</span><span class>s</span><span class>t</span><span class>r</span><span class>u</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>s</span><span class>&gt;</span><span class>
</span><span class>b</span><span class>:</span><span class>
</span></pre></div>

</div>

<p><a href="#542906286e124874b2975d0ae23f034f"><em>BACKTRACK</em></a> instructs the VM to push a backtrack entry onto the stack so that it can try matching again at label <code>a</code> if the <code>x</code> instructions fail. <a href="#5b99ed36fbde45989829fde6e17d4821"><em>COMMIT</em></a> instructs the VM to pop this backtrack entry off the stack and continue execution at label <code>b</code>. If <code>x</code> instructions fail, the second choice at label <code>a</code> is tried, otherwise, execution continues at label <code>b</code>. The <code>y</code> instructions might represent another choice or the last choice. If there is only once choice, only instructions for that choice are generated. In that case, no <code>BACKTRACK</code> and <code>COMMIT</code> are needed.</p>

<h3><a name="e0d721aa4fae40af8de5a54253243cb0"></a>Scope</h3>

<p>When a <code>Scope</code> AST node is matched, instructions creating a new scope are generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>S</span><span class>c</span><span class>o</span><span class>p</span><span class>e</span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">P</span><span class="s">U</span><span class="s">S</span><span class="s">H</span><span class="s">_</span><span class="s">S</span><span class="s">C</span><span class="s">O</span><span class="s">P</span><span class="s">E</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">P</span><span class="s">O</span><span class="s">P</span><span class="s">_</span><span class="s">S</span><span class="s">C</span><span class="s">O</span><span class="s">P</span><span class="s">E</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>P</span><span class>U</span><span class>S</span><span class>H</span><span class>_</span><span class>S</span><span class>C</span><span class>O</span><span class>P</span><span class>E</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>x</span><span class> </span><span class>i</span><span class>n</span><span class>s</span><span class>t</span><span class>r</span><span class>u</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>s</span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>P</span><span class>O</span><span class>P</span><span class>_</span><span class>S</span><span class>C</span><span class>O</span><span class>P</span><span class>E</span><span class>
</span></pre></div>

</div>

<p><a href="#49ca0a2fa665466cb90c8c128d5cc835"><em>PUSH_SCOPE</em></a> instructs the VM to push a new scope onto the stack so that all bindings that are done by <code>x</code> instructions happen in this new scope. <a href="#b2510846e20d4cd08f9b0cd2dfb5c01d"><em>POP_SCOPE</em></a> instructs the VM to pop this scope off the stack.</p>

<h3><a name="34ee0862096d4fd4aa3342c4b3b6c294"></a>And</h3>

<p>When an <code>And</code> AST node is matched, instructions for all items in the sequence are generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>A</span><span class>n</span><span class>d</span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nc">*</span><span class>
</span></pre></div>

</div>

<h3><a name="8275c4d4e16c483f84be55f550e3d39c"></a>Bind</h3>

<p>When a <code>Bind</code> AST node is matched, instructions binding the last result to a name are generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>B</span><span class>i</span><span class>n</span><span class>d</span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>y</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class>y</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">B</span><span class="s">I</span><span class="s">N</span><span class="s">D</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>y</span><span class> </span><span class>i</span><span class>n</span><span class>s</span><span class>t</span><span class>r</span><span class>u</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>s</span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>B</span><span class>I</span><span class>N</span><span class>D</span><span class> </span><span class>&lt;</span><span class>x</span><span class>&gt;</span><span class>
</span></pre></div>

</div>

<p><a href="#1315305641224e4aa99dd00ec5b524b1"><em>BIND</em></a> instructs the VM to bind the last result from <code>y</code> instructions to the name <code>x</code> in the current scope.</p>

<h3><a name="963d53648b304544be75045e59c6e183"></a>Star</h3>

<p>When a <code>Star</code> AST node is matched, instructions representing a repetition are generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>S</span><span class>t</span><span class>a</span><span class>r</span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class>#</span><span class="nb">:</span><span class>a</span><span class> </span><span class>#</span><span class="nb">:</span><span class>b</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">L</span><span class="s">I</span><span class="s">S</span><span class="s">T</span><span class="s">_</span><span class="s">S</span><span class="s">T</span><span class="s">A</span><span class="s">R</span><span class="s">T</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">B</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">T</span><span class="s">R</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">L</span><span class="s">I</span><span class="s">S</span><span class="s">T</span><span class="s">_</span><span class="s">A</span><span class="s">P</span><span class="s">P</span><span class="s">E</span><span class="s">N</span><span class="s">D</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">C</span><span class="s">O</span><span class="s">M</span><span class="s">M</span><span class="s">I</span><span class="s">T</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">L</span><span class="s">I</span><span class="s">S</span><span class="s">T</span><span class="s">_</span><span class="s">E</span><span class="s">N</span><span class="s">D</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>L</span><span class>I</span><span class>S</span><span class>T</span><span class>_</span><span class>S</span><span class>T</span><span class>A</span><span class>R</span><span class>T</span><span class>
</span><span class>a</span><span class>:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>B</span><span class>A</span><span class>C</span><span class>K</span><span class>T</span><span class>R</span><span class>A</span><span class>C</span><span class>K</span><span class> </span><span class>b</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>x</span><span class> </span><span class>i</span><span class>n</span><span class>s</span><span class>t</span><span class>r</span><span class>u</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>s</span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>L</span><span class>I</span><span class>S</span><span class>T</span><span class>_</span><span class>A</span><span class>P</span><span class>P</span><span class>E</span><span class>N</span><span class>D</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>C</span><span class>O</span><span class>M</span><span class>M</span><span class>I</span><span class>T</span><span class> </span><span class>a</span><span class>
</span><span class>b</span><span class>:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>L</span><span class>I</span><span class>S</span><span class>T</span><span class>_</span><span class>E</span><span class>N</span><span class>D</span><span class>
</span></pre></div>

</div>

<p><a href="#b3562467300348028f04ae5034db0f34"><em>LIST_START</em></a> instructs the VM to create a new list for accumulating results. <a href="#b4aacd38dec8406c9db784e0823c3554"><em>LIST_APPEND</em></a> instructs the VM to append the last result to this list. <a href="#9940cd44d7fe4777b1c12e335bac33ae"><em>LIST_END</em></a> instructs the VM to make this list itself the last result. The <code>BACKTRACK</code> and <code>COMMIT</code> instructions are used to create control flow for a loop. As long as <code>x</code> instructions succeed, the program loops between label <code>a</code> and the <code>COMMIT</code> instruction. As soon as <code>x</code> instructions fail, the program continues execution at label <code>b</code>.</p>

<h3><a name="0efe424b680f477a9bb8c1b9f679ff84"></a>Not</h3>

<p>When a <code>Not</code> AST node is matched, instructions representing negative lookahead are generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>N</span><span class>o</span><span class>t</span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class>#</span><span class="nb">:</span><span class>a</span><span class> </span><span class>#</span><span class="nb">:</span><span class>b</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">B</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">T</span><span class="s">R</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">C</span><span class="s">O</span><span class="s">M</span><span class="s">M</span><span class="s">I</span><span class="s">T</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">F</span><span class="s">A</span><span class="s">I</span><span class="s">L</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">'</span><span class="s">n</span><span class="s">o</span><span class="s"> </span><span class="s">m</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s"> </span><span class="s">e</span><span class="s">x</span><span class="s">p</span><span class="s">e</span><span class="s">c</span><span class="s">t</span><span class="s">e</span><span class="s">d</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>B</span><span class>A</span><span class>C</span><span class>K</span><span class>T</span><span class>R</span><span class>A</span><span class>C</span><span class>K</span><span class> </span><span class>b</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>x</span><span class> </span><span class>i</span><span class>n</span><span class>s</span><span class>t</span><span class>r</span><span class>u</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>s</span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>C</span><span class>O</span><span class>M</span><span class>M</span><span class>I</span><span class>T</span><span class> </span><span class>a</span><span class>
</span><span class>a</span><span class>:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>F</span><span class>A</span><span class>I</span><span class>L</span><span class> </span><span class>'</span><span class>n</span><span class>o</span><span class> </span><span class>m</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>e</span><span class>c</span><span class>t</span><span class>e</span><span class>d</span><span class>'</span><span class>
</span><span class>b</span><span class>:</span><span class>
</span></pre></div>

</div>

<p><a href="#34915cae29994179abbe19f2f7e4c267"><em>FAIL</em></a> instructs the VM to fail with the given message. The <code>BACKTRACK</code> and <code>COMMIT</code> instructions are used to create control flow for negative lookahead. If <code>x</code> instructions succeed, the <code>COMMIT</code> instruction makes the program continue at label <code>a</code>. That immediately fails because the negative lookahead does not expect a match. If <code>x</code> instructions fail, the program continues execution at label <code>b</code>, and the <code>FAIL</code> instruction is skipped.</p>

<h3><a name="24675b6707284a99ba3d3cb17b60e3f2"></a>MatchCallRule</h3>

<p>When a <code>MatchCallRule</code> AST node is matched, an instruction representing that operation is generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>C</span><span class>a</span><span class>l</span><span class>l</span><span class>R</span><span class>u</span><span class>l</span><span class>e</span><span class> </span><span class="nb">=</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">M</span><span class="s">A</span><span class="s">T</span><span class="s">C</span><span class="s">H</span><span class="s">_</span><span class="s">C</span><span class="s">A</span><span class="s">L</span><span class="s">L</span><span class="s">_</span><span class="s">R</span><span class="s">U</span><span class="s">L</span><span class="s">E</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>M</span><span class>A</span><span class>T</span><span class>C</span><span class>H</span><span class>_</span><span class>C</span><span class>A</span><span class>L</span><span class>L</span><span class>_</span><span class>R</span><span class>U</span><span class>L</span><span class>E</span><span class>
</span></pre></div>

</div>

<p><a href="#d42df29209bf475280ac510d9ae31182"><em>MATCH_CALL_RULE</em></a> instructs the VM to call the rule denoted by the current input object.</p>

<h3><a name="629b7ffad2d54725ad0af4e73bf434d8"></a>Label</h3>

<p>When a <code>Label</code> AST node is matched, an instruction representing that operation is generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>L</span><span class>a</span><span class>b</span><span class>e</span><span class>l</span><span class> </span><span class="nb">=</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>L</span><span class>A</span><span class>B</span><span class>E</span><span class>L</span><span class>
</span></pre></div>

</div>

<p><a href="#d7d285d9586b437ca7d7f51b5deb6193"><em>LABEL</em></a> instructs the VM to create a semantic action that evaluates to a unique number.</p>

<h3><a name="4ddebcb41511403c8b3fa5c96f14c8f4"></a>SemanticAction</h3>

<p>When a <code>SemanticAction</code> AST node is matched, an instruction representing that operation is generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>S</span><span class>e</span><span class>m</span><span class>a</span><span class>n</span><span class>t</span><span class>i</span><span class>c</span><span class>A</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">A</span><span class="s">C</span><span class="s">T</span><span class="s">I</span><span class="s">O</span><span class="s">N</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">l</span><span class="s">a</span><span class="s">m</span><span class="s">b</span><span class="s">d</span><span class="s">a</span><span class="s"> </span><span class="s">s</span><span class="s">c</span><span class="s">o</span><span class="s">p</span><span class="s">e</span><span class="s">:</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>A</span><span class>C</span><span class>T</span><span class>I</span><span class>O</span><span class>N</span><span class> </span><span class>&lt;</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class>l</span><span class>a</span><span class>m</span><span class>b</span><span class>d</span><span class>a</span><span class>&gt;</span><span class>
</span></pre></div>

</div>

<p><a href="#738356fde86e4c7290b0f99850917ba8"><em>ACTION</em></a> instructs the VM to create a user defined a semantic action. If there is a match, it will be called with the scope that was active when the action was defined.</p>

<p>Semantic actions are not evaluated by the VM, but rather by Python. The VM is only responsible for matching and creating semantic actions as results.</p>

<p>The lambda expression that is the first argument is generated by the following rules similarly to how it was done in the optimized version:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>S</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class>
</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class>
</span><span class>B</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>e</span><span class>r</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class>s</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">_</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">.</span><span class="s">c</span><span class="s">r</span><span class="s">e</span><span class="s">a</span><span class="s">t</span><span class="s">e</span><span class="s">(</span><span class="s">[</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">]</span><span class="s">)</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span><span class>I</span><span class>n</span><span class>d</span><span class>e</span><span class>n</span><span class>t</span><span class>B</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>e</span><span class>r</span><span class> </span><span class="nb">=</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">_</span><span class="s">I</span><span class="s">n</span><span class="s">d</span><span class="s">e</span><span class="s">n</span><span class="s">t</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class>D</span><span class>e</span><span class>d</span><span class>e</span><span class>n</span><span class>t</span><span class>B</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>e</span><span class>r</span><span class> </span><span class="nb">=</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">_</span><span class="s">D</span><span class="s">e</span><span class="s">d</span><span class="s">e</span><span class="s">n</span><span class="s">t</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class>F</span><span class>n</span><span class>C</span><span class>a</span><span class>l</span><span class>l</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class>s</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>y</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class>V</span><span class>a</span><span class>r</span><span class>L</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">s</span><span class="s">c</span><span class="s">o</span><span class="s">p</span><span class="s">e</span><span class="s">[</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">]</span><span class="s">.</span><span class="s">e</span><span class="s">v</span><span class="s">a</span><span class="s">l</span><span class="s">(</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class>a</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class>x</span><span class> </span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class>a</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class>a</span><span class>s</span><span class>t</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>x</span><span class>s</span><span class> </span><span class="s">"</span><span class="s">[</span><span class="s">]</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class>a</span><span class>s</span><span class>t</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">L</span><span class="s">i</span><span class="s">s</span><span class="s">t</span><span class="s">I</span><span class="s">t</span><span class="s">e</span><span class="s">m</span><span class="s">S</span><span class="s">p</span><span class="s">l</span><span class="s">i</span><span class="s">c</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class>]</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class> </span><span class> </span><span class="s">"</span><span class="s">+</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">[</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">]</span><span class="s">+</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>The related pieces in the support library are exactly the same as in the optimized version:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">imports</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">t</span><span class="k">r</span><span class="k">y</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="kn">f</span><span class="kn">r</span><span class="kn">o</span><span class="kn">m</span><span class> </span><span class="nn">c</span><span class="nn">S</span><span class="nn">t</span><span class="nn">r</span><span class="nn">i</span><span class="nn">n</span><span class="nn">g</span><span class="nn">I</span><span class="nn">O</span><span class> </span><span class="kn">i</span><span class="kn">m</span><span class="kn">p</span><span class="kn">o</span><span class="kn">r</span><span class="kn">t</span><span class> </span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="n">I</span><span class="n">O</span><span class>
</span><span class="k">e</span><span class="k">x</span><span class="k">c</span><span class="k">e</span><span class="k">p</span><span class="k">t</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="kn">f</span><span class="kn">r</span><span class="kn">o</span><span class="kn">m</span><span class> </span><span class="nn">S</span><span class="nn">t</span><span class="nn">r</span><span class="nn">i</span><span class="nn">n</span><span class="nn">g</span><span class="nn">I</span><span class="nn">O</span><span class> </span><span class="kn">i</span><span class="kn">m</span><span class="kn">p</span><span class="kn">o</span><span class="kn">r</span><span class="kn">t</span><span class> </span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="n">I</span><span class="n">O</span><span class>
</span></pre></div>

</div>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">classes</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">B</span><span class="nc">u</span><span class="nc">i</span><span class="nc">l</span><span class="nc">d</span><span class="nc">e</span><span class="nc">r</span><span class="p">(</span><span class="nb">o</span><span class="nb">b</span><span class="nb">j</span><span class="nb">e</span><span class="nb">c</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">b</span><span class="nf">u</span><span class="nf">i</span><span class="nf">l</span><span class="nf">d</span><span class="nf">_</span><span class="nf">s</span><span class="nf">t</span><span class="nf">r</span><span class="nf">i</span><span class="nf">n</span><span class="nf">g</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">O</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="o">.</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nd">@</span><span class="nd">c</span><span class="nd">l</span><span class="nd">a</span><span class="nd">s</span><span class="nd">s</span><span class="nd">m</span><span class="nd">e</span><span class="nd">t</span><span class="nd">h</span><span class="nd">o</span><span class="nd">d</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">c</span><span class="nf">r</span><span class="nf">e</span><span class="nf">a</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="nb">l</span><span class="nb">i</span><span class="nb">s</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">_</span><span class="n">L</span><span class="n">i</span><span class="n">s</span><span class="n">t</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="p">[</span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">c</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">x</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">_</span><span class="n">A</span><span class="n">t</span><span class="n">o</span><span class="n">m</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class="p">)</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">O</span><span class="nc">u</span><span class="nc">t</span><span class="nc">p</span><span class="nc">u</span><span class="nc">t</span><span class="p">(</span><span class="nb">o</span><span class="nb">b</span><span class="nb">j</span><span class="nb">e</span><span class="nb">c</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">f</span><span class="n">f</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="o">=</span><span class> </span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="n">I</span><span class="n">O</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="mi">0</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">o</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">e</span><span class="n">w</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="bp">T</span><span class="bp">r</span><span class="bp">u</span><span class="bp">e</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nd">@</span><span class="nd">p</span><span class="nd">r</span><span class="nd">o</span><span class="nd">p</span><span class="nd">e</span><span class="nd">r</span><span class="nd">t</span><span class="nd">y</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">v</span><span class="nf">a</span><span class="nf">l</span><span class="nf">u</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">f</span><span class="n">f</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">g</span><span class="n">e</span><span class="n">t</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">w</span><span class="nf">r</span><span class="nf">i</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">h</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">i</span><span class="n">s</span><span class="n">_</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class="n">b</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">c</span><span class="n">h</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="se">\</span><span class="se">n</span><span class="s2">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="ow">a</span><span class="ow">n</span><span class="ow">d</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">o</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">e</span><span class="n">w</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class> </span><span class="ow">a</span><span class="ow">n</span><span class="ow">d</span><span class> </span><span class="ow">n</span><span class="ow">o</span><span class="ow">t</span><span class> </span><span class="n">i</span><span class="n">s</span><span class="n">_</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class="n">b</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">k</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">f</span><span class="n">f</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="s2">"</span><span class="s2"> </span><span class="s2"> </span><span class="s2"> </span><span class="s2"> </span><span class="s2">"</span><span class="o">*</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">f</span><span class="n">f</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">c</span><span class="n">h</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">o</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">e</span><span class="n">w</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">i</span><span class="n">s</span><span class="n">_</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class="n">b</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">k</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">L</span><span class="nc">i</span><span class="nc">s</span><span class="nc">t</span><span class="nc">B</span><span class="nc">u</span><span class="nc">i</span><span class="nc">l</span><span class="nc">d</span><span class="nc">e</span><span class="nc">r</span><span class="p">(</span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">w</span><span class="nf">r</span><span class="nf">i</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">A</span><span class="nc">t</span><span class="nc">o</span><span class="nc">m</span><span class="nc">B</span><span class="nc">u</span><span class="nc">i</span><span class="nc">l</span><span class="nc">d</span><span class="nc">e</span><span class="nc">r</span><span class="p">(</span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">m</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">w</span><span class="nf">r</span><span class="nf">i</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="nb">s</span><span class="nb">t</span><span class="nb">r</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">m</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">I</span><span class="nc">n</span><span class="nc">d</span><span class="nc">e</span><span class="nc">n</span><span class="nc">t</span><span class="nc">B</span><span class="nc">u</span><span class="nc">i</span><span class="nc">l</span><span class="nc">d</span><span class="nc">e</span><span class="nc">r</span><span class="p">(</span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">w</span><span class="nf">r</span><span class="nf">i</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="o">.</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">D</span><span class="nc">e</span><span class="nc">d</span><span class="nc">e</span><span class="nc">n</span><span class="nc">t</span><span class="nc">B</span><span class="nc">u</span><span class="nc">i</span><span class="nc">l</span><span class="nc">d</span><span class="nc">e</span><span class="nc">r</span><span class="p">(</span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">w</span><span class="nf">r</span><span class="nf">i</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="o">.</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">-</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span></pre></div>

</div>

<h3><a name="fc62b5be27fd4e40978d415ba4070a05"></a>MatchRule</h3>

<p>When a <code>MatchRule</code> AST node is matched, an instruction representing that operation is generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>R</span><span class>u</span><span class>l</span><span class>e</span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">C</span><span class="s">A</span><span class="s">L</span><span class="s">L</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>C</span><span class>A</span><span class>L</span><span class>L</span><span class> </span><span class>&lt;</span><span class>x</span><span class>&gt;</span><span class>
</span></pre></div>

</div>

<p><a href="#8e19cbb2e71c412f95c7e241a69f0901"><em>CALL</em></a> instructs the VM to call the given rule.</p>

<h3><a name="ce3171f9336a4f1a961f4d6fd6665361"></a>MatchRange</h3>

<p>When a <code>MatchRange</code> AST node is matched, an instruction representing that operation is generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>R</span><span class>a</span><span class>n</span><span class>g</span><span class>e</span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>y</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">M</span><span class="s">A</span><span class="s">T</span><span class="s">C</span><span class="s">H</span><span class="s">_</span><span class="s">R</span><span class="s">A</span><span class="s">N</span><span class="s">G</span><span class="s">E</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>y</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>M</span><span class>A</span><span class>T</span><span class>C</span><span class>H</span><span class>_</span><span class>R</span><span class>A</span><span class>N</span><span class>G</span><span class>E</span><span class> </span><span class>&lt;</span><span class>x</span><span class>&gt;</span><span class> </span><span class>&lt;</span><span class>y</span><span class>&gt;</span><span class>
</span></pre></div>

</div>

<p><a href="#d8dcb57d5da141908f28f8c52983d1a6"><em>MATCH_RANGE</em></a> instructs the VM to match an object in the given range.</p>

<h3><a name="40fcdbbabfe44b009d3f405060a2055f"></a>MatchString</h3>

<p>When a <code>MatchString</code> AST node is matched, an instruction representing that operation is generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>S</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">M</span><span class="s">A</span><span class="s">T</span><span class="s">C</span><span class="s">H</span><span class="s">_</span><span class="s">S</span><span class="s">T</span><span class="s">R</span><span class="s">I</span><span class="s">N</span><span class="s">G</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>M</span><span class>A</span><span class>T</span><span class>C</span><span class>H</span><span class>_</span><span class>S</span><span class>T</span><span class>R</span><span class>I</span><span class>N</span><span class>G</span><span class> </span><span class>&lt;</span><span class>x</span><span class>&gt;</span><span class>
</span></pre></div>

</div>

<p><a href="#a8160d30b886418882ada3a2a884e580"><em>MATCH_STRING</em></a> instructs the VM to match the given string.</p>

<h3><a name="c6e2326b6b774601b761538455918bbe"></a>MatchCharseq</h3>

<p>When a <code>MatchCharseq</code> AST node is matched, an instruction representing that operation is generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>q</span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">M</span><span class="s">A</span><span class="s">T</span><span class="s">C</span><span class="s">H</span><span class="s">_</span><span class="s">C</span><span class="s">H</span><span class="s">A</span><span class="s">R</span><span class="s">S</span><span class="s">E</span><span class="s">Q</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>M</span><span class>A</span><span class>T</span><span class>C</span><span class>H</span><span class>_</span><span class>C</span><span class>H</span><span class>A</span><span class>R</span><span class>S</span><span class>E</span><span class>Q</span><span class> </span><span class>&lt;</span><span class>x</span><span class>&gt;</span><span class>
</span></pre></div>

</div>

<p><a href="#df5dc1b5e5054e548d5c3606daba0d55"><em>MATCH_CHARSEQ</em></a> instructs the VM to match the given sequence of characters.</p>

<h3><a name="de0847d410c6495d9a8ee4e75a0423cc"></a>MatchAny</h3>

<p>When a <code>MatchAny</code> AST node is matched, an instruction representing that operation is generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>A</span><span class>n</span><span class>y</span><span class> </span><span class="nb">=</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">M</span><span class="s">A</span><span class="s">T</span><span class="s">C</span><span class="s">H</span><span class="s">_</span><span class="s">A</span><span class="s">N</span><span class="s">Y</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>M</span><span class>A</span><span class>T</span><span class>C</span><span class>H</span><span class>_</span><span class>A</span><span class>N</span><span class>Y</span><span class>
</span></pre></div>

</div>

<p><a href="#8f0fffeab7084a1d9b01d928be4878a8"><em>MATCH_ANY</em></a> instructs the VM to match any object.</p>

<h3><a name="1dc829aba4484ed399eb025d01ed843e"></a>MatchList</h3>

<p>When a <code>MatchList</code> AST node is matched, instructions changing the input stream are generated:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>codegenerator.rlmeta</li><li><span class="cp">rules</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">P</span><span class="s">U</span><span class="s">S</span><span class="s">H</span><span class="s">_</span><span class="s">S</span><span class="s">T</span><span class="s">R</span><span class="s">E</span><span class="s">A</span><span class="s">M</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">P</span><span class="s">O</span><span class="s">P</span><span class="s">_</span><span class="s">S</span><span class="s">T</span><span class="s">R</span><span class="s">E</span><span class="s">A</span><span class="s">M</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span></pre></div>

</div>

<p>In assembly-like notation it looks like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class> </span><span class>P</span><span class>U</span><span class>S</span><span class>H</span><span class>_</span><span class>S</span><span class>T</span><span class>R</span><span class>E</span><span class>A</span><span class>M</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>x</span><span class> </span><span class>i</span><span class>n</span><span class>s</span><span class>t</span><span class>r</span><span class>u</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class>s</span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>P</span><span class>O</span><span class>P</span><span class>_</span><span class>S</span><span class>T</span><span class>R</span><span class>E</span><span class>A</span><span class>M</span><span class>
</span></pre></div>

</div>

<p><a href="#fee2dcf573f04ac3a9e7cfd92adbe0c8"><em>PUSH_STREAM</em></a> instructs the VM to push the current input object onto the stack so that <code>x</code> instructions see it as the current input stream. <a href="#87a1eee2cfb94e1a9463a6561c226012"><em>POP_STREAM</em></a> instructs the VM to pop this input stream off the stack.</p>

<h3><a name="6cc83570ba674d71bccd12660fddefcc"></a>Example revisited</h3>

<p>The generated instructions for the <code>Scream</code> grammar from the beginning of the article should now make more sense:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>S</span><span class>c</span><span class>r</span><span class>e</span><span class>a</span><span class>m</span><span class> </span><span class>{</span><span class>
</span><span class> </span><span class> </span><span class>s</span><span class>c</span><span class>r</span><span class>e</span><span class>a</span><span class>m</span><span class> </span><span class="nb">=</span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class>x</span><span class>s</span><span class> </span><span class="s">"</span><span class="s">!</span><span class="s">!</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>u</span><span class>p</span><span class>p</span><span class>e</span><span class>r</span><span class>(</span><span class>x</span><span class>)</span><span class>
</span><span class>}</span><span class>
</span></pre></div>

</div>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">S</span><span class="nc">c</span><span class="nc">r</span><span class="nc">e</span><span class="nc">a</span><span class="nc">m</span><span class="p">(</span><span class="n">_</span><span class="n">G</span><span class="n">r</span><span class="n">a</span><span class="n">m</span><span class="n">m</span><span class="n">a</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">i</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">i</span><span class> </span><span class="o">=</span><span class> </span><span class="p">[</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class> </span><span class="o">=</span><span class> </span><span class="p">{</span><span class="p">}</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">I</span><span class="p">(</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">x</span><span class="o">=</span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class="p">,</span><span class> </span><span class="n">y</span><span class="o">=</span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">i</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">(</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">x</span><span class="p">,</span><span class> </span><span class="n">y</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">L</span><span class="nf">A</span><span class="nf">B</span><span class="nf">E</span><span class="nf">L</span><span class="p">(</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="p">[</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">]</span><span class> </span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">L</span><span class="n">A</span><span class="n">B</span><span class="n">E</span><span class="n">L</span><span class="p">(</span><span class="s1">'</span><span class="s1">s</span><span class="s1">c</span><span class="s1">r</span><span class="s1">e</span><span class="s1">a</span><span class="s1">m</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">P</span><span class="s1">U</span><span class="s1">S</span><span class="s1">H</span><span class="s1">_</span><span class="s1">S</span><span class="s1">C</span><span class="s1">O</span><span class="s1">P</span><span class="s1">E</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">L</span><span class="s1">I</span><span class="s1">S</span><span class="s1">T</span><span class="s1">_</span><span class="s1">S</span><span class="s1">T</span><span class="s1">A</span><span class="s1">R</span><span class="s1">T</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">L</span><span class="n">A</span><span class="n">B</span><span class="n">E</span><span class="n">L</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">B</span><span class="s1">A</span><span class="s1">C</span><span class="s1">K</span><span class="s1">T</span><span class="s1">R</span><span class="s1">A</span><span class="s1">C</span><span class="s1">K</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="mi">1</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">C</span><span class="s1">A</span><span class="s1">L</span><span class="s1">L</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="s1">'</span><span class="s1">c</span><span class="s1">h</span><span class="s1">a</span><span class="s1">r</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">L</span><span class="s1">I</span><span class="s1">S</span><span class="s1">T</span><span class="s1">_</span><span class="s1">A</span><span class="s1">P</span><span class="s1">P</span><span class="s1">E</span><span class="s1">N</span><span class="s1">D</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">C</span><span class="s1">O</span><span class="s1">M</span><span class="s1">M</span><span class="s1">I</span><span class="s1">T</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="mi">0</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">L</span><span class="n">A</span><span class="n">B</span><span class="n">E</span><span class="n">L</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">L</span><span class="s1">I</span><span class="s1">S</span><span class="s1">T</span><span class="s1">_</span><span class="s1">E</span><span class="s1">N</span><span class="s1">D</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">B</span><span class="s1">I</span><span class="s1">N</span><span class="s1">D</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="s1">'</span><span class="s1">x</span><span class="s1">s</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">A</span><span class="s1">C</span><span class="s1">T</span><span class="s1">I</span><span class="s1">O</span><span class="s1">N</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">:</span><span class> </span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">c</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="p">[</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">[</span><span class="s1">'</span><span class="s1">x</span><span class="s1">s</span><span class="s1">'</span><span class="p">]</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class="p">,</span><span class> </span><span class="s1">'</span><span class="s1">!</span><span class="s1">!</span><span class="s1">'</span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">P</span><span class="s1">O</span><span class="s1">P</span><span class="s1">_</span><span class="s1">S</span><span class="s1">C</span><span class="s1">O</span><span class="s1">P</span><span class="s1">E</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">R</span><span class="s1">E</span><span class="s1">T</span><span class="s1">U</span><span class="s1">R</span><span class="s1">N</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">L</span><span class="n">A</span><span class="n">B</span><span class="n">E</span><span class="n">L</span><span class="p">(</span><span class="s1">'</span><span class="s1">c</span><span class="s1">h</span><span class="s1">a</span><span class="s1">r</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">P</span><span class="s1">U</span><span class="s1">S</span><span class="s1">H</span><span class="s1">_</span><span class="s1">S</span><span class="s1">C</span><span class="s1">O</span><span class="s1">P</span><span class="s1">E</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">M</span><span class="s1">A</span><span class="s1">T</span><span class="s1">C</span><span class="s1">H</span><span class="s1">_</span><span class="s1">A</span><span class="s1">N</span><span class="s1">Y</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">B</span><span class="s1">I</span><span class="s1">N</span><span class="s1">D</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="s1">'</span><span class="s1">x</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">A</span><span class="s1">C</span><span class="s1">T</span><span class="s1">I</span><span class="s1">O</span><span class="s1">N</span><span class="s1">'</span><span class="p">,</span><span class> </span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">:</span><span class> </span><span class="n">u</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">[</span><span class="s1">'</span><span class="s1">x</span><span class="s1">'</span><span class="p">]</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">P</span><span class="s1">O</span><span class="s1">P</span><span class="s1">_</span><span class="s1">S</span><span class="s1">C</span><span class="s1">O</span><span class="s1">P</span><span class="s1">E</span><span class="s1">'</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">I</span><span class="p">(</span><span class="s1">'</span><span class="s1">R</span><span class="s1">E</span><span class="s1">T</span><span class="s1">U</span><span class="s1">R</span><span class="s1">N</span><span class="s1">'</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<p>There are two labels for the two rules in the grammar. Both blocks of instructions end with a <code>RETURN</code> instruction so that those functions can be called and returned from. The blocks are are also wrapped in <code>PUSH_SCOPE</code>/<code>POP_SCOPE</code> instructions so that variable bindings for the different calls happen in different scopes. Otherwise they would overwrite each other. The <code>scream</code> rule has a repetition and therefore also the <code>LIST_*</code> instructions. It also has generated label names (<code>0</code> and <code>1</code>) to create the loop. The <code>BIND</code> instructions bind the last result to a name in the current scope. The <code>ACTION</code> instructions have Python lambdas as first argument that are evaluated when there is a match. They get one argument which is the scope that was active when the action was defined.</p>

<p>Now let's move on to the implementation of the VM to understand how the execution of these instructions work.</p>

<h2><a name="e66f8cec6206420abe4736ae32849c53"></a>VM</h2>

<p>The VM is implemented as a single Python function with the following definition:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">r</span><span class="nf">l</span><span class="nf">m</span><span class="nf">e</span><span class="nf">t</span><span class="nf">a</span><span class="nf">_</span><span class="nf">v</span><span class="nf">m</span><span class="p">(</span><span class="n">i</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">r</span><span class="n">t</span><span class="n">_</span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">i</span><span class="cp">n</span><span class="cp">i</span><span class="cp">t</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">l</span><span class="cp">o</span><span class="cp">o</span><span class="cp">p</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span></pre></div>

</div>

<p>It takes a list of instructions to execute, a dictionary of labels, the name of the start rule, and the input stream. The init section sets up the VM state:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">init</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="o">=</span><span class> </span><span class="mi">0</span><span class>
</span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class="p">)</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">[</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">r</span><span class="n">t</span><span class="n">_</span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="p">]</span><span class>
</span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="p">[</span><span class="p">]</span><span class>
</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="mi">0</span><span class="p">,</span><span class> </span><span class="p">[</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class="p">,</span><span class> </span><span class="p">[</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class>
</span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class="p">,</span><span class> </span><span class="nb">t</span><span class="nb">u</span><span class="nb">p</span><span class="nb">l</span><span class="nb">e</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class> </span><span class="o">=</span><span class> </span><span class="p">{</span><span class="p">}</span><span class>
</span></pre></div>

</div>

<ul><li><code>label_counter</code> is used to generate unique <a href="#d7d285d9586b437ca7d7f51b5deb6193"><em>labels</em></a>.</li>

<li><code>last_action</code> stores the result of the last expression (which is always a semantic action).</li>

<li><code>pc</code> is the program counter that determines what instruction to execute. It is initialized to the position of the start rule.</li>

<li><code>call_backtrack_stack</code> keeps track of what <a href="#8e19cbb2e71c412f95c7e241a69f0901"><em>call</em></a> and <a href="#542906286e124874b2975d0ae23f034f"><em>backtrack</em></a> entries have been made.</li>

<li><code>stream</code> and <code>pos</code> is the topmost item in <code>stream_pos_stack</code> which keeps track of the current input stream and the position in it. (Input streams can be nested.) The topmost item is not stored in the list because it would make it slightly less convenient to modify.</li>

<li><code>scope</code> is the topmost item in <code>scope_stack</code> which keeps track of the current scope. The topmost item is not stored in the list because it would make it slightly less convenient to modify.</li>

<li><code>fail_message</code> stores the current fail message as a tuple representing arguments to string formatting. The fail message is not formatted immediately to avoid the extra speed cost of formatting if the message is not used. (Most fail messages are never used.)</li>

<li><code>latest_fail_message</code> and <code>latest_fail_pos</code> store the latest failure message and its position that will be presented to the user if all choices fail.</li>

<li><code>memo</code> is the memoization table that stores results of rule matches.</li>

</ul>

<p>In a picture it looks something like this:</p>

<div class="rliterate-image"><img src="image1.png" />

</div>

<div class="rliterate-image-text"><p>Overview of VM.</p>

</div>

<p>After the init section comes the VM loop:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">w</span><span class="k">h</span><span class="k">i</span><span class="k">l</span><span class="k">e</span><span class> </span><span class="bp">T</span><span class="bp">r</span><span class="bp">u</span><span class="bp">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">2</span><span class> </span><span class="o">=</span><span class> </span><span class="n">i</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="p">[</span><span class="n">p</span><span class="n">c</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">P</span><span class="s2">U</span><span class="s2">S</span><span class="s2">H</span><span class="s2">_</span><span class="s2">S</span><span class="s2">C</span><span class="s2">O</span><span class="s2">P</span><span class="s2">E</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">P</span><span class="cp">U</span><span class="cp">S</span><span class="cp">H</span><span class="cp">_</span><span class="cp">S</span><span class="cp">C</span><span class="cp">O</span><span class="cp">P</span><span class="cp">E</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">B</span><span class="s2">A</span><span class="s2">C</span><span class="s2">K</span><span class="s2">T</span><span class="s2">R</span><span class="s2">A</span><span class="s2">C</span><span class="s2">K</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">B</span><span class="cp">A</span><span class="cp">C</span><span class="cp">K</span><span class="cp">T</span><span class="cp">R</span><span class="cp">A</span><span class="cp">C</span><span class="cp">K</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">C</span><span class="s2">A</span><span class="s2">L</span><span class="s2">L</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">C</span><span class="cp">A</span><span class="cp">L</span><span class="cp">L</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">M</span><span class="s2">A</span><span class="s2">T</span><span class="s2">C</span><span class="s2">H</span><span class="s2">_</span><span class="s2">C</span><span class="s2">H</span><span class="s2">A</span><span class="s2">R</span><span class="s2">S</span><span class="s2">E</span><span class="s2">Q</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">M</span><span class="cp">A</span><span class="cp">T</span><span class="cp">C</span><span class="cp">H</span><span class="cp">_</span><span class="cp">C</span><span class="cp">H</span><span class="cp">A</span><span class="cp">R</span><span class="cp">S</span><span class="cp">E</span><span class="cp">Q</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">C</span><span class="s2">O</span><span class="s2">M</span><span class="s2">M</span><span class="s2">I</span><span class="s2">T</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">C</span><span class="cp">O</span><span class="cp">M</span><span class="cp">M</span><span class="cp">I</span><span class="cp">T</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">P</span><span class="s2">O</span><span class="s2">P</span><span class="s2">_</span><span class="s2">S</span><span class="s2">C</span><span class="s2">O</span><span class="s2">P</span><span class="s2">E</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">P</span><span class="cp">O</span><span class="cp">P</span><span class="cp">_</span><span class="cp">S</span><span class="cp">C</span><span class="cp">O</span><span class="cp">P</span><span class="cp">E</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">R</span><span class="s2">E</span><span class="s2">T</span><span class="s2">U</span><span class="s2">R</span><span class="s2">N</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">R</span><span class="cp">E</span><span class="cp">T</span><span class="cp">U</span><span class="cp">R</span><span class="cp">N</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">L</span><span class="s2">I</span><span class="s2">S</span><span class="s2">T</span><span class="s2">_</span><span class="s2">A</span><span class="s2">P</span><span class="s2">P</span><span class="s2">E</span><span class="s2">N</span><span class="s2">D</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">L</span><span class="cp">I</span><span class="cp">S</span><span class="cp">T</span><span class="cp">_</span><span class="cp">A</span><span class="cp">P</span><span class="cp">P</span><span class="cp">E</span><span class="cp">N</span><span class="cp">D</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">B</span><span class="s2">I</span><span class="s2">N</span><span class="s2">D</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">B</span><span class="cp">I</span><span class="cp">N</span><span class="cp">D</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">A</span><span class="s2">C</span><span class="s2">T</span><span class="s2">I</span><span class="s2">O</span><span class="s2">N</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">A</span><span class="cp">C</span><span class="cp">T</span><span class="cp">I</span><span class="cp">O</span><span class="cp">N</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">M</span><span class="s2">A</span><span class="s2">T</span><span class="s2">C</span><span class="s2">H</span><span class="s2">_</span><span class="s2">R</span><span class="s2">A</span><span class="s2">N</span><span class="s2">G</span><span class="s2">E</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">M</span><span class="cp">A</span><span class="cp">T</span><span class="cp">C</span><span class="cp">H</span><span class="cp">_</span><span class="cp">R</span><span class="cp">A</span><span class="cp">N</span><span class="cp">G</span><span class="cp">E</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">L</span><span class="s2">I</span><span class="s2">S</span><span class="s2">T</span><span class="s2">_</span><span class="s2">S</span><span class="s2">T</span><span class="s2">A</span><span class="s2">R</span><span class="s2">T</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">L</span><span class="cp">I</span><span class="cp">S</span><span class="cp">T</span><span class="cp">_</span><span class="cp">S</span><span class="cp">T</span><span class="cp">A</span><span class="cp">R</span><span class="cp">T</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">L</span><span class="s2">I</span><span class="s2">S</span><span class="s2">T</span><span class="s2">_</span><span class="s2">E</span><span class="s2">N</span><span class="s2">D</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">L</span><span class="cp">I</span><span class="cp">S</span><span class="cp">T</span><span class="cp">_</span><span class="cp">E</span><span class="cp">N</span><span class="cp">D</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">M</span><span class="s2">A</span><span class="s2">T</span><span class="s2">C</span><span class="s2">H</span><span class="s2">_</span><span class="s2">A</span><span class="s2">N</span><span class="s2">Y</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">M</span><span class="cp">A</span><span class="cp">T</span><span class="cp">C</span><span class="cp">H</span><span class="cp">_</span><span class="cp">A</span><span class="cp">N</span><span class="cp">Y</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">P</span><span class="s2">U</span><span class="s2">S</span><span class="s2">H</span><span class="s2">_</span><span class="s2">S</span><span class="s2">T</span><span class="s2">R</span><span class="s2">E</span><span class="s2">A</span><span class="s2">M</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">P</span><span class="cp">U</span><span class="cp">S</span><span class="cp">H</span><span class="cp">_</span><span class="cp">S</span><span class="cp">T</span><span class="cp">R</span><span class="cp">E</span><span class="cp">A</span><span class="cp">M</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">P</span><span class="s2">O</span><span class="s2">P</span><span class="s2">_</span><span class="s2">S</span><span class="s2">T</span><span class="s2">R</span><span class="s2">E</span><span class="s2">A</span><span class="s2">M</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">P</span><span class="cp">O</span><span class="cp">P</span><span class="cp">_</span><span class="cp">S</span><span class="cp">T</span><span class="cp">R</span><span class="cp">E</span><span class="cp">A</span><span class="cp">M</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">M</span><span class="s2">A</span><span class="s2">T</span><span class="s2">C</span><span class="s2">H</span><span class="s2">_</span><span class="s2">C</span><span class="s2">A</span><span class="s2">L</span><span class="s2">L</span><span class="s2">_</span><span class="s2">R</span><span class="s2">U</span><span class="s2">L</span><span class="s2">E</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">M</span><span class="cp">A</span><span class="cp">T</span><span class="cp">C</span><span class="cp">H</span><span class="cp">_</span><span class="cp">C</span><span class="cp">A</span><span class="cp">L</span><span class="cp">L</span><span class="cp">_</span><span class="cp">R</span><span class="cp">U</span><span class="cp">L</span><span class="cp">E</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">F</span><span class="s2">A</span><span class="s2">I</span><span class="s2">L</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">F</span><span class="cp">A</span><span class="cp">I</span><span class="cp">L</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">L</span><span class="s2">A</span><span class="s2">B</span><span class="s2">E</span><span class="s2">L</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">L</span><span class="cp">A</span><span class="cp">B</span><span class="cp">E</span><span class="cp">L</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">M</span><span class="s2">A</span><span class="s2">T</span><span class="s2">C</span><span class="s2">H</span><span class="s2">_</span><span class="s2">S</span><span class="s2">T</span><span class="s2">R</span><span class="s2">I</span><span class="s2">N</span><span class="s2">G</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">M</span><span class="cp">A</span><span class="cp">T</span><span class="cp">C</span><span class="cp">H</span><span class="cp">_</span><span class="cp">S</span><span class="cp">T</span><span class="cp">R</span><span class="cp">I</span><span class="cp">N</span><span class="cp">G</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">a</span><span class="k">i</span><span class="k">s</span><span class="k">e</span><span class> </span><span class="ne">E</span><span class="ne">x</span><span class="ne">c</span><span class="ne">e</span><span class="ne">p</span><span class="ne">t</span><span class="ne">i</span><span class="ne">o</span><span class="ne">n</span><span class="p">(</span><span class="s2">"</span><span class="s2">u</span><span class="s2">n</span><span class="s2">k</span><span class="s2">n</span><span class="s2">o</span><span class="s2">w</span><span class="s2">n</span><span class="s2"> </span><span class="s2">i</span><span class="s2">n</span><span class="s2">s</span><span class="s2">t</span><span class="s2">r</span><span class="s2">u</span><span class="s2">c</span><span class="s2">t</span><span class="s2">i</span><span class="s2">o</span><span class="s2">n</span><span class="s2"> </span><span class="s2">{</span><span class="s2">}</span><span class="s2">"</span><span class="o">.</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="p">(</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp"> </span><span class="cp">&lt;</span><span class="cp">&lt;</span><span class="cp">h</span><span class="cp">a</span><span class="cp">n</span><span class="cp">d</span><span class="cp">l</span><span class="cp">e</span><span class="cp"> </span><span class="cp">f</span><span class="cp">a</span><span class="cp">i</span><span class="cp">l</span><span class="cp">u</span><span class="cp">r</span><span class="cp">e</span><span class="cp">&gt;</span><span class="cp">&gt;</span><span class="cp">
</span></pre></div>

</div>

<p>First it fetches the instruction pointed to by the program counter. Then it has an if-chain with cases that handle the different instructions. If an instruction is not recognized, an exception is raised. Finally, it has code to handle a failure. Many instructions can fail and therefore this common code is at the end of the loop. If an instruction succeeds, it ends with a <code>continue</code> statement to ensure that the loop is started over immediately without executing the code to handle a failure.</p>

<p>The order in which the cases appear in the if-chain is important from a performance perspective. To get to the last case, all previous cases need to be tested, which takes time. So it is important that more common cases appear earlier in the if-chain. I did an instruction frequency analysis when RLMeta compiled itself to determine the most common instructions.</p>

<p>The VM makes use of two semantic actions that represent results from expressions: one for constant values and one for user defined functions:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">classes</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">C</span><span class="nc">o</span><span class="nc">n</span><span class="nc">s</span><span class="nc">t</span><span class="nc">a</span><span class="nc">n</span><span class="nc">t</span><span class="nc">S</span><span class="nc">e</span><span class="nc">m</span><span class="nc">a</span><span class="nc">n</span><span class="nc">t</span><span class="nc">i</span><span class="nc">c</span><span class="nc">A</span><span class="nc">c</span><span class="nc">t</span><span class="nc">i</span><span class="nc">o</span><span class="nc">n</span><span class="p">(</span><span class="nb">o</span><span class="nb">b</span><span class="nb">j</span><span class="nb">e</span><span class="nb">c</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">e</span><span class="nf">v</span><span class="nf">a</span><span class="nf">l</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class>
</span></pre></div>

</div>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">classes</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">U</span><span class="nc">s</span><span class="nc">e</span><span class="nc">r</span><span class="nc">S</span><span class="nc">e</span><span class="nc">m</span><span class="nc">a</span><span class="nc">n</span><span class="nc">t</span><span class="nc">i</span><span class="nc">c</span><span class="nc">A</span><span class="nc">c</span><span class="nc">t</span><span class="nc">i</span><span class="nc">o</span><span class="nc">n</span><span class="p">(</span><span class="nb">o</span><span class="nb">b</span><span class="nb">j</span><span class="nb">e</span><span class="nb">c</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">f</span><span class="n">n</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">f</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">f</span><span class="n">n</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">e</span><span class="nf">v</span><span class="nf">a</span><span class="nf">l</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">f</span><span class="n">n</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<p>Let's move on to the implementation of each instruction.</p>

<h3><a name="8f0fffeab7084a1d9b01d928be4878a8"></a>MATCH_ANY</h3>

<p>This instruction matches any object from the input stream:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">MATCH_ANY</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">a</span><span class="s2">n</span><span class="s2">y</span><span class="s2">"</span><span class="p">,</span><span class="p">)</span><span class>
</span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>The only time it fails is when the end of stream has been reached. In that case <code>fail_message</code> is set and no <code>continue</code> statement is executed to ensure that the code to <a href="#77edfc243204447ba84468c78f05d8e5"><em>handle this failure</em></a> is executed.</p>

<p>Otherwise, the last result is set to a semantic action that evaluates to the current input object. <code>pos</code> is incremented because one object has been consumed from the input stream. <code>pc</code> is incremented so that the next instruction is executed in the next loop iteration.</p>

<h3><a name="a8160d30b886418882ada3a2a884e580"></a>MATCH_STRING</h3>

<p>This instruction works like <a href="#8f0fffeab7084a1d9b01d928be4878a8"><em>MATCH_ANY</em></a> but also fails if the current input object is not the string that is given as the first argument:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">MATCH_STRING</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class> </span><span class="ow">o</span><span class="ow">r</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class> </span><span class="o">!</span><span class="o">=</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">{</span><span class="s2">!</span><span class="s2">r</span><span class="s2">}</span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">)</span><span class>
</span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<h3><a name="d8dcb57d5da141908f28f8c52983d1a6"></a>MATCH_RANGE</h3>

<p>This instruction works like <a href="#8f0fffeab7084a1d9b01d928be4878a8"><em>MATCH_ANY</em></a> but also fails if the current input object is not in the range given as arguments:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">MATCH_RANGE</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class> </span><span class="ow">o</span><span class="ow">r</span><span class> </span><span class="ow">n</span><span class="ow">o</span><span class="ow">t</span><span class> </span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class> </span><span class="o">&lt;</span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class> </span><span class="o">&lt;</span><span class="o">=</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">2</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">r</span><span class="s2">a</span><span class="s2">n</span><span class="s2">g</span><span class="s2">e</span><span class="s2"> </span><span class="s2">{</span><span class="s2">!</span><span class="s2">r</span><span class="s2">}</span><span class="s2">-</span><span class="s2">{</span><span class="s2">!</span><span class="s2">r</span><span class="s2">}</span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">2</span><span class="p">)</span><span class>
</span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<h3><a name="df5dc1b5e5054e548d5c3606daba0d55"></a>MATCH_CHARSEQ</h3>

<p>This instruction works as <a href="#8f0fffeab7084a1d9b01d928be4878a8"><em>MATCH_ANY</em></a> but also fails if the next input objects are not the characters in the string given as the first argument:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">MATCH_CHARSEQ</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">h</span><span class="n">a</span><span class="n">r</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class> </span><span class="ow">o</span><span class="ow">r</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class> </span><span class="o">!</span><span class="o">=</span><span class> </span><span class="n">c</span><span class="n">h</span><span class="n">a</span><span class="n">r</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">{</span><span class="s2">!</span><span class="s2">r</span><span class="s2">}</span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="n">c</span><span class="n">h</span><span class="n">a</span><span class="n">r</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">b</span><span class="k">r</span><span class="k">e</span><span class="k">a</span><span class="k">k</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<h3><a name="49ca0a2fa665466cb90c8c128d5cc835"></a>PUSH_SCOPE</h3>

<p>This instruction pushes a new scope onto the stack:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">PUSH_SCOPE</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">{</span><span class="p">}</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>Pushing a new scope onto the stack means moving the current scope to the list and assigning a new scope to the current scope. A scope is a dictionary mapping names to values.</p>

<h3><a name="b2510846e20d4cd08f9b0cd2dfb5c01d"></a>POP_SCOPE</h3>

<p>This instruction pops a scope off the stack:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">POP_SCOPE</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<h3><a name="1315305641224e4aa99dd00ec5b524b1"></a>BIND</h3>

<p>This instruction binds the last result to the given name in the current scope:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">BIND</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">[</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">]</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<h3><a name="738356fde86e4c7290b0f99850917ba8"></a>ACTION</h3>

<p>This instruction creates a user defined semantic action:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">ACTION</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">U</span><span class="n">s</span><span class="n">e</span><span class="n">r</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>The first argument is a Python lambda that expects a scope as argument.</p>

<h3><a name="d7d285d9586b437ca7d7f51b5deb6193"></a>LABEL</h3>

<p>This instruction creates a semantic action that evaluates to a unique number:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">LABEL</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class>
</span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>The label counter is incremented to make all labels unique.</p>

<h3><a name="b3562467300348028f04ae5034db0f34"></a>LIST_START</h3>

<p>This instruction creates a list for accumulating results:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">LIST_START</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">[</span><span class="p">]</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>The list is actually stored on the scope stack, but it could as well have been stored in the current scope under a special name.</p>

<h3><a name="b4aacd38dec8406c9db784e0823c3554"></a>LIST_APPEND</h3>

<p>This instruction appends the last result to the accumulation list:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">LIST_APPEND</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">)</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>The current scope is assumed to be an accumulation list.</p>

<h3><a name="9940cd44d7fe4777b1c12e335bac33ae"></a>LIST_END</h3>

<p>This instruction makes the accumulation list the last result:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">LIST_END</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">U</span><span class="n">s</span><span class="n">e</span><span class="n">r</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">x</span><span class="n">s</span><span class="p">:</span><span class> </span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">x</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">x</span><span class="n">s</span><span class="p">]</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>The current scope is assumed to be an accumulation list.</p>

<p>The accumulation list is turned into a semantic action that evaluates to a list where each semantic action in the accumulation list is also evaluated.</p>

<h3><a name="fee2dcf573f04ac3a9e7cfd92adbe0c8"></a>PUSH_STREAM</h3>

<p>This instruction pushes the current input object onto the stack:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">PUSH_STREAM</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class> </span><span class="ow">o</span><span class="ow">r</span><span class> </span><span class="ow">n</span><span class="ow">o</span><span class="ow">t</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">,</span><span class> </span><span class="nb">l</span><span class="nb">i</span><span class="nb">s</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">l</span><span class="s2">i</span><span class="s2">s</span><span class="s2">t</span><span class="s2">"</span><span class="p">,</span><span class="p">)</span><span class>
</span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="mi">0</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>It fails if the current input object is not a list. Only lists can become input streams.</p>

<p>Otherwise the current input object becomes the current input stream and the position is set to 0.</p>

<h3><a name="87a1eee2cfb94e1a9463a6561c226012"></a>POP_STREAM</h3>

<p>This instruction pops an input stream off the stack:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">POP_STREAM</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&lt;</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">e</span><span class="s2">n</span><span class="s2">d</span><span class="s2"> </span><span class="s2">o</span><span class="s2">f</span><span class="s2"> </span><span class="s2">l</span><span class="s2">i</span><span class="s2">s</span><span class="s2">t</span><span class="s2">"</span><span class="p">,</span><span class="p">)</span><span class>
</span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>It fails if not all items in the input stream have been consumed.</p>

<p>The position that is stored on the stack refers to the position where the input stream was found. This input stream has now been consumed so the position is therefore incremented.</p>

<h3><a name="34915cae29994179abbe19f2f7e4c267"></a>FAIL</h3>

<p>This instruction causes an explicit failure with the given message:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">FAIL</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">,</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<h3><a name="8e19cbb2e71c412f95c7e241a69f0901"></a>CALL</h3>

<p>This instruction calls the given rule:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">CALL</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">,</span><span class> </span><span class="nb">t</span><span class="nb">u</span><span class="nb">p</span><span class="nb">l</span><span class="nb">e</span><span class="p">(</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">x</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">[</span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="p">:</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">(</span><span class="n">p</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">[</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">]</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>It fist generates a key which consists of the name of the rule and the current position in the input stream. Example key: <code>('Label', (0, 1, 3))</code>. If this rule has matched at this position before, the memoized result is used. Otherwise a call is made.</p>

<p>The memoized result consists of the result from calling the rule and the state of the input stream. The memoized state is assigned to the VM state. The state of the input stream stored in the memoization table can not be modified, hence the <code>stream_pos_stack[:]</code>.</p>

<p>To make a call, the next program counter and the key is appended to the stack. The next program counter stores the position where to continue execution, and the key is used to store the result in the memoization table. See <a href="#d104aa6d6b8e43818f662498f6566e38"><em>RETURN</em></a> for how its done.</p>

<h3><a name="d42df29209bf475280ac510d9ae31182"></a>MATCH_CALL_RULE</h3>

<p>This instruction works like <a href="#8e19cbb2e71c412f95c7e241a69f0901"><em>CALL</em></a> but instead of getting the rule name from the instruction argument, it gets it from the input stream.</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">MATCH_CALL_RULE</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">a</span><span class="s2">n</span><span class="s2">y</span><span class="s2">"</span><span class="p">,</span><span class="p">)</span><span class>
</span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="nb">s</span><span class="nb">t</span><span class="nb">r</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="n">f</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="nb">t</span><span class="nb">u</span><span class="nb">p</span><span class="nb">l</span><span class="nb">e</span><span class="p">(</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">x</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">[</span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="p">:</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">(</span><span class="n">p</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">[</span><span class="n">f</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<h3><a name="d104aa6d6b8e43818f662498f6566e38"></a>RETURN</h3>

<p>This instruction makes execution continue at wherever it was before the current rule was called:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">RETURN</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">)</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="mi">0</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class="p">,</span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class> </span><span class="o">=</span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">[</span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class="p">]</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">+</span><span class="p">[</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">)</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>If the stack is empty, it means that the end of the <code>start_rule</code> has been reached. In that case, the result is returned from the VM. Otherwise the <code>pc</code> is set to the position that was pushed onto the stack. The memoization table is also filled in.</p>

<h3><a name="542906286e124874b2975d0ae23f034f"></a>BACKTRACK</h3>

<p>This instruction pushes a backtrack entry onto the stack:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">BACKTRACK</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">[</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">]</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">)</span><span class="p">,</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>A backtrack entry consists of the following:</p>

<ul><li>The position where to continue execution. The label is given as the fist argument to, so its position is looked up in the labels dictionary.</li>

<li>The position in the input stream where to try matching again.</li>

<li>The length of the stream stack.</li>

<li>The length of the scope stack.</li>

</ul>

<p>This information is enough to reset the state and try matching the next choice at the current position. Actual backtracking is done in <a href="#77edfc243204447ba84468c78f05d8e5"><em>Handling failure</em></a>.</p>

<h3><a name="5b99ed36fbde45989829fde6e17d4821"></a>COMMIT</h3>

<p>This instruction pops a backtrack entry off the stack:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">COMMIT</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">[</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">]</span><span class>
</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span></pre></div>

</div>

<p>The popped item is assumed to be a backtrack entry, and not a call entry.</p>

<p>The entry is ignored since the choice succeeded and no backtracking is needed.</p>

<h3><a name="77edfc243204447ba84468c78f05d8e5"></a>Handling failure</h3>

<p>The first step in handling a failure is to figure out if this failure should be presented to the user. It is done based on the position where the failure occurred. Failures occurring at later positions are assumed to be more relevant. The latest fail message is saved like this:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">handle failure</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="nb">t</span><span class="nb">u</span><span class="nb">p</span><span class="nb">l</span><span class="nb">e</span><span class="p">(</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">x</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class>
</span></pre></div>

</div>

<p>Next actual backtracking is done. Items are popped off the stack until a backtrack entry is found. Backtrack entries are tuples with 4 arguments.</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">handle failure</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">r</span><span class="n">y</span><span class> </span><span class="o">=</span><span class> </span><span class="nb">t</span><span class="nb">u</span><span class="nb">p</span><span class="nb">l</span><span class="nb">e</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class="k">w</span><span class="k">h</span><span class="k">i</span><span class="k">l</span><span class="k">e</span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">r</span><span class="n">y</span><span class> </span><span class="o">=</span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">r</span><span class="n">y</span><span class="p">)</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="mi">4</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">b</span><span class="k">r</span><span class="k">e</span><span class="k">a</span><span class="k">k</span><span class>
</span></pre></div>

</div>

<p>If no backtrack entry is found, matching failed completely and the user is notified with an exception. The latest fail message is passed to the exception along with the position and input stream where the failure occurred.</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">handle failure</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">r</span><span class="n">y</span><span class="p">)</span><span class> </span><span class="o">!</span><span class="o">=</span><span class> </span><span class="mi">4</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">i</span><span class="nb">s</span><span class="nb">t</span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">w</span><span class="k">h</span><span class="k">i</span><span class="k">l</span><span class="k">e</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">)</span><span class> </span><span class="o">&gt;</span><span class> </span><span class="mi">1</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">a</span><span class="k">i</span><span class="k">s</span><span class="k">e</span><span class> </span><span class="n">_</span><span class="n">M</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">E</span><span class="n">r</span><span class="n">r</span><span class="n">o</span><span class="n">r</span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">,</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<p>The exception has a <code>describe</code> method that formats the error nicely for the user:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">classes</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">M</span><span class="nc">a</span><span class="nc">t</span><span class="nc">c</span><span class="nc">h</span><span class="nc">E</span><span class="nc">r</span><span class="nc">r</span><span class="nc">o</span><span class="nc">r</span><span class="p">(</span><span class="ne">E</span><span class="ne">x</span><span class="ne">c</span><span class="ne">e</span><span class="ne">p</span><span class="ne">t</span><span class="ne">i</span><span class="ne">o</span><span class="ne">n</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="ne">E</span><span class="ne">x</span><span class="ne">c</span><span class="ne">e</span><span class="ne">p</span><span class="ne">t</span><span class="ne">i</span><span class="ne">o</span><span class="ne">n</span><span class="o">.</span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">d</span><span class="nf">e</span><span class="nf">s</span><span class="nf">c</span><span class="nf">r</span><span class="nf">i</span><span class="nf">b</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="nb">b</span><span class="nb">a</span><span class="nb">s</span><span class="nb">e</span><span class="nb">s</span><span class="nb">t</span><span class="nb">r</span><span class="nb">i</span><span class="nb">n</span><span class="nb">g</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="p">:</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">s</span><span class="n">p</span><span class="n">l</span><span class="n">i</span><span class="n">t</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class="n">s</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">:</span><span class="p">]</span><span class="o">.</span><span class="n">s</span><span class="n">p</span><span class="n">l</span><span class="n">i</span><span class="n">t</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class="n">s</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">a</span><span class="n">r</span><span class="n">r</span><span class="n">o</span><span class="n">w</span><span class="p">(</span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2">[</span><span class="s2">"</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="p">:</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2"> </span><span class="s2"> </span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="nb">r</span><span class="nb">e</span><span class="nb">p</span><span class="nb">r</span><span class="p">(</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class="p">)</span><span class="p">,</span><span class> </span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2"> </span><span class="s2"> </span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="nb">r</span><span class="nb">e</span><span class="nb">p</span><span class="nb">r</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class="p">,</span><span class> </span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">a</span><span class="n">r</span><span class="n">r</span><span class="n">o</span><span class="n">w</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="p">]</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2"> </span><span class="s2"> </span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="nb">r</span><span class="nb">e</span><span class="nb">p</span><span class="nb">r</span><span class="p">(</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">,</span><span class> </span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2">]</span><span class="s2">"</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">E</span><span class="s2">r</span><span class="s2">r</span><span class="s2">o</span><span class="s2">r</span><span class="s2">:</span><span class="s2"> </span><span class="s2">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="p">(</span><span class="o">*</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="se">\</span><span class="se">n</span><span class="s2">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">_</span><span class="nf">c</span><span class="nf">o</span><span class="nf">n</span><span class="nf">t</span><span class="nf">e</span><span class="nf">x</span><span class="nf">t</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="o">*</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">s</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="s2">"</span><span class="s2">&gt;</span><span class="s2"> </span><span class="s2">{</span><span class="s2">}</span><span class="se">\</span><span class="se">n</span><span class="s2">"</span><span class="o">.</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="o">.</span><span class="n">j</span><span class="n">o</span><span class="n">i</span><span class="n">n</span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">s</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">_</span><span class="nf">a</span><span class="nf">r</span><span class="nf">r</span><span class="nf">o</span><span class="nf">w</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="n">g</span><span class="n">h</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="s2">"</span><span class="s2">-</span><span class="s2">-</span><span class="s2">{</span><span class="s2">}</span><span class="s2">^</span><span class="se">\</span><span class="se">n</span><span class="s2">"</span><span class="o">.</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2">-</span><span class="s2">"</span><span class="o">*</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="n">g</span><span class="n">h</span><span class="n">t</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<p>If the input stream is a string, the character where the failure occurred is highlighted with a few context lines around it like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>:</span><span class>x</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>*</span><span class>:</span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>-</span><span class>&gt;</span><span class> </span><span class>[</span><span class>"</span><span class>S</span><span class>c</span><span class>o</span><span class>p</span><span class>e</span><span class>"</span><span class> </span><span class>[</span><span class>"</span><span class>A</span><span class>n</span><span class>d</span><span class>"</span><span class> </span><span class>x</span><span class> </span><span class>~</span><span class>x</span><span class>s</span><span class>]</span><span class>]</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class> </span><span class>=</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>1</span><span class>:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>'</span><span class>:</span><span class>'</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>:</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>-</span><span class>&gt;</span><span class> </span><span class>[</span><span class>"</span><span class>B</span><span class>i</span><span class>n</span><span class>d</span><span class>"</span><span class> </span><span class>y</span><span class> </span><span class>x</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>1</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>-</span><span class>-</span><span class>-</span><span class>^</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>1</span><span class> </span><span class>=</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class>:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>'</span><span class>*</span><span class>'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>-</span><span class>&gt;</span><span class> </span><span class>[</span><span class>"</span><span class>S</span><span class>t</span><span class>a</span><span class>r</span><span class>"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class>:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>'</span><span class>?</span><span class>'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>-</span><span class>&gt;</span><span class> </span><span class>[</span><span class>"</span><span class>O</span><span class>r</span><span class>"</span><span class> </span><span class>x</span><span class> </span><span class>[</span><span class>"</span><span class>A</span><span class>n</span><span class>d</span><span class>"</span><span class>]</span><span class>]</span><span class>
</span><span class>E</span><span class>r</span><span class>r</span><span class>o</span><span class>r</span><span class>:</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>e</span><span class>c</span><span class>t</span><span class>e</span><span class>d</span><span class> </span><span class>'</span><span class>]</span><span class>'</span><span class>
</span></pre></div>

</div>

<p>If the input stream is a list, the whole list is printed as context, and the item where the failure occurred is highlighted like this:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>&gt;</span><span class> </span><span class>[</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>B</span><span class>i</span><span class>n</span><span class>d</span><span class>'</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>x</span><span class>'</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class>[</span><span class>'</span><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>R</span><span class>u</span><span class>l</span><span class>e</span><span class>'</span><span class>,</span><span class> </span><span class>'</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>'</span><span class>]</span><span class>,</span><span class>
</span><span class>&gt;</span><span class> </span><span class> </span><span class> </span><span class>'</span><span class>f</span><span class>o</span><span class>o</span><span class>'</span><span class>,</span><span class>
</span><span class>-</span><span class>-</span><span class>-</span><span class>-</span><span class>^</span><span class>
</span><span class>&gt;</span><span class> </span><span class>]</span><span class>
</span><span class>E</span><span class>r</span><span class>r</span><span class>o</span><span class>r</span><span class>:</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>e</span><span class>c</span><span class>t</span><span class>e</span><span class>d</span><span class> </span><span class>e</span><span class>n</span><span class>d</span><span class> </span><span class>o</span><span class>f</span><span class> </span><span class>l</span><span class>i</span><span class>s</span><span class>t</span><span class>
</span></pre></div>

</div>

<p>Finally the state of the VM is restored:</p>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>support.py</li><li><span class="cp">vm</span>

</li><li><span class="cp">loop</span>

</li><li><span class="cp">handle failure</span>

</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="p">(</span><span class="n">p</span><span class="n">c</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">)</span><span class> </span><span class="o">=</span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">r</span><span class="n">y</span><span class>
</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">)</span><span class> </span><span class="o">&gt;</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">]</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class>
</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="p">:</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">]</span><span class>
</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">)</span><span class> </span><span class="o">&gt;</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">]</span><span class>
</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="p">:</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">]</span><span class>
</span></pre></div>

</div>

<p>The program counter and the position is restored from the backtrack entry. The stack lengths are used to restore the stacks. A failure might have occurred deeper in the input stream than when the backtrack entry was created. Similarly for the scope. Those stacks are therefore restored so they have the same length as in the backtrack entry.</p>

<h3><a name="95ffb1abf59546e1972c78ee7159b758"></a>Optimizations</h3>

<p>The <code>rlmeta_vm</code> function is heavily optimized for speed. Here are a few choices made:</p>

<ul><li>It is implemented as a single function to avoid function calls.</li>

<li>It handles instructions in a specific order based on how often they are used.</li>

<li>It duplicates code to avoid some Python instructions.<ul><li>Most instructions increments the program counter. That could be done always, and then only instructions that need to do something other than incrementing could do that. But in those cases, some extra Python instructions would be executed.</li>

<li>The code for the two call instructions have some similar code.</li>

<li>All instructions use <code>continue</code> statements instead of the failure handling checking if a fail message was actually set.</li>

</ul>

</li>

</ul>

<p>These optimizations makes the VM faster and also a little harder to maintain. But it's a trade off.</p>

<h2><a name="2e3ad1de345642658be2e5910ab5be4e"></a>Note on size</h2>

<p>Compared to the optimized version, the VM based version is a little bigger:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class> </span><span class> </span><span class> </span><span class>5</span><span class>3</span><span class> </span><span class>p</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>r</span><span class>.</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class>7</span><span class>4</span><span class> </span><span class>c</span><span class>o</span><span class>d</span><span class>e</span><span class>g</span><span class>e</span><span class>n</span><span class>e</span><span class>r</span><span class>a</span><span class>t</span><span class>o</span><span class>r</span><span class>.</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>
</span><span class> </span><span class> </span><span class>3</span><span class>0</span><span class>2</span><span class> </span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class>4</span><span class>5</span><span class> </span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class>
</span><span class> </span><span class> </span><span class>4</span><span class>7</span><span class>4</span><span class> </span><span class>t</span><span class>o</span><span class>t</span><span class>a</span><span class>l</span><span class>
</span></pre></div>

</div>

<p>That is 474 lines of code compared to 429 in the optimized version. The <code>rlmeta_vm</code> function is quite optimized and therefore is slightly longer than it could have been. But 474 lines is still small.</p>

<h2><a name="c490369b053247c0b7761f324658aa15"></a>Note on performance</h2>

<p>The VM based version also turns out to be faster than the <a href="../../writing/optimizing-rlmeta/index.html#3616eda03f5c40458ac9439def097739">optimized version</a>:</p>

<div class="rliterate-image"><img src="image2.png" />

</div>

<div class="rliterate-image-text"><p></p>

</div>

<p>Being faster was not a goal with the VM based version, but it's and interesting side effect. Perhaps more programming problems would benefit from a VM based approach? There are probably also more optimizations that can be made to the instructions to make the VM even faster.</p>

<h2><a name="7e7b4c5318ff4c849c6e98e9ddeaacf0"></a>Code listings for RLMeta</h2>

<h3><a name="53f0708b231b468d844291df3fe17cf2"></a>parser.rlmeta</h3>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>P</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>r</span><span class> </span><span class>{</span><span class>
</span><span class> </span><span class> </span><span class>g</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">{</span><span class="sc">'</span><span class> </span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class="nc">*</span><span class="nb">:</span><span class>y</span><span class>s</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">}</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">G</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="nc">~</span><span class>y</span><span class>s</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>r</span><span class>u</span><span class>l</span><span class>e</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">=</span><span class="sc">'</span><span class> </span><span class>c</span><span class>h</span><span class>o</span><span class>i</span><span class>c</span><span class>e</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">R</span><span class="s">u</span><span class="s">l</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class>y</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>c</span><span class>h</span><span class>o</span><span class>i</span><span class>c</span><span class>e</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>(</span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">|</span><span class="sc">'</span><span class>)</span><span class="nc">?</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>q</span><span class>u</span><span class>e</span><span class>n</span><span class>c</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class>(</span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">|</span><span class="sc">'</span><span class> </span><span class>s</span><span class>e</span><span class>q</span><span class>u</span><span class>e</span><span class>n</span><span class>c</span><span class>e</span><span class>)</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">O</span><span class="s">r</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>s</span><span class>e</span><span class>q</span><span class>u</span><span class>e</span><span class>n</span><span class>c</span><span class>e</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">c</span><span class="s">o</span><span class="s">p</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">A</span><span class="s">n</span><span class="s">d</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>1</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">:</span><span class="sc">'</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">B</span><span class="s">i</span><span class="s">n</span><span class="s">d</span><span class="s">"</span><span class> </span><span class>y</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>1</span><span class>
</span><span class> </span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>1</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">*</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">t</span><span class="s">a</span><span class="s">r</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">?</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">O</span><span class="s">r</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">A</span><span class="s">n</span><span class="s">d</span><span class="s">"</span><span class>]</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">!</span><span class="sc">'</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">N</span><span class="s">o</span><span class="s">t</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">%</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">C</span><span class="s">a</span><span class="s">l</span><span class="s">l</span><span class="s">R</span><span class="s">u</span><span class="s">l</span><span class="s">e</span><span class="s">"</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">#</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">L</span><span class="s">a</span><span class="s">b</span><span class="s">e</span><span class="s">l</span><span class="s">"</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class>
</span><span class> </span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class>2</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">-</span><span class="sc">&gt;</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">e</span><span class="s">m</span><span class="s">a</span><span class="s">n</span><span class="s">t</span><span class="s">i</span><span class="s">c</span><span class="s">A</span><span class="s">c</span><span class="s">t</span><span class="s">i</span><span class="s">o</span><span class="s">n</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class="nc">!</span><span class>(</span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">=</span><span class="sc">'</span><span class>)</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">R</span><span class="s">u</span><span class="s">l</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class="sc">'</span><span class="sc">-</span><span class="sc">'</span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">R</span><span class="s">a</span><span class="s">n</span><span class="s">g</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class>y</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">S</span><span class="s">t</span><span class="s">r</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>q</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">C</span><span class="s">h</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">e</span><span class="s">q</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">.</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">A</span><span class="s">n</span><span class="s">y</span><span class="s">"</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">(</span><span class="sc">'</span><span class> </span><span class>c</span><span class>h</span><span class>o</span><span class>i</span><span class>c</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">)</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">[</span><span class="sc">'</span><span class> </span><span class>e</span><span class>x</span><span class>p</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">]</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">L</span><span class="s">i</span><span class="s">s</span><span class="s">t</span><span class="s">"</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">A</span><span class="s">n</span><span class="s">d</span><span class="s">"</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">S</span><span class="s">t</span><span class="s">r</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">[</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">]</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">L</span><span class="s">i</span><span class="s">s</span><span class="s">t</span><span class="s">"</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">{</span><span class="sc">'</span><span class> </span><span class>b</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">}</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">"</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">(</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>y</span><span class>s</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">)</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">F</span><span class="s">n</span><span class="s">C</span><span class="s">a</span><span class="s">l</span><span class="s">l</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="nc">~</span><span class>y</span><span class>s</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">V</span><span class="s">a</span><span class="s">r</span><span class="s">L</span><span class="s">o</span><span class="s">o</span><span class="s">k</span><span class="s">u</span><span class="s">p</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">~</span><span class="sc">'</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">L</span><span class="s">i</span><span class="s">s</span><span class="s">t</span><span class="s">I</span><span class="s">t</span><span class="s">e</span><span class="s">m</span><span class="s">S</span><span class="s">p</span><span class="s">l</span><span class="s">i</span><span class="s">c</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>x</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class>
</span><span class> </span><span class> </span><span class>b</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">&gt;</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">I</span><span class="s">n</span><span class="s">d</span><span class="s">e</span><span class="s">n</span><span class="s">t</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">"</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class="sc">'</span><span class="sc">&lt;</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">D</span><span class="s">e</span><span class="s">d</span><span class="s">e</span><span class="s">n</span><span class="s">t</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">"</span><span class>]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>h</span><span class>o</span><span class>s</span><span class>t</span><span class>E</span><span class>x</span><span class>p</span><span class>r</span><span class>
</span><span class> </span><span class> </span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class>(</span><span class="nc">!</span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class>i</span><span class>n</span><span class>n</span><span class>e</span><span class>r</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class>)</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>j</span><span class>o</span><span class>i</span><span class>n</span><span class>(</span><span class>x</span><span class>s</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>q</span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class>(</span><span class="nc">!</span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class>i</span><span class>n</span><span class>n</span><span class>e</span><span class>r</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class>)</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>j</span><span class>o</span><span class>i</span><span class>n</span><span class>(</span><span class>x</span><span class>s</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>c</span><span class>h</span><span class>a</span><span class>r</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class> </span><span class="nc">!</span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class>i</span><span class>n</span><span class>n</span><span class>e</span><span class>r</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class> </span><span class> </span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class>i</span><span class>n</span><span class>n</span><span class>e</span><span class>r</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">\</span><span class="sc">'</span><span class> </span><span class>e</span><span class>s</span><span class>c</span><span class>a</span><span class>p</span><span class>e</span><span class> </span><span class="nb">|</span><span class> </span><span class="nc">.</span><span class>
</span><span class> </span><span class> </span><span class>e</span><span class>s</span><span class>c</span><span class>a</span><span class>p</span><span class>e</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">\</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">\</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">'</span><span class="sc">'</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="s">'</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">"</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">"</span><span class="s">"</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">n</span><span class="sc">'</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>S</span><span class>t</span><span class>a</span><span class>r</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>j</span><span class>o</span><span class>i</span><span class>n</span><span class>(</span><span class>[</span><span class>x</span><span class> </span><span class="nc">~</span><span class>x</span><span class>s</span><span class>]</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>S</span><span class>t</span><span class>a</span><span class>r</span><span class>t</span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="sc">a</span><span class="sc">'</span><span class="nc">-</span><span class="sc">'</span><span class="sc">z</span><span class="sc">'</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">A</span><span class="sc">'</span><span class="nc">-</span><span class="sc">'</span><span class="sc">Z</span><span class="sc">'</span><span class>
</span><span class> </span><span class> </span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="sc">'</span><span class="sc">a</span><span class="sc">'</span><span class="nc">-</span><span class="sc">'</span><span class="sc">z</span><span class="sc">'</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">A</span><span class="sc">'</span><span class="nc">-</span><span class="sc">'</span><span class="sc">Z</span><span class="sc">'</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="sc">0</span><span class="sc">'</span><span class="nc">-</span><span class="sc">'</span><span class="sc">9</span><span class="sc">'</span><span class>
</span><span class> </span><span class> </span><span class>s</span><span class>p</span><span class>a</span><span class>c</span><span class>e</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>(</span><span class="sc">'</span><span class="sc"> </span><span class="sc">'</span><span class> </span><span class="nb">|</span><span class> </span><span class="sc">'</span><span class="se">\</span><span class="se">n</span><span class="sc">'</span><span class>)</span><span class="nc">*</span><span class>
</span><span class>}</span><span class>
</span></pre></div>

</div>

<h3><a name="74bf51f7e8d94bcba1747edb477137ef"></a>codegenerator.rlmeta</h3>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class>C</span><span class>o</span><span class>d</span><span class>e</span><span class>G</span><span class>e</span><span class>n</span><span class>e</span><span class>r</span><span class>a</span><span class>t</span><span class>o</span><span class>r</span><span class> </span><span class>{</span><span class>
</span><span class> </span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>[</span><span class>%</span><span class="nb">:</span><span class>x</span><span class>]</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class>p</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>r</span><span class>e</span><span class>p</span><span class>r</span><span class>(</span><span class>x</span><span class>)</span><span class>
</span><span class> </span><span class> </span><span class>G</span><span class>r</span><span class>a</span><span class>m</span><span class>m</span><span class>a</span><span class>r</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nc">*</span><span class="nb">:</span><span class>y</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">c</span><span class="s">l</span><span class="s">a</span><span class="s">s</span><span class="s">s</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">_</span><span class="s">G</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">)</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">d</span><span class="s">e</span><span class="s">f</span><span class="s"> </span><span class="s">_</span><span class="s">_</span><span class="s">i</span><span class="s">n</span><span class="s">i</span><span class="s">t</span><span class="s">_</span><span class="s">_</span><span class="s">(</span><span class="s">s</span><span class="s">e</span><span class="s">l</span><span class="s">f</span><span class="s">)</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">s</span><span class="s">e</span><span class="s">l</span><span class="s">f</span><span class="s">.</span><span class="s">_</span><span class="s">i</span><span class="s">n</span><span class="s">s</span><span class="s">t</span><span class="s">r</span><span class="s">u</span><span class="s">c</span><span class="s">t</span><span class="s">i</span><span class="s">o</span><span class="s">n</span><span class="s">s</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">i</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">[</span><span class="s">]</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">s</span><span class="s">e</span><span class="s">l</span><span class="s">f</span><span class="s">.</span><span class="s">_</span><span class="s">l</span><span class="s">a</span><span class="s">b</span><span class="s">e</span><span class="s">l</span><span class="s">s</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">l</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">{</span><span class="s">}</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">d</span><span class="s">e</span><span class="s">f</span><span class="s"> </span><span class="s">I</span><span class="s">(</span><span class="s">n</span><span class="s">a</span><span class="s">m</span><span class="s">e</span><span class="s">,</span><span class="s"> </span><span class="s">x</span><span class="s">=</span><span class="s">N</span><span class="s">o</span><span class="s">n</span><span class="s">e</span><span class="s">,</span><span class="s"> </span><span class="s">y</span><span class="s">=</span><span class="s">N</span><span class="s">o</span><span class="s">n</span><span class="s">e</span><span class="s">)</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">i</span><span class="s">.</span><span class="s">a</span><span class="s">p</span><span class="s">p</span><span class="s">e</span><span class="s">n</span><span class="s">d</span><span class="s">(</span><span class="s">(</span><span class="s">n</span><span class="s">a</span><span class="s">m</span><span class="s">e</span><span class="s">,</span><span class="s"> </span><span class="s">x</span><span class="s">,</span><span class="s"> </span><span class="s">y</span><span class="s">)</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">d</span><span class="s">e</span><span class="s">f</span><span class="s"> </span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">n</span><span class="s">a</span><span class="s">m</span><span class="s">e</span><span class="s">)</span><span class="s">:</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>&gt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">l</span><span class="s">[</span><span class="s">n</span><span class="s">a</span><span class="s">m</span><span class="s">e</span><span class="s">]</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">l</span><span class="s">e</span><span class="s">n</span><span class="s">(</span><span class="s">i</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>y</span><span class>s</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>&lt;</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>R</span><span class>u</span><span class>l</span><span class>e</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>y</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">R</span><span class="s">E</span><span class="s">T</span><span class="s">U</span><span class="s">R</span><span class="s">N</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>O</span><span class>r</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class>O</span><span class>r</span><span class="nb">:</span><span class>y</span><span class> </span><span class>#</span><span class="nb">:</span><span class>a</span><span class> </span><span class>#</span><span class="nb">:</span><span class>b</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">B</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">T</span><span class="s">R</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">C</span><span class="s">O</span><span class="s">M</span><span class="s">M</span><span class="s">I</span><span class="s">T</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>y</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>
</span><span class> </span><span class> </span><span class>S</span><span class>c</span><span class>o</span><span class>p</span><span class>e</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">P</span><span class="s">U</span><span class="s">S</span><span class="s">H</span><span class="s">_</span><span class="s">S</span><span class="s">C</span><span class="s">O</span><span class="s">P</span><span class="s">E</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">P</span><span class="s">O</span><span class="s">P</span><span class="s">_</span><span class="s">S</span><span class="s">C</span><span class="s">O</span><span class="s">P</span><span class="s">E</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>A</span><span class>n</span><span class>d</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nc">*</span><span class>
</span><span class> </span><span class> </span><span class>B</span><span class>i</span><span class>n</span><span class>d</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class>y</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">B</span><span class="s">I</span><span class="s">N</span><span class="s">D</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>S</span><span class>t</span><span class>a</span><span class>r</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class>#</span><span class="nb">:</span><span class>a</span><span class> </span><span class>#</span><span class="nb">:</span><span class>b</span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">L</span><span class="s">I</span><span class="s">S</span><span class="s">T</span><span class="s">_</span><span class="s">S</span><span class="s">T</span><span class="s">A</span><span class="s">R</span><span class="s">T</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">B</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">T</span><span class="s">R</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">L</span><span class="s">I</span><span class="s">S</span><span class="s">T</span><span class="s">_</span><span class="s">A</span><span class="s">P</span><span class="s">P</span><span class="s">E</span><span class="s">N</span><span class="s">D</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">C</span><span class="s">O</span><span class="s">M</span><span class="s">M</span><span class="s">I</span><span class="s">T</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">L</span><span class="s">I</span><span class="s">S</span><span class="s">T</span><span class="s">_</span><span class="s">E</span><span class="s">N</span><span class="s">D</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>N</span><span class>o</span><span class>t</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class>#</span><span class="nb">:</span><span class>a</span><span class> </span><span class>#</span><span class="nb">:</span><span class>b</span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">B</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">T</span><span class="s">R</span><span class="s">A</span><span class="s">C</span><span class="s">K</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">C</span><span class="s">O</span><span class="s">M</span><span class="s">M</span><span class="s">I</span><span class="s">T</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>a</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">F</span><span class="s">A</span><span class="s">I</span><span class="s">L</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">'</span><span class="s">n</span><span class="s">o</span><span class="s"> </span><span class="s">m</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s"> </span><span class="s">e</span><span class="s">x</span><span class="s">p</span><span class="s">e</span><span class="s">c</span><span class="s">t</span><span class="s">e</span><span class="s">d</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>b</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>C</span><span class>a</span><span class>l</span><span class>l</span><span class>R</span><span class>u</span><span class>l</span><span class>e</span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">M</span><span class="s">A</span><span class="s">T</span><span class="s">C</span><span class="s">H</span><span class="s">_</span><span class="s">C</span><span class="s">A</span><span class="s">L</span><span class="s">L</span><span class="s">_</span><span class="s">R</span><span class="s">U</span><span class="s">L</span><span class="s">E</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>L</span><span class>a</span><span class>b</span><span class>e</span><span class>l</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">L</span><span class="s">A</span><span class="s">B</span><span class="s">E</span><span class="s">L</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>S</span><span class>e</span><span class>m</span><span class>a</span><span class>n</span><span class>t</span><span class>i</span><span class>c</span><span class>A</span><span class>c</span><span class>t</span><span class>i</span><span class>o</span><span class>n</span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">A</span><span class="s">C</span><span class="s">T</span><span class="s">I</span><span class="s">O</span><span class="s">N</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">l</span><span class="s">a</span><span class="s">m</span><span class="s">b</span><span class="s">d</span><span class="s">a</span><span class="s"> </span><span class="s">s</span><span class="s">c</span><span class="s">o</span><span class="s">p</span><span class="s">e</span><span class="s">:</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>S</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class>
</span><span class> </span><span class> </span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class>
</span><span class> </span><span class> </span><span class>B</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>e</span><span class>r</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class>s</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">_</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">.</span><span class="s">c</span><span class="s">r</span><span class="s">e</span><span class="s">a</span><span class="s">t</span><span class="s">e</span><span class="s">(</span><span class="s">[</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">]</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>I</span><span class>n</span><span class>d</span><span class>e</span><span class>n</span><span class>t</span><span class>B</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>e</span><span class>r</span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">_</span><span class="s">I</span><span class="s">n</span><span class="s">d</span><span class="s">e</span><span class="s">n</span><span class="s">t</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>D</span><span class>e</span><span class>d</span><span class>e</span><span class>n</span><span class>t</span><span class>B</span><span class>u</span><span class>i</span><span class>l</span><span class>d</span><span class>e</span><span class>r</span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">_</span><span class="s">D</span><span class="s">e</span><span class="s">d</span><span class="s">e</span><span class="s">n</span><span class="s">t</span><span class="s">B</span><span class="s">u</span><span class="s">i</span><span class="s">l</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>F</span><span class>n</span><span class>C</span><span class>a</span><span class>l</span><span class>l</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class="nc">.</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class>s</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>y</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>V</span><span class>a</span><span class>r</span><span class>L</span><span class>o</span><span class>o</span><span class>k</span><span class>u</span><span class>p</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">s</span><span class="s">c</span><span class="s">o</span><span class="s">p</span><span class="s">e</span><span class="s">[</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">]</span><span class="s">.</span><span class="s">e</span><span class="s">v</span><span class="s">a</span><span class="s">l</span><span class="s">(</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class>x</span><span class> </span><span class>x</span><span class>s</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class="nc">*</span><span class="nb">:</span><span class>x</span><span class>s</span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">(</span><span class="s">"</span><span class> </span><span class>x</span><span class>s</span><span class> </span><span class="s">"</span><span class="s">[</span><span class="s">]</span><span class="s">)</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class>I</span><span class>t</span><span class>e</span><span class>m</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>[</span><span class="s">"</span><span class="s">L</span><span class="s">i</span><span class="s">s</span><span class="s">t</span><span class="s">I</span><span class="s">t</span><span class="s">e</span><span class="s">m</span><span class="s">S</span><span class="s">p</span><span class="s">l</span><span class="s">i</span><span class="s">c</span><span class="s">e</span><span class="s">"</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class>]</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class> </span><span class> </span><span class="s">"</span><span class="s">+</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">|</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">[</span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">]</span><span class="s">+</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>R</span><span class>u</span><span class>l</span><span class>e</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">C</span><span class="s">A</span><span class="s">L</span><span class="s">L</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>R</span><span class>a</span><span class>n</span><span class>g</span><span class>e</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">M</span><span class="s">A</span><span class="s">T</span><span class="s">C</span><span class="s">H</span><span class="s">_</span><span class="s">R</span><span class="s">A</span><span class="s">N</span><span class="s">G</span><span class="s">E</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>y</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>S</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">M</span><span class="s">A</span><span class="s">T</span><span class="s">C</span><span class="s">H</span><span class="s">_</span><span class="s">S</span><span class="s">T</span><span class="s">R</span><span class="s">I</span><span class="s">N</span><span class="s">G</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>C</span><span class>h</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>q</span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>p</span><span class>y</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">M</span><span class="s">A</span><span class="s">T</span><span class="s">C</span><span class="s">H</span><span class="s">_</span><span class="s">C</span><span class="s">H</span><span class="s">A</span><span class="s">R</span><span class="s">S</span><span class="s">E</span><span class="s">Q</span><span class="s">'</span><span class="s">,</span><span class="s"> </span><span class="s">"</span><span class> </span><span class>x</span><span class> </span><span class="s">"</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>A</span><span class>n</span><span class>y</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">M</span><span class="s">A</span><span class="s">T</span><span class="s">C</span><span class="s">H</span><span class="s">_</span><span class="s">A</span><span class="s">N</span><span class="s">Y</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class> </span><span class> </span><span class>M</span><span class>a</span><span class>t</span><span class>c</span><span class>h</span><span class>L</span><span class>i</span><span class>s</span><span class>t</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">=</span><span class> </span><span class>a</span><span class>s</span><span class>t</span><span class="nb">:</span><span class>x</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nb">-</span><span class="nb">&gt;</span><span class> </span><span class>{</span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">P</span><span class="s">U</span><span class="s">S</span><span class="s">H</span><span class="s">_</span><span class="s">S</span><span class="s">T</span><span class="s">R</span><span class="s">E</span><span class="s">A</span><span class="s">M</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>x</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="s">"</span><span class="s">I</span><span class="s">(</span><span class="s">'</span><span class="s">P</span><span class="s">O</span><span class="s">P</span><span class="s">_</span><span class="s">S</span><span class="s">T</span><span class="s">R</span><span class="s">E</span><span class="s">A</span><span class="s">M</span><span class="s">'</span><span class="s">)</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class>}</span><span class>
</span><span class>}</span><span class>
</span></pre></div>

</div>

<h3><a name="60ff77cb85fa455589e3e45cdeac8160"></a>support.py</h3>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="k">t</span><span class="k">r</span><span class="k">y</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="kn">f</span><span class="kn">r</span><span class="kn">o</span><span class="kn">m</span><span class> </span><span class="nn">c</span><span class="nn">S</span><span class="nn">t</span><span class="nn">r</span><span class="nn">i</span><span class="nn">n</span><span class="nn">g</span><span class="nn">I</span><span class="nn">O</span><span class> </span><span class="kn">i</span><span class="kn">m</span><span class="kn">p</span><span class="kn">o</span><span class="kn">r</span><span class="kn">t</span><span class> </span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="n">I</span><span class="n">O</span><span class>
</span><span class="k">e</span><span class="k">x</span><span class="k">c</span><span class="k">e</span><span class="k">p</span><span class="k">t</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="kn">f</span><span class="kn">r</span><span class="kn">o</span><span class="kn">m</span><span class> </span><span class="nn">S</span><span class="nn">t</span><span class="nn">r</span><span class="nn">i</span><span class="nn">n</span><span class="nn">g</span><span class="nn">I</span><span class="nn">O</span><span class> </span><span class="kn">i</span><span class="kn">m</span><span class="kn">p</span><span class="kn">o</span><span class="kn">r</span><span class="kn">t</span><span class> </span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="n">I</span><span class="n">O</span><span class>
</span><span class>
</span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">r</span><span class="nf">l</span><span class="nf">m</span><span class="nf">e</span><span class="nf">t</span><span class="nf">a</span><span class="nf">_</span><span class="nf">v</span><span class="nf">m</span><span class="p">(</span><span class="n">i</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">r</span><span class="n">t</span><span class="n">_</span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="o">=</span><span class> </span><span class="mi">0</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">[</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">r</span><span class="n">t</span><span class="n">_</span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="p">[</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="mi">0</span><span class="p">,</span><span class> </span><span class="p">[</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class="p">,</span><span class> </span><span class="p">[</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="bp">N</span><span class="bp">o</span><span class="bp">n</span><span class="bp">e</span><span class="p">,</span><span class> </span><span class="nb">t</span><span class="nb">u</span><span class="nb">p</span><span class="nb">l</span><span class="nb">e</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class> </span><span class="o">=</span><span class> </span><span class="p">{</span><span class="p">}</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">w</span><span class="k">h</span><span class="k">i</span><span class="k">l</span><span class="k">e</span><span class> </span><span class="bp">T</span><span class="bp">r</span><span class="bp">u</span><span class="bp">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">2</span><span class> </span><span class="o">=</span><span class> </span><span class="n">i</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="p">[</span><span class="n">p</span><span class="n">c</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">P</span><span class="s2">U</span><span class="s2">S</span><span class="s2">H</span><span class="s2">_</span><span class="s2">S</span><span class="s2">C</span><span class="s2">O</span><span class="s2">P</span><span class="s2">E</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">{</span><span class="p">}</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">B</span><span class="s2">A</span><span class="s2">C</span><span class="s2">K</span><span class="s2">T</span><span class="s2">R</span><span class="s2">A</span><span class="s2">C</span><span class="s2">K</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">[</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">]</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">)</span><span class="p">,</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">C</span><span class="s2">A</span><span class="s2">L</span><span class="s2">L</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">,</span><span class> </span><span class="nb">t</span><span class="nb">u</span><span class="nb">p</span><span class="nb">l</span><span class="nb">e</span><span class="p">(</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">x</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">[</span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="p">:</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">(</span><span class="n">p</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">[</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">M</span><span class="s2">A</span><span class="s2">T</span><span class="s2">C</span><span class="s2">H</span><span class="s2">_</span><span class="s2">C</span><span class="s2">H</span><span class="s2">A</span><span class="s2">R</span><span class="s2">S</span><span class="s2">E</span><span class="s2">Q</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">h</span><span class="n">a</span><span class="n">r</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class> </span><span class="ow">o</span><span class="ow">r</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class> </span><span class="o">!</span><span class="o">=</span><span class> </span><span class="n">c</span><span class="n">h</span><span class="n">a</span><span class="n">r</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">{</span><span class="s2">!</span><span class="s2">r</span><span class="s2">}</span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="n">c</span><span class="n">h</span><span class="n">a</span><span class="n">r</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">b</span><span class="k">r</span><span class="k">e</span><span class="k">a</span><span class="k">k</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">C</span><span class="s2">O</span><span class="s2">M</span><span class="s2">M</span><span class="s2">I</span><span class="s2">T</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">[</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">P</span><span class="s2">O</span><span class="s2">P</span><span class="s2">_</span><span class="s2">S</span><span class="s2">C</span><span class="s2">O</span><span class="s2">P</span><span class="s2">E</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">R</span><span class="s2">E</span><span class="s2">T</span><span class="s2">U</span><span class="s2">R</span><span class="s2">N</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">)</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="mi">0</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class="p">,</span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class> </span><span class="o">=</span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">[</span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class="p">]</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">+</span><span class="p">[</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">)</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">L</span><span class="s2">I</span><span class="s2">S</span><span class="s2">T</span><span class="s2">_</span><span class="s2">A</span><span class="s2">P</span><span class="s2">P</span><span class="s2">E</span><span class="s2">N</span><span class="s2">D</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">B</span><span class="s2">I</span><span class="s2">N</span><span class="s2">D</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">[</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">]</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">A</span><span class="s2">C</span><span class="s2">T</span><span class="s2">I</span><span class="s2">O</span><span class="s2">N</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">U</span><span class="n">s</span><span class="n">e</span><span class="n">r</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">M</span><span class="s2">A</span><span class="s2">T</span><span class="s2">C</span><span class="s2">H</span><span class="s2">_</span><span class="s2">R</span><span class="s2">A</span><span class="s2">N</span><span class="s2">G</span><span class="s2">E</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class> </span><span class="ow">o</span><span class="ow">r</span><span class> </span><span class="ow">n</span><span class="ow">o</span><span class="ow">t</span><span class> </span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class> </span><span class="o">&lt;</span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class> </span><span class="o">&lt;</span><span class="o">=</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">2</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">r</span><span class="s2">a</span><span class="s2">n</span><span class="s2">g</span><span class="s2">e</span><span class="s2"> </span><span class="s2">{</span><span class="s2">!</span><span class="s2">r</span><span class="s2">}</span><span class="s2">-</span><span class="s2">{</span><span class="s2">!</span><span class="s2">r</span><span class="s2">}</span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">2</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">L</span><span class="s2">I</span><span class="s2">S</span><span class="s2">T</span><span class="s2">_</span><span class="s2">S</span><span class="s2">T</span><span class="s2">A</span><span class="s2">R</span><span class="s2">T</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">[</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">L</span><span class="s2">I</span><span class="s2">S</span><span class="s2">T</span><span class="s2">_</span><span class="s2">E</span><span class="s2">N</span><span class="s2">D</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">U</span><span class="n">s</span><span class="n">e</span><span class="n">r</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="k">l</span><span class="k">a</span><span class="k">m</span><span class="k">b</span><span class="k">d</span><span class="k">a</span><span class> </span><span class="n">x</span><span class="n">s</span><span class="p">:</span><span class> </span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">e</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="p">(</span><span class="p">)</span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">x</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">x</span><span class="n">s</span><span class="p">]</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">M</span><span class="s2">A</span><span class="s2">T</span><span class="s2">C</span><span class="s2">H</span><span class="s2">_</span><span class="s2">A</span><span class="s2">N</span><span class="s2">Y</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">a</span><span class="s2">n</span><span class="s2">y</span><span class="s2">"</span><span class="p">,</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">P</span><span class="s2">U</span><span class="s2">S</span><span class="s2">H</span><span class="s2">_</span><span class="s2">S</span><span class="s2">T</span><span class="s2">R</span><span class="s2">E</span><span class="s2">A</span><span class="s2">M</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class> </span><span class="ow">o</span><span class="ow">r</span><span class> </span><span class="ow">n</span><span class="ow">o</span><span class="ow">t</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">,</span><span class> </span><span class="nb">l</span><span class="nb">i</span><span class="nb">s</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">l</span><span class="s2">i</span><span class="s2">s</span><span class="s2">t</span><span class="s2">"</span><span class="p">,</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="mi">0</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">P</span><span class="s2">O</span><span class="s2">P</span><span class="s2">_</span><span class="s2">S</span><span class="s2">T</span><span class="s2">R</span><span class="s2">E</span><span class="s2">A</span><span class="s2">M</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&lt;</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">e</span><span class="s2">n</span><span class="s2">d</span><span class="s2"> </span><span class="s2">o</span><span class="s2">f</span><span class="s2"> </span><span class="s2">l</span><span class="s2">i</span><span class="s2">s</span><span class="s2">t</span><span class="s2">"</span><span class="p">,</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">M</span><span class="s2">A</span><span class="s2">T</span><span class="s2">C</span><span class="s2">H</span><span class="s2">_</span><span class="s2">C</span><span class="s2">A</span><span class="s2">L</span><span class="s2">L</span><span class="s2">_</span><span class="s2">R</span><span class="s2">U</span><span class="s2">L</span><span class="s2">E</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">a</span><span class="s2">n</span><span class="s2">y</span><span class="s2">"</span><span class="p">,</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="nb">s</span><span class="nb">t</span><span class="nb">r</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="n">f</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="nb">t</span><span class="nb">u</span><span class="nb">p</span><span class="nb">l</span><span class="nb">e</span><span class="p">(</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">x</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">m</span><span class="n">o</span><span class="p">[</span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="p">:</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">a</span><span class="n">p</span><span class="n">p</span><span class="n">e</span><span class="n">n</span><span class="n">d</span><span class="p">(</span><span class="p">(</span><span class="n">p</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class> </span><span class="n">k</span><span class="n">e</span><span class="n">y</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">[</span><span class="n">f</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">F</span><span class="s2">A</span><span class="s2">I</span><span class="s2">L</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">,</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">L</span><span class="s2">A</span><span class="s2">B</span><span class="s2">E</span><span class="s2">L</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">M</span><span class="s2">A</span><span class="s2">T</span><span class="s2">C</span><span class="s2">H</span><span class="s2">_</span><span class="s2">S</span><span class="s2">T</span><span class="s2">R</span><span class="s2">I</span><span class="s2">N</span><span class="s2">G</span><span class="s2">"</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class> </span><span class="ow">o</span><span class="ow">r</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class> </span><span class="o">!</span><span class="o">=</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="p">(</span><span class="s2">"</span><span class="s2">e</span><span class="s2">x</span><span class="s2">p</span><span class="s2">e</span><span class="s2">c</span><span class="s2">t</span><span class="s2">e</span><span class="s2">d</span><span class="s2"> </span><span class="s2">{</span><span class="s2">!</span><span class="s2">r</span><span class="s2">}</span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">C</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">S</span><span class="n">e</span><span class="n">m</span><span class="n">a</span><span class="n">n</span><span class="n">t</span><span class="n">i</span><span class="n">c</span><span class="n">A</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">1</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">p</span><span class="n">c</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">t</span><span class="k">i</span><span class="k">n</span><span class="k">u</span><span class="k">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">a</span><span class="k">i</span><span class="k">s</span><span class="k">e</span><span class> </span><span class="ne">E</span><span class="ne">x</span><span class="ne">c</span><span class="ne">e</span><span class="ne">p</span><span class="ne">t</span><span class="ne">i</span><span class="ne">o</span><span class="ne">n</span><span class="p">(</span><span class="s2">"</span><span class="s2">u</span><span class="s2">n</span><span class="s2">k</span><span class="s2">n</span><span class="s2">o</span><span class="s2">w</span><span class="s2">n</span><span class="s2"> </span><span class="s2">i</span><span class="s2">n</span><span class="s2">s</span><span class="s2">t</span><span class="s2">r</span><span class="s2">u</span><span class="s2">c</span><span class="s2">t</span><span class="s2">i</span><span class="s2">o</span><span class="s2">n</span><span class="s2"> </span><span class="s2">{</span><span class="s2">}</span><span class="s2">"</span><span class="o">.</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="p">(</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="nb">t</span><span class="nb">u</span><span class="nb">p</span><span class="nb">l</span><span class="nb">e</span><span class="p">(</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">x</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">&gt;</span><span class="o">=</span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">r</span><span class="n">y</span><span class> </span><span class="o">=</span><span class> </span><span class="nb">t</span><span class="nb">u</span><span class="nb">p</span><span class="nb">l</span><span class="nb">e</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">w</span><span class="k">h</span><span class="k">i</span><span class="k">l</span><span class="k">e</span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">r</span><span class="n">y</span><span class> </span><span class="o">=</span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">r</span><span class="n">y</span><span class="p">)</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="mi">4</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">b</span><span class="k">r</span><span class="k">e</span><span class="k">a</span><span class="k">k</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">r</span><span class="n">y</span><span class="p">)</span><span class> </span><span class="o">!</span><span class="o">=</span><span class> </span><span class="mi">4</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="nb">l</span><span class="nb">i</span><span class="nb">s</span><span class="nb">t</span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">w</span><span class="k">h</span><span class="k">i</span><span class="k">l</span><span class="k">e</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">)</span><span class> </span><span class="o">&gt;</span><span class> </span><span class="mi">1</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">a</span><span class="k">i</span><span class="k">s</span><span class="k">e</span><span class> </span><span class="n">_</span><span class="n">M</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">E</span><span class="n">r</span><span class="n">r</span><span class="n">o</span><span class="n">r</span><span class="p">(</span><span class="n">l</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">_</span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">,</span><span class> </span><span class="n">f</span><span class="n">a</span><span class="n">i</span><span class="n">l</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="p">(</span><span class="n">p</span><span class="n">c</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">)</span><span class> </span><span class="o">=</span><span class> </span><span class="n">c</span><span class="n">a</span><span class="n">l</span><span class="n">l</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">t</span><span class="n">r</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">r</span><span class="n">y</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">)</span><span class> </span><span class="o">&gt;</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">]</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="p">:</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">)</span><span class> </span><span class="o">&gt;</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">[</span><span class="p">:</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="n">_</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="p">]</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">G</span><span class="nc">r</span><span class="nc">a</span><span class="nc">m</span><span class="nc">m</span><span class="nc">a</span><span class="nc">r</span><span class="p">(</span><span class="nb">o</span><span class="nb">b</span><span class="nb">j</span><span class="nb">e</span><span class="nb">c</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">r</span><span class="nf">u</span><span class="nf">n</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">i</span><span class="n">n</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">i</span><span class="n">n</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="p">,</span><span class> </span><span class="nb">b</span><span class="nb">a</span><span class="nb">s</span><span class="nb">e</span><span class="nb">s</span><span class="nb">t</span><span class="nb">r</span><span class="nb">i</span><span class="nb">n</span><span class="nb">g</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">i</span><span class="n">n</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="p">[</span><span class="n">i</span><span class="n">n</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="n">_</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="p">]</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class> </span><span class="o">=</span><span class> </span><span class="n">r</span><span class="n">l</span><span class="n">m</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">_</span><span class="n">v</span><span class="n">m</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">i</span><span class="n">n</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">l</span><span class="n">a</span><span class="n">b</span><span class="n">e</span><span class="n">l</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">_</span><span class="n">n</span><span class="n">a</span><span class="n">m</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class="p">,</span><span class> </span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">_</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">r</span><span class="n">e</span><span class="n">s</span><span class="n">u</span><span class="n">l</span><span class="n">t</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">B</span><span class="nc">u</span><span class="nc">i</span><span class="nc">l</span><span class="nc">d</span><span class="nc">e</span><span class="nc">r</span><span class="p">(</span><span class="nb">o</span><span class="nb">b</span><span class="nb">j</span><span class="nb">e</span><span class="nb">c</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">b</span><span class="nf">u</span><span class="nf">i</span><span class="nf">l</span><span class="nf">d</span><span class="nf">_</span><span class="nf">s</span><span class="nf">t</span><span class="nf">r</span><span class="nf">i</span><span class="nf">n</span><span class="nf">g</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class> </span><span class="o">=</span><span class> </span><span class="n">_</span><span class="n">O</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="o">.</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nd">@</span><span class="nd">c</span><span class="nd">l</span><span class="nd">a</span><span class="nd">s</span><span class="nd">s</span><span class="nd">m</span><span class="nd">e</span><span class="nd">t</span><span class="nd">h</span><span class="nd">o</span><span class="nd">d</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">c</span><span class="nf">r</span><span class="nf">e</span><span class="nf">a</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="nb">l</span><span class="nb">i</span><span class="nb">s</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">_</span><span class="n">L</span><span class="n">i</span><span class="n">s</span><span class="n">t</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="p">[</span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">c</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">x</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">_</span><span class="n">A</span><span class="n">t</span><span class="n">o</span><span class="n">m</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="n">m</span><span class="p">)</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">O</span><span class="nc">u</span><span class="nc">t</span><span class="nc">p</span><span class="nc">u</span><span class="nc">t</span><span class="p">(</span><span class="nb">o</span><span class="nb">b</span><span class="nb">j</span><span class="nb">e</span><span class="nb">c</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">f</span><span class="n">f</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="o">=</span><span class> </span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="n">I</span><span class="n">O</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="mi">0</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">o</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">e</span><span class="n">w</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="bp">T</span><span class="bp">r</span><span class="bp">u</span><span class="bp">e</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="nd">@</span><span class="nd">p</span><span class="nd">r</span><span class="nd">o</span><span class="nd">p</span><span class="nd">e</span><span class="nd">r</span><span class="nd">t</span><span class="nd">y</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">v</span><span class="nf">a</span><span class="nf">l</span><span class="nf">u</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">f</span><span class="n">f</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">g</span><span class="n">e</span><span class="n">t</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">w</span><span class="nf">r</span><span class="nf">i</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">h</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">i</span><span class="n">s</span><span class="n">_</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class="n">b</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">k</span><span class> </span><span class="o">=</span><span class> </span><span class="n">c</span><span class="n">h</span><span class> </span><span class="o">=</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="se">\</span><span class="se">n</span><span class="s2">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="ow">a</span><span class="ow">n</span><span class="ow">d</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">o</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">e</span><span class="n">w</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class> </span><span class="ow">a</span><span class="ow">n</span><span class="ow">d</span><span class> </span><span class="ow">n</span><span class="ow">o</span><span class="ow">t</span><span class> </span><span class="n">i</span><span class="n">s</span><span class="n">_</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class="n">b</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">k</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">f</span><span class="n">f</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="s2">"</span><span class="s2"> </span><span class="s2"> </span><span class="s2"> </span><span class="s2"> </span><span class="s2">"</span><span class="o">*</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">f</span><span class="n">f</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">c</span><span class="n">h</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">o</span><span class="n">n</span><span class="n">_</span><span class="n">n</span><span class="n">e</span><span class="n">w</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">i</span><span class="n">s</span><span class="n">_</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class="n">b</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">k</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">L</span><span class="nc">i</span><span class="nc">s</span><span class="nc">t</span><span class="nc">B</span><span class="nc">u</span><span class="nc">i</span><span class="nc">l</span><span class="nc">d</span><span class="nc">e</span><span class="nc">r</span><span class="p">(</span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">w</span><span class="nf">r</span><span class="nf">i</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">b</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">A</span><span class="nc">t</span><span class="nc">o</span><span class="nc">m</span><span class="nc">B</span><span class="nc">u</span><span class="nc">i</span><span class="nc">l</span><span class="nc">d</span><span class="nc">e</span><span class="nc">r</span><span class="p">(</span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">m</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">w</span><span class="nf">r</span><span class="nf">i</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="o">.</span><span class="n">w</span><span class="n">r</span><span class="n">i</span><span class="n">t</span><span class="n">e</span><span class="p">(</span><span class="nb">s</span><span class="nb">t</span><span class="nb">r</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">a</span><span class="n">t</span><span class="n">o</span><span class="n">m</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">I</span><span class="nc">n</span><span class="nc">d</span><span class="nc">e</span><span class="nc">n</span><span class="nc">t</span><span class="nc">B</span><span class="nc">u</span><span class="nc">i</span><span class="nc">l</span><span class="nc">d</span><span class="nc">e</span><span class="nc">r</span><span class="p">(</span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">w</span><span class="nf">r</span><span class="nf">i</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="o">.</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">D</span><span class="nc">e</span><span class="nc">d</span><span class="nc">e</span><span class="nc">n</span><span class="nc">t</span><span class="nc">B</span><span class="nc">u</span><span class="nc">i</span><span class="nc">l</span><span class="nc">d</span><span class="nc">e</span><span class="nc">r</span><span class="p">(</span><span class="n">_</span><span class="n">B</span><span class="n">u</span><span class="n">i</span><span class="n">l</span><span class="n">d</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">w</span><span class="nf">r</span><span class="nf">i</span><span class="nf">t</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class="n">p</span><span class="n">u</span><span class="n">t</span><span class="o">.</span><span class="n">i</span><span class="n">n</span><span class="n">d</span><span class="n">e</span><span class="n">n</span><span class="n">t</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">o</span><span class="n">n</span><span class> </span><span class="o">-</span><span class="o">=</span><span class> </span><span class="mi">1</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">C</span><span class="nc">o</span><span class="nc">n</span><span class="nc">s</span><span class="nc">t</span><span class="nc">a</span><span class="nc">n</span><span class="nc">t</span><span class="nc">S</span><span class="nc">e</span><span class="nc">m</span><span class="nc">a</span><span class="nc">n</span><span class="nc">t</span><span class="nc">i</span><span class="nc">c</span><span class="nc">A</span><span class="nc">c</span><span class="nc">t</span><span class="nc">i</span><span class="nc">o</span><span class="nc">n</span><span class="p">(</span><span class="nb">o</span><span class="nb">b</span><span class="nb">j</span><span class="nb">e</span><span class="nb">c</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">e</span><span class="nf">v</span><span class="nf">a</span><span class="nf">l</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">U</span><span class="nc">s</span><span class="nc">e</span><span class="nc">r</span><span class="nc">S</span><span class="nc">e</span><span class="nc">m</span><span class="nc">a</span><span class="nc">n</span><span class="nc">t</span><span class="nc">i</span><span class="nc">c</span><span class="nc">A</span><span class="nc">c</span><span class="nc">t</span><span class="nc">i</span><span class="nc">o</span><span class="nc">n</span><span class="p">(</span><span class="nb">o</span><span class="nb">b</span><span class="nb">j</span><span class="nb">e</span><span class="nb">c</span><span class="nb">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">f</span><span class="n">n</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">f</span><span class="n">n</span><span class> </span><span class="o">=</span><span class> </span><span class="n">f</span><span class="n">n</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">e</span><span class="nf">v</span><span class="nf">a</span><span class="nf">l</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">f</span><span class="n">n</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">c</span><span class="n">o</span><span class="n">p</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class>
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class> </span><span class="nc">_</span><span class="nc">M</span><span class="nc">a</span><span class="nc">t</span><span class="nc">c</span><span class="nc">h</span><span class="nc">E</span><span class="nc">r</span><span class="nc">r</span><span class="nc">o</span><span class="nc">r</span><span class="p">(</span><span class="ne">E</span><span class="ne">x</span><span class="ne">c</span><span class="ne">e</span><span class="ne">p</span><span class="ne">t</span><span class="ne">i</span><span class="ne">o</span><span class="ne">n</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class="p">,</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">,</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="ne">E</span><span class="ne">x</span><span class="ne">c</span><span class="ne">e</span><span class="ne">p</span><span class="ne">t</span><span class="ne">i</span><span class="ne">o</span><span class="ne">n</span><span class="o">.</span><span class="fm">_</span><span class="fm">_</span><span class="fm">i</span><span class="fm">n</span><span class="fm">i</span><span class="fm">t</span><span class="fm">_</span><span class="fm">_</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class> </span><span class="o">=</span><span class> </span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class> </span><span class="o">=</span><span class> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">d</span><span class="nf">e</span><span class="nf">s</span><span class="nf">c</span><span class="nf">r</span><span class="nf">i</span><span class="nf">b</span><span class="nf">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">i</span><span class="k">f</span><span class> </span><span class="nb">i</span><span class="nb">s</span><span class="nb">i</span><span class="nb">n</span><span class="nb">s</span><span class="nb">t</span><span class="nb">a</span><span class="nb">n</span><span class="nb">c</span><span class="nb">e</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">,</span><span class> </span><span class="nb">b</span><span class="nb">a</span><span class="nb">s</span><span class="nb">e</span><span class="nb">s</span><span class="nb">t</span><span class="nb">r</span><span class="nb">i</span><span class="nb">n</span><span class="nb">g</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class> </span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="p">:</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">s</span><span class="n">p</span><span class="n">l</span><span class="n">i</span><span class="n">t</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class="n">s</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">:</span><span class="p">]</span><span class="o">.</span><span class="n">s</span><span class="n">p</span><span class="n">l</span><span class="n">i</span><span class="n">t</span><span class="n">l</span><span class="n">i</span><span class="n">n</span><span class="n">e</span><span class="n">s</span><span class="p">(</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="p">,</span><span class> </span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">a</span><span class="n">r</span><span class="n">r</span><span class="n">o</span><span class="n">w</span><span class="p">(</span><span class="nb">l</span><span class="nb">e</span><span class="nb">n</span><span class="p">(</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">e</span><span class="k">l</span><span class="k">s</span><span class="k">e</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2">[</span><span class="s2">"</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="p">:</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2"> </span><span class="s2"> </span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="nb">r</span><span class="nb">e</span><span class="nb">p</span><span class="nb">r</span><span class="p">(</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">b</span><span class="n">e</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">e</span><span class="p">)</span><span class="p">,</span><span class> </span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2"> </span><span class="s2"> </span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="nb">r</span><span class="nb">e</span><span class="nb">p</span><span class="nb">r</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="p">]</span><span class="p">)</span><span class="p">,</span><span class> </span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">a</span><span class="n">r</span><span class="n">r</span><span class="n">o</span><span class="n">w</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">f</span><span class="k">o</span><span class="k">r</span><span class> </span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class> </span><span class="ow">i</span><span class="ow">n</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">m</span><span class="p">[</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">p</span><span class="n">o</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="p">]</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2"> </span><span class="s2"> </span><span class="s2">"</span><span class="p">,</span><span class> </span><span class="nb">r</span><span class="nb">e</span><span class="nb">p</span><span class="nb">r</span><span class="p">(</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="n">_</span><span class="n">a</span><span class="n">f</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">,</span><span class> </span><span class="s2">"</span><span class="s2">,</span><span class="s2">"</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">_</span><span class="n">c</span><span class="n">o</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">x</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2">]</span><span class="s2">"</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="s2">E</span><span class="s2">r</span><span class="s2">r</span><span class="s2">o</span><span class="s2">r</span><span class="s2">:</span><span class="s2"> </span><span class="s2">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="p">(</span><span class="o">*</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="o">.</span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="p">]</span><span class="p">)</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class> </span><span class="o">+</span><span class="o">=</span><span class> </span><span class="s2">"</span><span class="se">\</span><span class="se">n</span><span class="s2">"</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="n">m</span><span class="n">e</span><span class="n">s</span><span class="n">s</span><span class="n">a</span><span class="n">g</span><span class="n">e</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">_</span><span class="nf">c</span><span class="nf">o</span><span class="nf">n</span><span class="nf">t</span><span class="nf">e</span><span class="nf">x</span><span class="nf">t</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="o">*</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">s</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="s2">"</span><span class="s2">&gt;</span><span class="s2"> </span><span class="s2">{</span><span class="s2">}</span><span class="se">\</span><span class="se">n</span><span class="s2">"</span><span class="o">.</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2">"</span><span class="o">.</span><span class="n">j</span><span class="n">o</span><span class="n">i</span><span class="n">n</span><span class="p">(</span><span class="n">a</span><span class="n">r</span><span class="n">g</span><span class="n">s</span><span class="p">)</span><span class="p">)</span><span class>
</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">d</span><span class="k">e</span><span class="k">f</span><span class> </span><span class="nf">_</span><span class="nf">a</span><span class="nf">r</span><span class="nf">r</span><span class="nf">o</span><span class="nf">w</span><span class="p">(</span><span class="bp">s</span><span class="bp">e</span><span class="bp">l</span><span class="bp">f</span><span class="p">,</span><span class> </span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="n">g</span><span class="n">h</span><span class="n">t</span><span class="p">)</span><span class="p">:</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class> </span><span class="s2">"</span><span class="s2">-</span><span class="s2">-</span><span class="s2">{</span><span class="s2">}</span><span class="s2">^</span><span class="se">\</span><span class="se">n</span><span class="s2">"</span><span class="o">.</span><span class="n">f</span><span class="n">o</span><span class="n">r</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="p">(</span><span class="s2">"</span><span class="s2">-</span><span class="s2">"</span><span class="o">*</span><span class="n">l</span><span class="n">e</span><span class="n">n</span><span class="n">g</span><span class="n">h</span><span class="n">t</span><span class="p">)</span><span class>
</span></pre></div>

</div>

<h3><a name="338ad257e61e4025b8859d610a475c6a"></a>compile.sh</h3>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>compile.sh</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="ch">#</span><span class="ch">!</span><span class="ch">/</span><span class="ch">b</span><span class="ch">i</span><span class="ch">n</span><span class="ch">/</span><span class="ch">b</span><span class="ch">a</span><span class="ch">s</span><span class="ch">h</span><span class="ch">
</span><span class>
</span><span class="nb">s</span><span class="nb">e</span><span class="nb">t</span><span class> </span><span class>-</span><span class>e</span><span class>
</span><span class>
</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="o">=</span><span class="s2">"</span><span class="k">$</span><span class="k">(</span><span class="nb">p</span><span class="nb">w</span><span class="nb">d</span><span class="k">)</span><span class="s2">/</span><span class="nv">$</span><span class="nv">1</span><span class="s2">"</span><span class>
</span><span class>
</span><span class="nb">c</span><span class="nb">d</span><span class> </span><span class="s2">"</span><span class="k">$</span><span class="k">(</span><span class>d</span><span class>i</span><span class>r</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">0</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span><span class>
</span><span class>
</span><span class>t</span><span class>o</span><span class>_</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class>_</span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class="o">(</span><span class="o">)</span><span class> </span><span class="o">{</span><span class>
</span><span class> </span><span class> </span><span class> </span><span class> </span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class>-</span><span class>c</span><span class> </span><span class="s1">'</span><span class="s1">i</span><span class="s1">m</span><span class="s1">p</span><span class="s1">o</span><span class="s1">r</span><span class="s1">t</span><span class="s1"> </span><span class="s1">s</span><span class="s1">y</span><span class="s1">s</span><span class="s1">;</span><span class="s1"> </span><span class="s1">s</span><span class="s1">y</span><span class="s1">s</span><span class="s1">.</span><span class="s1">s</span><span class="s1">t</span><span class="s1">d</span><span class="s1">o</span><span class="s1">u</span><span class="s1">t</span><span class="s1">.</span><span class="s1">w</span><span class="s1">r</span><span class="s1">i</span><span class="s1">t</span><span class="s1">e</span><span class="s1">(</span><span class="s1">r</span><span class="s1">e</span><span class="s1">p</span><span class="s1">r</span><span class="s1">(</span><span class="s1">s</span><span class="s1">y</span><span class="s1">s</span><span class="s1">.</span><span class="s1">s</span><span class="s1">t</span><span class="s1">d</span><span class="s1">i</span><span class="s1">n</span><span class="s1">.</span><span class="s1">r</span><span class="s1">e</span><span class="s1">a</span><span class="s1">d</span><span class="s1">(</span><span class="s1">)</span><span class="s1">)</span><span class="s1">)</span><span class="s1">'</span><span class>
</span><span class="o">}</span><span class>
</span><span class>
</span><span class="nv">s</span><span class="nv">u</span><span class="nv">p</span><span class="nv">p</span><span class="nv">o</span><span class="nv">r</span><span class="nv">t</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="nv">_</span><span class="nv">s</span><span class="nv">t</span><span class="nv">r</span><span class="nv">i</span><span class="nv">n</span><span class="nv">g</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>t</span><span class>o</span><span class>_</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class>_</span><span class>s</span><span class>t</span><span class>r</span><span class>i</span><span class>n</span><span class>g</span><span class> </span><span class>&lt;</span><span class> </span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class>.</span><span class>p</span><span class>y</span><span class="k">)</span><span class>
</span><span class="nv">s</span><span class="nv">u</span><span class="nv">p</span><span class="nv">p</span><span class="nv">o</span><span class="nv">r</span><span class="nv">t</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="s2">"</span><span class> </span><span class>-</span><span class>-</span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class="k">)</span><span class>
</span><span class="nv">p</span><span class="nv">a</span><span class="nv">r</span><span class="nv">s</span><span class="nv">e</span><span class="nv">r</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="s2">"</span><span class> </span><span class>&lt;</span><span class> </span><span class>p</span><span class>a</span><span class>r</span><span class>s</span><span class>e</span><span class>r</span><span class>.</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class="k">)</span><span class>
</span><span class="nv">c</span><span class="nv">o</span><span class="nv">d</span><span class="nv">e</span><span class="nv">g</span><span class="nv">e</span><span class="nv">n</span><span class="nv">e</span><span class="nv">r</span><span class="nv">a</span><span class="nv">t</span><span class="nv">o</span><span class="nv">r</span><span class="nv">_</span><span class="nv">p</span><span class="nv">y</span><span class="o">=</span><span class="k">$</span><span class="k">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">r</span><span class="nv">l</span><span class="nv">m</span><span class="nv">e</span><span class="nv">t</span><span class="nv">a</span><span class="nv">_</span><span class="nv">c</span><span class="nv">o</span><span class="nv">m</span><span class="nv">p</span><span class="nv">i</span><span class="nv">l</span><span class="nv">e</span><span class="nv">r</span><span class="s2">"</span><span class> </span><span class>&lt;</span><span class> </span><span class>c</span><span class>o</span><span class>d</span><span class>e</span><span class>g</span><span class>e</span><span class>n</span><span class>e</span><span class>r</span><span class>a</span><span class>t</span><span class>o</span><span class>r</span><span class>.</span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class="k">)</span><span class>
</span><span class>
</span><span class>c</span><span class>a</span><span class>t</span><span class> </span><span class="s">&lt;</span><span class="s">&lt;</span><span class="s">E</span><span class="s">O</span><span class="s">F</span><span class="s">
</span><span class="s">i</span><span class="s">m</span><span class="s">p</span><span class="s">o</span><span class="s">r</span><span class="s">t</span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">
</span><span class="s">
</span><span class="s">S</span><span class="s">U</span><span class="s">P</span><span class="s">P</span><span class="s">O</span><span class="s">R</span><span class="s">T</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">$</span><span class="s">s</span><span class="s">u</span><span class="s">p</span><span class="s">p</span><span class="s">o</span><span class="s">r</span><span class="s">t</span><span class="s">_</span><span class="s">p</span><span class="s">y</span><span class="s">_</span><span class="s">s</span><span class="s">t</span><span class="s">r</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s">
</span><span class="s">
</span><span class="s">$</span><span class="s">s</span><span class="s">u</span><span class="s">p</span><span class="s">p</span><span class="s">o</span><span class="s">r</span><span class="s">t</span><span class="s">_</span><span class="s">p</span><span class="s">y</span><span class="s">
</span><span class="s">
</span><span class="s">$</span><span class="s">p</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">e</span><span class="s">r</span><span class="s">_</span><span class="s">p</span><span class="s">y</span><span class="s">
</span><span class="s">
</span><span class="s">$</span><span class="s">c</span><span class="s">o</span><span class="s">d</span><span class="s">e</span><span class="s">g</span><span class="s">e</span><span class="s">n</span><span class="s">e</span><span class="s">r</span><span class="s">a</span><span class="s">t</span><span class="s">o</span><span class="s">r</span><span class="s">_</span><span class="s">p</span><span class="s">y</span><span class="s">
</span><span class="s">
</span><span class="s">j</span><span class="s">o</span><span class="s">i</span><span class="s">n</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">"</span><span class="s">"</span><span class="s">.</span><span class="s">j</span><span class="s">o</span><span class="s">i</span><span class="s">n</span><span class="s">
</span><span class="s">
</span><span class="s">d</span><span class="s">e</span><span class="s">f</span><span class="s"> </span><span class="s">c</span><span class="s">o</span><span class="s">m</span><span class="s">p</span><span class="s">i</span><span class="s">l</span><span class="s">e</span><span class="s">_</span><span class="s">g</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">(</span><span class="s">g</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">)</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">p</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">e</span><span class="s">r</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">P</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">)</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">c</span><span class="s">o</span><span class="s">d</span><span class="s">e</span><span class="s">_</span><span class="s">g</span><span class="s">e</span><span class="s">n</span><span class="s">e</span><span class="s">r</span><span class="s">a</span><span class="s">t</span><span class="s">o</span><span class="s">r</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">C</span><span class="s">o</span><span class="s">d</span><span class="s">e</span><span class="s">G</span><span class="s">e</span><span class="s">n</span><span class="s">e</span><span class="s">r</span><span class="s">a</span><span class="s">t</span><span class="s">o</span><span class="s">r</span><span class="s">(</span><span class="s">)</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">r</span><span class="s">e</span><span class="s">t</span><span class="s">u</span><span class="s">r</span><span class="s">n</span><span class="s"> </span><span class="s">c</span><span class="s">o</span><span class="s">d</span><span class="s">e</span><span class="s">_</span><span class="s">g</span><span class="s">e</span><span class="s">n</span><span class="s">e</span><span class="s">r</span><span class="s">a</span><span class="s">t</span><span class="s">o</span><span class="s">r</span><span class="s">.</span><span class="s">r</span><span class="s">u</span><span class="s">n</span><span class="s">(</span><span class="s">"</span><span class="s">a</span><span class="s">s</span><span class="s">t</span><span class="s">"</span><span class="s">,</span><span class="s"> </span><span class="s">p</span><span class="s">a</span><span class="s">r</span><span class="s">s</span><span class="s">e</span><span class="s">r</span><span class="s">.</span><span class="s">r</span><span class="s">u</span><span class="s">n</span><span class="s">(</span><span class="s">"</span><span class="s">g</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">"</span><span class="s">,</span><span class="s"> </span><span class="s">g</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">)</span><span class="s">)</span><span class="s">
</span><span class="s">
</span><span class="s">i</span><span class="s">f</span><span class="s"> </span><span class="s">_</span><span class="s">_</span><span class="s">n</span><span class="s">a</span><span class="s">m</span><span class="s">e</span><span class="s">_</span><span class="s">_</span><span class="s"> </span><span class="s">=</span><span class="s">=</span><span class="s"> </span><span class="s">"</span><span class="s">_</span><span class="s">_</span><span class="s">m</span><span class="s">a</span><span class="s">i</span><span class="s">n</span><span class="s">_</span><span class="s">_</span><span class="s">"</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">i</span><span class="s">f</span><span class="s"> </span><span class="s">"</span><span class="s">-</span><span class="s">-</span><span class="s">s</span><span class="s">u</span><span class="s">p</span><span class="s">p</span><span class="s">o</span><span class="s">r</span><span class="s">t</span><span class="s">"</span><span class="s"> </span><span class="s">i</span><span class="s">n</span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">a</span><span class="s">r</span><span class="s">g</span><span class="s">v</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">s</span><span class="s">t</span><span class="s">d</span><span class="s">o</span><span class="s">u</span><span class="s">t</span><span class="s">.</span><span class="s">w</span><span class="s">r</span><span class="s">i</span><span class="s">t</span><span class="s">e</span><span class="s">(</span><span class="s">S</span><span class="s">U</span><span class="s">P</span><span class="s">P</span><span class="s">O</span><span class="s">R</span><span class="s">T</span><span class="s">)</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">e</span><span class="s">l</span><span class="s">s</span><span class="s">e</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">t</span><span class="s">r</span><span class="s">y</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">s</span><span class="s">t</span><span class="s">d</span><span class="s">o</span><span class="s">u</span><span class="s">t</span><span class="s">.</span><span class="s">w</span><span class="s">r</span><span class="s">i</span><span class="s">t</span><span class="s">e</span><span class="s">(</span><span class="s">c</span><span class="s">o</span><span class="s">m</span><span class="s">p</span><span class="s">i</span><span class="s">l</span><span class="s">e</span><span class="s">_</span><span class="s">g</span><span class="s">r</span><span class="s">a</span><span class="s">m</span><span class="s">m</span><span class="s">a</span><span class="s">r</span><span class="s">(</span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">s</span><span class="s">t</span><span class="s">d</span><span class="s">i</span><span class="s">n</span><span class="s">.</span><span class="s">r</span><span class="s">e</span><span class="s">a</span><span class="s">d</span><span class="s">(</span><span class="s">)</span><span class="s">)</span><span class="s">)</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">e</span><span class="s">x</span><span class="s">c</span><span class="s">e</span><span class="s">p</span><span class="s">t</span><span class="s"> </span><span class="s">_</span><span class="s">M</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">E</span><span class="s">r</span><span class="s">r</span><span class="s">o</span><span class="s">r</span><span class="s"> </span><span class="s">a</span><span class="s">s</span><span class="s"> </span><span class="s">e</span><span class="s">:</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">s</span><span class="s">t</span><span class="s">d</span><span class="s">e</span><span class="s">r</span><span class="s">r</span><span class="s">.</span><span class="s">w</span><span class="s">r</span><span class="s">i</span><span class="s">t</span><span class="s">e</span><span class="s">(</span><span class="s">e</span><span class="s">.</span><span class="s">d</span><span class="s">e</span><span class="s">s</span><span class="s">c</span><span class="s">r</span><span class="s">i</span><span class="s">b</span><span class="s">e</span><span class="s">(</span><span class="s">)</span><span class="s">)</span><span class="s">
</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">s</span><span class="s">y</span><span class="s">s</span><span class="s">.</span><span class="s">e</span><span class="s">x</span><span class="s">i</span><span class="s">t</span><span class="s">(</span><span class="s">1</span><span class="s">)</span><span class="s">
</span><span class="s">E</span><span class="s">O</span><span class="s">F</span><span class>
</span></pre></div>

</div>

<h3><a name="272d17f2d55749b59d7e5ec7b9b8e0ec"></a>meta_compile.sh</h3>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>meta_compile.sh</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="ch">#</span><span class="ch">!</span><span class="ch">/</span><span class="ch">b</span><span class="ch">i</span><span class="ch">n</span><span class="ch">/</span><span class="ch">b</span><span class="ch">a</span><span class="ch">s</span><span class="ch">h</span><span class="ch">
</span><span class>
</span><span class="nb">s</span><span class="nb">e</span><span class="nb">t</span><span class> </span><span class>-</span><span class>e</span><span class>
</span><span class>
</span><span class="nb">c</span><span class="nb">d</span><span class> </span><span class="s2">"</span><span class="k">$</span><span class="k">(</span><span class>d</span><span class>i</span><span class>r</span><span class>n</span><span class>a</span><span class>m</span><span class>e</span><span class> </span><span class="s2">"</span><span class="nv">$</span><span class="nv">0</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span><span class>
</span><span class>
</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>.</span><span class>/</span><span class>c</span><span class>o</span><span class>m</span><span class>p</span><span class>i</span><span class>l</span><span class>e</span><span class>.</span><span class>s</span><span class>h</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&gt;</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>d</span><span class>i</span><span class>f</span><span class>f</span><span class> </span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>&lt;</span><span class="o">(</span><span class>p</span><span class>y</span><span class>t</span><span class>h</span><span class>o</span><span class>n</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>-</span><span class>-</span><span class>s</span><span class>u</span><span class>p</span><span class>p</span><span class>o</span><span class>r</span><span class>t</span><span class="o">)</span><span class>
</span><span class>
</span><span class>m</span><span class>v</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>3</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>m</span><span class>v</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>2</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class>m</span><span class>v</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>1</span><span class>.</span><span class>p</span><span class>y</span><span class> </span><span class>r</span><span class>l</span><span class>m</span><span class>e</span><span class>t</span><span class>a</span><span class>.</span><span class>p</span><span class>y</span><span class>
</span><span class>
</span><span class="nb">e</span><span class="nb">c</span><span class="nb">h</span><span class="nb">o</span><span class> </span><span class>O</span><span class>K</span><span class>
</span></pre></div>

</div>


      <div class="jumbotron">
<div class="row">
<div class="col-md-12">

<p>What is Rickard working on and thinking about <strong>right
now</strong>?</p>

<p>Every month I write a <em>newsletter</em> about just that. You will get
updates about my <em>current projects</em> and <em>thoughts about
programming</em>, and also get a chance to hit reply and <em>interact</em> with
me. Subscribe to it below.</p>

</div>
</div>
<div class="row">
<div class="col-md-12">
<iframe scrolling="no" style="width:100%!important;height:220px;border:1px #ccc solid !important" src="https://buttondown.email/rickardlindberg?as_embed=true"></iframe>
</div>
</div>
</div>

    </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../static/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>
