<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>
      DRAFT: Thinking about test setup | Rickard's personal homepage
    </title>

    <!-- Bootstrap -->
    <link href="../../static/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <meta name="keywords" content="programming, writing" />
    <meta name="description" content="Rickard's personal homepage.">
    <link rel="stylesheet" href="../../static/layout.css" type="text/css">
    <link rel="stylesheet" href="../../static/syntax.css" type="text/css">
    <link rel="alternate" href="../../atom.xml" type="application/atom+xml" title="Atom feed">
    <link rel="alternate" href="../../rss.xml" type="application/rss+xml" title="RSS feed">
    <link rel="me" href="https://hachyderm.io/@rickardlindberg">
  </head>
  <body>

    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../">rickardlindberg.me</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav">
            <li><a href="../../">Home</a></li>
            <li><a href="../../writing/">Writing</a></li>
            <li><a href="../../writing/newsletter/">Newsletter</a></li>
            <li><a href="../../projects/">Projects</a></li>
            <li><a href="../../contact/">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
      <h1>DRAFT: Thinking about test setup</h1>

<p><em>Published on 23 April 2023 in <a href="../../projects/agdpp/">Agile Game Development with Python and Pygame</a>.</em></p>

<p><strong>This is a work in progress that will change. Like to see it finished? Let me know by sending me an email.</strong></p>
<p>In the <a href="../../writing/agdpp-shooting-arrow/">previous</a> episode we were not quite happy with our test suite. Are we testing things at the right level? Do we see any smells? Are we missing tests? We will take some time in this episode to reflect on those questions so that things will go smooth, testing wise, when working on the next story.</p>
<h2 id="a-concrete-problem">A concrete problem</h2>
<div class="rliterate-code">
<div class="rliterate-code-body">
<div class="highlight">
<pre><span></span><span class="o">...</span>
</pre>
</div>
</div>
</div>
<h2 id="todo">TODO</h2>
<ul>
<li><p>In the last episode I had a feeling that everything was not alright with the tests. I poked around a bit and noticed that I could delete some vital production code that would break the game without my tests noticing.</p></li>
<li><p>The promise of TDD and automated testing is that you have very high test coverage. What I aspire to is to create a test suite that within seconds tells me if I broke the production code. It might not be realistic, but when I find a case where I could break my production code without my tests noticing, I want to look more closely.</p></li>
<li><p>One reason to not test is that you don’t know how. That can be solved by practicing. Another reason might be that you decide that the cost is not worth it. However, the cost of testing goes down the better you get at it.</p></li>
<li><p>Anyway, I’m getting slightly off topic. Where were we?</p></li>
<li><p>Test failure! Let’s look at the example.</p>
<p>def tick(self, dt, events): for event in events: … elif event.is_keydown_space(): self.arrow.shoot() …</p>
<p>def tick(self, dt, events): for event in events: … self.arrow.shoot() …</p>
<p>This makes the arrow shoot right when you start the game, and no test is failing.</p></li>
<li><p>What test is missing? Well, I generally prefer that tests for a class should test behavior of that class. Since the if-statement resides in the BalloonShooter class, that’s who’s missing a test.</p></li>
<li><p>I think the reason for the missing test is that I wanted to test this behavior at a lower level. And part of it is, but not the input handling.</p></li>
<li><p>In the beginning, it makes sense to write tests only for the top level application class. That frees us up to make refactorings without needing to change tests. After a while certain subsystems might emerge and stories start to cover that subsystem only.</p></li>
<li><p>What tests are left to write after ATDD?</p></li>
<li><p>Forgot to test inital case? Just one frame, and not animated?</p></li>
<li><p>Extracted tests too early.</p></li>
</ul>
<h2 id="summary">Summary</h2>
<p>…</p>
<p>See you in the next episode!</p>

      <hr>
      <center>
      <p class="small">Site proudly generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>.</p>
      </center>
    </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../static/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>
