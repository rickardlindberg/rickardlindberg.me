---
title: 'DRAFT: Porting RLMeta to C++'
date: 2020-04-10
tags: rlmeta,draft
---
<strong>This is a work in progress that will change. Like to see it finished? Let me know by sending me an email.</strong>

<p>In this article I will port RLMeta to C++. The main reason for doing it is to learn C++. I have the impression that C++ is a large and complex language, but I think I should be able to grasp the basics pretty quickly because I know C quite well and I am also familiar with object oriented programming. This article will describe my learning journey as well as the port. Another reason for doing the port is to see how RLMeta looks like when C++ is the target language. Will it fit well? Will performance increase?</p>

<ul><li><a href="#f935efac99094d30b035430ba6c263cb">Representing data</a>

</li>

<li><a href="#8fe0f8cbf13f49c0a4d9aa4f92fa2540">Misc</a>

</li>

</ul><h2><a name="f935efac99094d30b035430ba6c263cb"></a>Representing data</h2>

<p>The first thing I think about is how to represent the data that RLMeta needs. In particular I think about how to store the mapping between rule names and their location in the program. The map in the C++ standard library looks like a dict in Python. But there is also something about an allocation strategy. I need to learn more about how memory is handled in C++.</p>

<p>I read about classes, constructors, destructors and initialisation. I create a small example to clarify my thinking. Here I also learn about basic C++ syntax.</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="cp">#</span><span class="cp">i</span><span class="cp">n</span><span class="cp">c</span><span class="cp">l</span><span class="cp">u</span><span class="cp">d</span><span class="cp">e</span><span class=""> </span><span class="cpf">&lt;</span><span class="cpf">i</span><span class="cpf">o</span><span class="cpf">s</span><span class="cpf">t</span><span class="cpf">r</span><span class="cpf">e</span><span class="cpf">a</span><span class="cpf">m</span><span class="cpf">&gt;</span><span class="cp">
</span><span class="">
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class=""> </span><span class="nc">F</span><span class="nc">o</span><span class="nc">o</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">p</span><span class="k">r</span><span class="k">i</span><span class="k">v</span><span class="k">a</span><span class="k">t</span><span class="k">e</span><span class="o">:</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class=""> </span><span class="n">i</span><span class="n">d</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">p</span><span class="k">u</span><span class="k">b</span><span class="k">l</span><span class="k">i</span><span class="k">c</span><span class="o">:</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">F</span><span class="n">o</span><span class="n">o</span><span class="p">(</span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class=""> </span><span class="n">i</span><span class="n">d</span><span class="p">)</span><span class=""> </span><span class="o">:</span><span class=""> </span><span class="n">i</span><span class="n">d</span><span class="p">(</span><span class="n">i</span><span class="n">d</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">C</span><span class="s">r</span><span class="s">e</span><span class="s">a</span><span class="s">t</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s"> </span><span class="s">f</span><span class="s">o</span><span class="s">o</span><span class="s"> </span><span class="s">"</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="n">i</span><span class="n">d</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="o">~</span><span class="n">F</span><span class="n">o</span><span class="n">o</span><span class="p">(</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">D</span><span class="s">e</span><span class="s">s</span><span class="s">t</span><span class="s">r</span><span class="s">u</span><span class="s">c</span><span class="s">t</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s"> </span><span class="s">f</span><span class="s">o</span><span class="s">o</span><span class="s"> </span><span class="s">"</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="n">i</span><span class="n">d</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class="">
</span><span class="p">}</span><span class="p">;</span><span class="">
</span><span class="">
</span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class=""> </span><span class="nf">m</span><span class="nf">a</span><span class="nf">i</span><span class="nf">n</span><span class="p">(</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">E</span><span class="s">n</span><span class="s">t</span><span class="s">e</span><span class="s">r</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s"> </span><span class="s">m</span><span class="s">a</span><span class="s">i</span><span class="s">n</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">F</span><span class="n">o</span><span class="n">o</span><span class=""> </span><span class="n">f</span><span class="n">o</span><span class="n">o</span><span class="n">1</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">F</span><span class="n">o</span><span class="n">o</span><span class=""> </span><span class="o">*</span><span class="n">f</span><span class="n">o</span><span class="n">o</span><span class="n">2</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="k">n</span><span class="k">e</span><span class="k">w</span><span class=""> </span><span class="n">F</span><span class="n">o</span><span class="n">o</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">E</span><span class="s">x</span><span class="s">i</span><span class="s">t</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s"> </span><span class="s">m</span><span class="s">a</span><span class="s">i</span><span class="s">n</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class=""> </span><span class="mi">0</span><span class="p">;</span><span class="">
</span><span class="p">}</span><span class="">
</span></pre></div>

</div>

<p>Output:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="n">E</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">m</span><span class="n">a</span><span class="n">i</span><span class="n">n</span><span class="">
</span><span class="n">C</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">f</span><span class="n">o</span><span class="n">o</span><span class=""> </span><span class="mi">1</span><span class="">
</span><span class="n">C</span><span class="n">r</span><span class="n">e</span><span class="n">a</span><span class="n">t</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">f</span><span class="n">o</span><span class="n">o</span><span class=""> </span><span class="mi">2</span><span class="">
</span><span class="n">E</span><span class="n">x</span><span class="n">i</span><span class="n">t</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">m</span><span class="n">a</span><span class="n">i</span><span class="n">n</span><span class="">
</span><span class="n">D</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">f</span><span class="n">o</span><span class="n">o</span><span class=""> </span><span class="mi">1</span><span class="">
</span></pre></div>

</div>

<p>This shows me that objects are destructed automatically if allocated on the stack. But not when newed.</p>

<p>I go back to the map and make a small example to learn how to use it:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="cp">#</span><span class="cp">i</span><span class="cp">n</span><span class="cp">c</span><span class="cp">l</span><span class="cp">u</span><span class="cp">d</span><span class="cp">e</span><span class=""> </span><span class="cpf">&lt;</span><span class="cpf">i</span><span class="cpf">o</span><span class="cpf">s</span><span class="cpf">t</span><span class="cpf">r</span><span class="cpf">e</span><span class="cpf">a</span><span class="cpf">m</span><span class="cpf">&gt;</span><span class="cp">
</span><span class="cp">#</span><span class="cp">i</span><span class="cp">n</span><span class="cp">c</span><span class="cp">l</span><span class="cp">u</span><span class="cp">d</span><span class="cp">e</span><span class=""> </span><span class="cpf">&lt;</span><span class="cpf">m</span><span class="cpf">a</span><span class="cpf">p</span><span class="cpf">&gt;</span><span class="cp">
</span><span class="">
</span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class=""> </span><span class="nf">m</span><span class="nf">a</span><span class="nf">i</span><span class="nf">n</span><span class="p">(</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">m</span><span class="n">a</span><span class="n">p</span><span class="o">&lt;</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="p">,</span><span class=""> </span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class="o">&gt;</span><span class=""> </span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">s</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">s</span><span class="p">.</span><span class="n">i</span><span class="n">n</span><span class="n">s</span><span class="n">e</span><span class="n">r</span><span class="n">t</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">p</span><span class="n">a</span><span class="n">i</span><span class="n">r</span><span class="o">&lt;</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="p">,</span><span class=""> </span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"</span><span class="s">f</span><span class="s">o</span><span class="s">o</span><span class="s">"</span><span class="p">,</span><span class=""> </span><span class="mi">1</span><span class="mi">0</span><span class="p">)</span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">s</span><span class="p">.</span><span class="n">i</span><span class="n">n</span><span class="n">s</span><span class="n">e</span><span class="n">r</span><span class="n">t</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">p</span><span class="n">a</span><span class="n">i</span><span class="n">r</span><span class="o">&lt;</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="p">,</span><span class=""> </span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"</span><span class="s">b</span><span class="s">a</span><span class="s">r</span><span class="s">"</span><span class="p">,</span><span class=""> </span><span class="mi">1</span><span class="mi">5</span><span class="p">)</span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">f</span><span class="s">o</span><span class="s">o</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">"</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">s</span><span class="p">[</span><span class="s">"</span><span class="s">f</span><span class="s">o</span><span class="s">o</span><span class="s">"</span><span class="p">]</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">b</span><span class="s">a</span><span class="s">r</span><span class="s"> </span><span class="s">=</span><span class="s"> </span><span class="s">"</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="n">r</span><span class="n">u</span><span class="n">l</span><span class="n">e</span><span class="n">s</span><span class="p">[</span><span class="s">"</span><span class="s">b</span><span class="s">a</span><span class="s">r</span><span class="s">"</span><span class="p">]</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class=""> </span><span class="mi">0</span><span class="p">;</span><span class="">
</span><span class="p">}</span><span class="">
</span></pre></div>

</div>

<p>Output:</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="n">f</span><span class="n">o</span><span class="n">o</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mi">1</span><span class="mi">0</span><span class="">
</span><span class="n">b</span><span class="n">a</span><span class="n">r</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="mi">1</span><span class="mi">5</span><span class="">
</span></pre></div>

</div>

<p>I think the type declarations make the code hard to read. But the map seems to do what I want. So I'm happy. I also conclude that the map allocates memory to make space for all pairs. But at the end of <code>main</code> it will all be freed automatically. So no memory will leak.</p>

<p>Next I'm thinking about how to represent instructions. In the Python version an instruction is represented as a tuple <code>(name, arg1, arg2)</code>. Where the arguments can be of arbitrary type (string, integer, lambda, etc.).</p>

<p>Getting stuck. I think about how to represent the values that RLMeta works with instead. Lists, strings, integers, characters.</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="cp">#</span><span class="cp">i</span><span class="cp">n</span><span class="cp">c</span><span class="cp">l</span><span class="cp">u</span><span class="cp">d</span><span class="cp">e</span><span class=""> </span><span class="cpf">&lt;</span><span class="cpf">i</span><span class="cpf">o</span><span class="cpf">s</span><span class="cpf">t</span><span class="cpf">r</span><span class="cpf">e</span><span class="cpf">a</span><span class="cpf">m</span><span class="cpf">&gt;</span><span class="cp">
</span><span class="cp">#</span><span class="cp">i</span><span class="cp">n</span><span class="cp">c</span><span class="cp">l</span><span class="cp">u</span><span class="cp">d</span><span class="cp">e</span><span class=""> </span><span class="cpf">&lt;</span><span class="cpf">l</span><span class="cpf">i</span><span class="cpf">s</span><span class="cpf">t</span><span class="cpf">&gt;</span><span class="cp">
</span><span class="cp">#</span><span class="cp">i</span><span class="cp">n</span><span class="cp">c</span><span class="cp">l</span><span class="cp">u</span><span class="cp">d</span><span class="cp">e</span><span class=""> </span><span class="cpf">&lt;</span><span class="cpf">m</span><span class="cpf">e</span><span class="cpf">m</span><span class="cpf">o</span><span class="cpf">r</span><span class="cpf">y</span><span class="cpf">&gt;</span><span class="cp">
</span><span class="">
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class=""> </span><span class="nc">R</span><span class="nc">L</span><span class="nc">M</span><span class="nc">e</span><span class="nc">t</span><span class="nc">a</span><span class="nc">O</span><span class="nc">b</span><span class="nc">j</span><span class="nc">e</span><span class="nc">c</span><span class="nc">t</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">p</span><span class="k">u</span><span class="k">b</span><span class="k">l</span><span class="k">i</span><span class="k">c</span><span class="o">:</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">v</span><span class="k">i</span><span class="k">r</span><span class="k">t</span><span class="k">u</span><span class="k">a</span><span class="k">l</span><span class=""> </span><span class="o">~</span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">O</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="p">(</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class="">
</span><span class="p">}</span><span class="p">;</span><span class="">
</span><span class="">
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class=""> </span><span class="nc">R</span><span class="nc">L</span><span class="nc">M</span><span class="nc">e</span><span class="nc">t</span><span class="nc">a</span><span class="nc">I</span><span class="nc">n</span><span class="nc">t</span><span class="nc">e</span><span class="nc">g</span><span class="nc">e</span><span class="nc">r</span><span class=""> </span><span class="o">:</span><span class=""> </span><span class="k">p</span><span class="k">u</span><span class="k">b</span><span class="k">l</span><span class="k">i</span><span class="k">c</span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">O</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">p</span><span class="k">r</span><span class="k">i</span><span class="k">v</span><span class="k">a</span><span class="k">t</span><span class="k">e</span><span class="o">:</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">p</span><span class="k">u</span><span class="k">b</span><span class="k">l</span><span class="k">i</span><span class="k">c</span><span class="o">:</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class=""> </span><span class="o">:</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">(</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="o">~</span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">D</span><span class="s">e</span><span class="s">s</span><span class="s">t</span><span class="s">r</span><span class="s">u</span><span class="s">c</span><span class="s">t</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s"> </span><span class="s">i</span><span class="s">n</span><span class="s">t</span><span class="s">e</span><span class="s">g</span><span class="s">e</span><span class="s">r</span><span class="s"> </span><span class="s">"</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class="">
</span><span class="p">}</span><span class="p">;</span><span class="">
</span><span class="">
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class=""> </span><span class="nc">R</span><span class="nc">L</span><span class="nc">M</span><span class="nc">e</span><span class="nc">t</span><span class="nc">a</span><span class="nc">S</span><span class="nc">t</span><span class="nc">r</span><span class="nc">i</span><span class="nc">n</span><span class="nc">g</span><span class=""> </span><span class="o">:</span><span class=""> </span><span class="k">p</span><span class="k">u</span><span class="k">b</span><span class="k">l</span><span class="k">i</span><span class="k">c</span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">O</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">p</span><span class="k">r</span><span class="k">i</span><span class="k">v</span><span class="k">a</span><span class="k">t</span><span class="k">e</span><span class="o">:</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">p</span><span class="k">u</span><span class="k">b</span><span class="k">l</span><span class="k">i</span><span class="k">c</span><span class="o">:</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class=""> </span><span class="o">:</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">(</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="o">~</span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="p">(</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">D</span><span class="s">e</span><span class="s">s</span><span class="s">t</span><span class="s">r</span><span class="s">u</span><span class="s">c</span><span class="s">t</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s"> </span><span class="s">s</span><span class="s">t</span><span class="s">r</span><span class="s">i</span><span class="s">n</span><span class="s">g</span><span class="s"> </span><span class="s">"</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class="">
</span><span class="p">}</span><span class="p">;</span><span class="">
</span><span class="">
</span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class=""> </span><span class="nf">m</span><span class="nf">a</span><span class="nf">i</span><span class="nf">n</span><span class="p">(</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">l</span><span class="n">i</span><span class="n">s</span><span class="n">t</span><span class="o">&lt;</span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">O</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="o">&gt;</span><span class=""> </span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="n">s</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="n">s</span><span class="p">.</span><span class="n">p</span><span class="n">u</span><span class="n">s</span><span class="n">h</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">(</span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="n">s</span><span class="p">.</span><span class="n">p</span><span class="n">u</span><span class="n">s</span><span class="n">h</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">(</span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="p">(</span><span class="s">"</span><span class="s">h</span><span class="s">e</span><span class="s">l</span><span class="s">l</span><span class="s">o</span><span class="s">"</span><span class="p">)</span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">l</span><span class="n">i</span><span class="n">s</span><span class="n">t</span><span class="o">&lt;</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">u</span><span class="n">n</span><span class="n">i</span><span class="n">q</span><span class="n">u</span><span class="n">e</span><span class="n">_</span><span class="n">p</span><span class="n">t</span><span class="n">r</span><span class="o">&lt;</span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">O</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="o">&gt;</span><span class="o">&gt;</span><span class=""> </span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="n">P</span><span class="n">o</span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="n">P</span><span class="n">o</span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class="p">.</span><span class="n">p</span><span class="n">u</span><span class="n">s</span><span class="n">h</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">(</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">m</span><span class="n">a</span><span class="n">k</span><span class="n">e</span><span class="n">_</span><span class="n">u</span><span class="n">n</span><span class="n">i</span><span class="n">q</span><span class="n">u</span><span class="n">e</span><span class="o">&lt;</span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="n">P</span><span class="n">o</span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">r</span><span class="n">s</span><span class="p">.</span><span class="n">p</span><span class="n">u</span><span class="n">s</span><span class="n">h</span><span class="n">_</span><span class="n">b</span><span class="n">a</span><span class="n">c</span><span class="n">k</span><span class="p">(</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">m</span><span class="n">a</span><span class="n">k</span><span class="n">e</span><span class="n">_</span><span class="n">u</span><span class="n">n</span><span class="n">i</span><span class="n">q</span><span class="n">u</span><span class="n">e</span><span class="o">&lt;</span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">S</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"</span><span class="s">w</span><span class="s">o</span><span class="s">r</span><span class="s">l</span><span class="s">d</span><span class="s">"</span><span class="p">)</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class=""> </span><span class="mi">0</span><span class="p">;</span><span class="">
</span><span class="p">}</span><span class="">
</span></pre></div>

</div>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="n">D</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class=""> </span><span class="mi">5</span><span class="">
</span><span class="n">D</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">h</span><span class="n">e</span><span class="n">l</span><span class="n">l</span><span class="n">o</span><span class="">
</span><span class="n">D</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class=""> </span><span class="mi">6</span><span class="">
</span><span class="n">D</span><span class="n">e</span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">u</span><span class="n">c</span><span class="n">t</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">r</span><span class="n">i</span><span class="n">n</span><span class="n">g</span><span class=""> </span><span class="n">w</span><span class="n">o</span><span class="n">r</span><span class="n">l</span><span class="n">d</span><span class="">
</span></pre></div>

</div>

<p>Since C++ containers can not store objects of arbitrary type, I introduce a base class. I also experiment with smart pointers. I find out that a virtual destructor is needed to make proper destruction. That really confused me.</p>

<p>Dynamic cast can work as <code>isinstance</code> in Python.</p>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="cp">#</span><span class="cp">i</span><span class="cp">n</span><span class="cp">c</span><span class="cp">l</span><span class="cp">u</span><span class="cp">d</span><span class="cp">e</span><span class=""> </span><span class="cpf">&lt;</span><span class="cpf">i</span><span class="cpf">o</span><span class="cpf">s</span><span class="cpf">t</span><span class="cpf">r</span><span class="cpf">e</span><span class="cpf">a</span><span class="cpf">m</span><span class="cpf">&gt;</span><span class="cp">
</span><span class="cp">#</span><span class="cp">i</span><span class="cp">n</span><span class="cp">c</span><span class="cp">l</span><span class="cp">u</span><span class="cp">d</span><span class="cp">e</span><span class=""> </span><span class="cpf">&lt;</span><span class="cpf">l</span><span class="cpf">i</span><span class="cpf">s</span><span class="cpf">t</span><span class="cpf">&gt;</span><span class="cp">
</span><span class="cp">#</span><span class="cp">i</span><span class="cp">n</span><span class="cp">c</span><span class="cp">l</span><span class="cp">u</span><span class="cp">d</span><span class="cp">e</span><span class=""> </span><span class="cpf">&lt;</span><span class="cpf">m</span><span class="cpf">e</span><span class="cpf">m</span><span class="cpf">o</span><span class="cpf">r</span><span class="cpf">y</span><span class="cpf">&gt;</span><span class="cp">
</span><span class="">
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class=""> </span><span class="nc">R</span><span class="nc">L</span><span class="nc">M</span><span class="nc">e</span><span class="nc">t</span><span class="nc">a</span><span class="nc">O</span><span class="nc">b</span><span class="nc">j</span><span class="nc">e</span><span class="nc">c</span><span class="nc">t</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">v</span><span class="k">i</span><span class="k">r</span><span class="k">t</span><span class="k">u</span><span class="k">a</span><span class="k">l</span><span class=""> </span><span class="kt">b</span><span class="kt">o</span><span class="kt">o</span><span class="kt">l</span><span class=""> </span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">e</span><span class="n">s</span><span class="p">(</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">s</span><span class="k">t</span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">O</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class=""> </span><span class="o">&amp;</span><span class="n">o</span><span class="n">t</span><span class="n">h</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class=""> </span><span class="nb">f</span><span class="nb">a</span><span class="nb">l</span><span class="nb">s</span><span class="nb">e</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class="">
</span><span class="p">}</span><span class="p">;</span><span class="">
</span><span class="">
</span><span class="k">c</span><span class="k">l</span><span class="k">a</span><span class="k">s</span><span class="k">s</span><span class=""> </span><span class="nc">R</span><span class="nc">L</span><span class="nc">M</span><span class="nc">e</span><span class="nc">t</span><span class="nc">a</span><span class="nc">I</span><span class="nc">n</span><span class="nc">t</span><span class="nc">e</span><span class="nc">g</span><span class="nc">e</span><span class="nc">r</span><span class=""> </span><span class="o">:</span><span class=""> </span><span class="k">p</span><span class="k">u</span><span class="k">b</span><span class="k">l</span><span class="k">i</span><span class="k">c</span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">O</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">p</span><span class="k">r</span><span class="k">i</span><span class="k">v</span><span class="k">a</span><span class="k">t</span><span class="k">e</span><span class="o">:</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">p</span><span class="k">u</span><span class="k">b</span><span class="k">l</span><span class="k">i</span><span class="k">c</span><span class="o">:</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class=""> </span><span class="o">:</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">(</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="kt">b</span><span class="kt">o</span><span class="kt">o</span><span class="kt">l</span><span class=""> </span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">e</span><span class="n">s</span><span class="p">(</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">s</span><span class="k">t</span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">O</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class=""> </span><span class="o">&amp;</span><span class="n">o</span><span class="n">t</span><span class="n">h</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">t</span><span class="k">r</span><span class="k">y</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">s</span><span class="k">t</span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class=""> </span><span class="o">&amp;</span><span class="n">o</span><span class="n">t</span><span class="n">h</span><span class="n">e</span><span class="n">r</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class=""> </span><span class="o">=</span><span class=""> </span><span class="k">d</span><span class="k">y</span><span class="k">n</span><span class="k">a</span><span class="k">m</span><span class="k">i</span><span class="k">c</span><span class="k">_</span><span class="k">c</span><span class="k">a</span><span class="k">s</span><span class="k">t</span><span class="o">&lt;</span><span class="k">c</span><span class="k">o</span><span class="k">n</span><span class="k">s</span><span class="k">t</span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="o">&amp;</span><span class="o">&gt;</span><span class="p">(</span><span class="n">o</span><span class="n">t</span><span class="n">h</span><span class="n">e</span><span class="n">r</span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class=""> </span><span class="n">o</span><span class="n">t</span><span class="n">h</span><span class="n">e</span><span class="n">r</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="p">.</span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class=""> </span><span class="o">=</span><span class="o">=</span><span class=""> </span><span class="n">v</span><span class="n">a</span><span class="n">l</span><span class="n">u</span><span class="n">e</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class=""> </span><span class="k">c</span><span class="k">a</span><span class="k">t</span><span class="k">c</span><span class="k">h</span><span class=""> </span><span class="p">(</span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">b</span><span class="n">a</span><span class="n">d</span><span class="n">_</span><span class="n">c</span><span class="n">a</span><span class="n">s</span><span class="n">t</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="p">}</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class=""> </span><span class="nb">f</span><span class="nb">a</span><span class="nb">l</span><span class="nb">s</span><span class="nb">e</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="p">}</span><span class="">
</span><span class="p">}</span><span class="p">;</span><span class="">
</span><span class="">
</span><span class="kt">i</span><span class="kt">n</span><span class="kt">t</span><span class=""> </span><span class="nf">m</span><span class="nf">a</span><span class="nf">i</span><span class="nf">n</span><span class="p">(</span><span class="p">)</span><span class=""> </span><span class="p">{</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">O</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class=""> </span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class=""> </span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">5</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">R</span><span class="n">L</span><span class="n">M</span><span class="n">e</span><span class="n">t</span><span class="n">a</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class=""> </span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">6</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">I</span><span class="s">n</span><span class="s">t</span><span class="s">e</span><span class="s">g</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">5</span><span class="s">)</span><span class="s"> </span><span class="s">m</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">e</span><span class="s">s</span><span class="s"> </span><span class="s">O</span><span class="s">b</span><span class="s">j</span><span class="s">e</span><span class="s">c</span><span class="s">t</span><span class="s">?</span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s"> </span><span class="s">"</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">5</span><span class="p">.</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">e</span><span class="n">s</span><span class="p">(</span><span class="n">o</span><span class="n">b</span><span class="n">j</span><span class="p">)</span><span class=""> </span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">I</span><span class="s">n</span><span class="s">t</span><span class="s">e</span><span class="s">g</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">5</span><span class="s">)</span><span class="s"> </span><span class="s">m</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">e</span><span class="s">s</span><span class="s"> </span><span class="s">I</span><span class="s">n</span><span class="s">t</span><span class="s">e</span><span class="s">g</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">6</span><span class="s">)</span><span class="s">?</span><span class="s"> </span><span class="s">"</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">5</span><span class="p">.</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">e</span><span class="n">s</span><span class="p">(</span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">6</span><span class="p">)</span><span class=""> </span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="n">s</span><span class="n">t</span><span class="n">d</span><span class="o">:</span><span class="o">:</span><span class="n">c</span><span class="n">o</span><span class="n">u</span><span class="n">t</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="s">I</span><span class="s">n</span><span class="s">t</span><span class="s">e</span><span class="s">g</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">6</span><span class="s">)</span><span class="s"> </span><span class="s">m</span><span class="s">a</span><span class="s">t</span><span class="s">c</span><span class="s">h</span><span class="s">e</span><span class="s">s</span><span class="s"> </span><span class="s">I</span><span class="s">n</span><span class="s">t</span><span class="s">e</span><span class="s">g</span><span class="s">e</span><span class="s">r</span><span class="s">(</span><span class="s">6</span><span class="s">)</span><span class="s">?</span><span class="s"> </span><span class="s">"</span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">6</span><span class="p">.</span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">e</span><span class="n">s</span><span class="p">(</span><span class="n">i</span><span class="n">n</span><span class="n">t</span><span class="n">6</span><span class="p">)</span><span class=""> </span><span class=""> </span><span class="o">&lt;</span><span class="o">&lt;</span><span class=""> </span><span class="s">"</span><span class="se">\</span><span class="se">n</span><span class="s">"</span><span class="p">;</span><span class="">
</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="k">r</span><span class="k">e</span><span class="k">t</span><span class="k">u</span><span class="k">r</span><span class="k">n</span><span class=""> </span><span class="mi">0</span><span class="p">;</span><span class="">
</span><span class="p">}</span><span class="">
</span></pre></div>

</div>

<div class="rliterate-code"><div class="rliterate-code-body"><pre><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class=""> </span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">e</span><span class="n">s</span><span class=""> </span><span class="n">O</span><span class="n">b</span><span class="n">j</span><span class="n">e</span><span class="n">c</span><span class="n">t</span><span class="o">?</span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class=""> </span><span class="mi">0</span><span class="">
</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class=""> </span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">e</span><span class="n">s</span><span class=""> </span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">?</span><span class=""> </span><span class="mi">0</span><span class="">
</span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class=""> </span><span class="n">m</span><span class="n">a</span><span class="n">t</span><span class="n">c</span><span class="n">h</span><span class="n">e</span><span class="n">s</span><span class=""> </span><span class="n">I</span><span class="n">n</span><span class="n">t</span><span class="n">e</span><span class="n">g</span><span class="n">e</span><span class="n">r</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">?</span><span class=""> </span><span class="mi">1</span><span class="">
</span></pre></div>

</div>

<p>For this to work, there has to be some virtual member in the base class.</p>

<h2><a name="8fe0f8cbf13f49c0a4d9aa4f92fa2540"></a>Misc</h2>

<div class="rliterate-code"><div class="rliterate-code-header"><ol class="rliterate-code-path"><li>runcpp.sh</li></ol>

</div>

<div class="rliterate-code-body"><pre><span class="">c</span><span class="">a</span><span class="">t</span><span class=""> </span><span class="">&gt;</span><span class=""> </span><span class="">t</span><span class="">m</span><span class="">p</span><span class="">.</span><span class="">c</span><span class="">p</span><span class="">p</span><span class=""> </span><span class="o">&amp;</span><span class="o">&amp;</span><span class=""> </span><span class="">g</span><span class="">+</span><span class="">+</span><span class=""> </span><span class="">t</span><span class="">m</span><span class="">p</span><span class="">.</span><span class="">c</span><span class="">p</span><span class="">p</span><span class=""> </span><span class="">-</span><span class="">o</span><span class=""> </span><span class="">t</span><span class="">m</span><span class="">p</span><span class=""> </span><span class="o">&amp;</span><span class="o">&amp;</span><span class=""> </span><span class="">.</span><span class="">/</span><span class="">t</span><span class="">m</span><span class="">p</span><span class=""> </span><span class="o">&amp;</span><span class="o">&amp;</span><span class=""> </span><span class="">r</span><span class="">m</span><span class=""> </span><span class="">t</span><span class="">m</span><span class="">p</span><span class="">.</span><span class="">c</span><span class="">p</span><span class="">p</span><span class=""> </span><span class="">t</span><span class="">m</span><span class="">p</span><span class="">
</span></pre></div>

</div>
